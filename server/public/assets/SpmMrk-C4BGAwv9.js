import{_ as g,c as e,a as t,j as v,F as m,r as y,d as b,w as u,v as p,e as f,o as d,f as _,t as a}from"./index-BjdZvEQ0.js";const x={data(){return{spmRcdList:[],selectedOrdNo:null,detailInfo:{cpy_nm:"",ceo_nm:"",mgr_ctt:"",mgr_nm:"",ofc_addr:"",spm_dt:""},productInfo:{prd_no:"",prd_nm:"",qty:""},productList:[]}},methods:{async fetchSpmRcdList(){try{const o=await f.get("/api/spmMrk");this.spmRcdList=o.data}catch{alert("출하이력 불러오기 실패")}},async fetchDetail(o){try{const l=await f.get("/api/spmMrk/detail",{params:{ord_no:o.ord_no}});l.data&&l.data.length>0&&(this.detailInfo=l.data[0]);const r=await f.get("/api/spmMrk/detail/product",{params:{ord_no:o.ord_no}});r.data&&r.data.length>0?this.productList=r.data:this.productList=[]}catch{alert("상세정보 불러오기 실패"),this.productList=[]}},formatDateTime(o){if(!o)return"";const l=new Date(o),r=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,"0"),s=String(l.getDate()).padStart(2,"0");return`${r}-${c}-${s}`},selectRow(o){this.selectedOrdNo=o.ord_no,this.fetchDetail(o)},async handleSpmComplete(){if(!this.selectedOrdNo){alert("리스트를 선택하세요.");return}try{const o=await f.post("/api/spmMrk/complete",{ord_no:this.selectedOrdNo});alert("출하완료 처리되었습니다."),this.fetchSpmRcdList()}catch{alert("출하완료 처리 실패")}}}},h={class:"table table-bordered text-center",style:{"margin-top":"5px"}},w=["onClick"],k={key:0},L={class:"text-end mb-3"},I=["disabled"],S={class:"info-box"},R={style:{"margin-left":"50px","margin-right":"50px","padding-bottom":"10px","padding-top":"10px"}},C={class:"info-row"},D={class:"info-col"},N={class:"info-row"},V={class:"info-col info"},M={class:"info-row"},O={class:"info-col"},U={class:"info-row"},T={class:"info-col"},B={class:"info-row"},F={class:"info-col"},j={class:"info-col info-center",style:{"margin-left":"11px"}},q=["value"],z={class:"table table-bordered text-center",style:{"margin-top":"5px"}},E={key:0};function Y(o,l,r,c,s,i){return d(),e(m,null,[l[24]||(l[24]=t("div",{class:"container mt-4"},[t("div",{class:"d-flex justify-content-between align-items-center mb-4"},[t("div",{class:"d-flex gap-4"},[t("h2",{class:"mb-4"},"출하표지")])])],-1)),t("div",null,[t("button",{class:"btn btn-primary mb-2",onClick:l[0]||(l[0]=(...n)=>i.fetchSpmRcdList&&i.fetchSpmRcdList(...n))},"출하이력 불러오기"),t("table",h,[l[8]||(l[8]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"수주번호"),t("th",null,"납품처"),t("th",null,"출하일자")])],-1)),t("tbody",null,[(d(!0),e(m,null,y(s.spmRcdList,n=>(d(),e("tr",{key:n.ord_no,onClick:A=>i.selectRow(n),class:_({"table-active":s.selectedOrdNo===n.ord_no})},[t("td",null,a(n.ord_no),1),t("td",null,a(n.cpy_nm),1),t("td",null,a(i.formatDateTime(n.spm_dt)),1)],10,w))),128)),s.spmRcdList.length===0?(d(),e("tr",k,l[7]||(l[7]=[t("td",{colspan:"5"},"데이터가 없습니다.",-1)]))):v("",!0)])]),t("div",L,[t("button",{class:"btn btn-primary",onClick:l[1]||(l[1]=(...n)=>i.handleSpmComplete&&i.handleSpmComplete(...n)),disabled:!s.selectedOrdNo},"출하완료 처리",8,I)]),t("div",S,[t("div",R,[l[22]||(l[22]=b('<div class="info-row"><div class="info-col" style="margin-left:190px;"><div class="info-title">납품처 정보</div></div><div class="info-col info-right" style="margin-right:15px;margin-top:-3px;"><div class="info-title">공급처 정보</div></div></div>',1)),t("div",C,[t("div",D,[l[9]||(l[9]=t("label",null,"상호명",-1)),u(t("input",{class:"info-input","onUpdate:modelValue":l[2]||(l[2]=n=>s.detailInfo.cpy_nm=n),readonly:""},null,512),[[p,s.detailInfo.cpy_nm]])]),l[10]||(l[10]=t("div",{class:"info-col info-right"},[t("label",null,"상호명"),t("input",{class:"info-input",value:"(주)밥먹고하시조",readonly:""})],-1))]),t("div",N,[t("div",V,[l[11]||(l[11]=t("label",null,"대표",-1)),u(t("input",{class:"info-input","onUpdate:modelValue":l[3]||(l[3]=n=>s.detailInfo.ceo_nm=n),readonly:""},null,512),[[p,s.detailInfo.ceo_nm]])]),l[12]||(l[12]=t("div",{class:"info-col info-right"},[t("label",null,"전화"),t("input",{class:"info-input",value:"053-421-2460",readonly:""})],-1))]),t("div",M,[t("div",O,[l[13]||(l[13]=t("label",null,"전화",-1)),u(t("input",{class:"info-input","onUpdate:modelValue":l[4]||(l[4]=n=>s.detailInfo.mgr_ctt=n),readonly:""},null,512),[[p,s.detailInfo.mgr_ctt]])]),l[14]||(l[14]=t("div",{class:"info-col info-right"},[t("label",null,"대표"),t("input",{class:"info-input",value:"서강중",readonly:""})],-1))]),t("div",U,[t("div",T,[l[15]||(l[15]=t("label",null,"담당자",-1)),u(t("input",{class:"info-input","onUpdate:modelValue":l[5]||(l[5]=n=>s.detailInfo.mgr_nm=n),readonly:""},null,512),[[p,s.detailInfo.mgr_nm]])]),l[16]||(l[16]=t("div",{class:"info-col info-right"},[t("label",null,"담당자"),t("input",{class:"info-input",value:"2조",readonly:""})],-1))]),t("div",B,[t("div",F,[l[17]||(l[17]=t("label",null,"주소",-1)),u(t("input",{class:"info-input","onUpdate:modelValue":l[6]||(l[6]=n=>s.detailInfo.ofc_addr=n),readonly:""},null,512),[[p,s.detailInfo.ofc_addr]])]),t("div",j,[l[18]||(l[18]=t("label",null,"출하일",-1)),t("input",{class:"info-input",value:i.formatDateTime(s.detailInfo.spm_dt),readonly:""},null,8,q)]),l[19]||(l[19]=t("div",{class:"info-col info-right"},[t("label",null,"주소"),t("input",{class:"info-input",value:"대구광역시 중구 중앙대로 403",readonly:""})],-1))]),l[23]||(l[23]=t("hr",null,null,-1)),t("table",z,[l[21]||(l[21]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"제품번호"),t("th",null,"제품명"),t("th",null,"수량")])],-1)),t("tbody",null,[(d(!0),e(m,null,y(s.productList,n=>(d(),e("tr",{key:n.prd_no},[t("td",null,a(n.prd_no),1),t("td",null,a(n.prd_nm),1),t("td",null,a(n.qty),1)]))),128)),s.productList.length===0?(d(),e("tr",E,l[20]||(l[20]=[t("td",{colspan:"3"},"데이터가 없습니다.",-1)]))):v("",!0)])])])])]),l[25]||(l[25]=t("br",null,null,-1))],64)}const H=g(x,[["render",Y]]);export{H as default};
//# sourceMappingURL=SpmMrk-C4BGAwv9.js.map
