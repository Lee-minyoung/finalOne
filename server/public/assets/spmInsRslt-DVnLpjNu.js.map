<<<<<<< HEAD
{"version":3,"file":"spmInsRslt-DVnLpjNu.js","sources":["../../../client/src/views/qualitys/PrdRsltSelModal.vue","../../../client/src/views/qualitys/spmInsRslt.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade show d-block\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">제품 선택</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <input\n              type=\"text\"\n              class=\"form-control w-25\"\n              placeholder=\"제품명 검색\"\n              v-model=\"search\"\n              id=\"searchProduct\"\n            />\n          </div>\n\n          <table class=\"table table-sm table-bordered text-center\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>제품명</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n              v-for=\"item in filteredProducts\"\n              :key=\"item.ln_opr_no + '-' + item.prd_nm\"\n              @click=\"selectProduct(item)\" \n              style=\"cursor: pointer;\">\n              <td>{{ item.ln_opr_no }} </td>\n              <td>{{ item.prd_nm }}</td>              \n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 부모로부터 전달받는 props (속성값)\n  props: {\n    prodList: {\n    type: Array,\n    default: () => []\n  }\n},\n  // 컴포넌트 내부에서 사용하는 데이터 정의\n  data() {\n    return {\n      search: '',         // 검색어 입력값\n      // selectedProd: []    // 사용자가 선택한 제품 목록 (체크 상태 유지)\n    };\n  },\n\n  // 계산된 속성 (화면에 반응형으로 자동 갱신됨)\n  computed: {\n    // 검색어를 기준으로 prodList를 필터링한 결과 반환\n    filteredProducts() {\n      if (!this.prodList) return []  // prodList가 없으면 빈 배열 반환\n      return this.prodList.filter(p => p.prd_nm?.includes(this.search))  // 제품명 포함 여부로 필터링\n    }\n  },\n  \n  // 사용자 동작에 따른 메서드 정의\n  methods: {\n\n    selectProduct(item){\n      this.$emit('select-product', item);\n      this.$emit('close');\n    },\n  },\n  mounted() {\n  console.log('모달에 전달된 prodList:', this.prodList);\n},\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff;\n}\n</style>","<template>\n  <div class=\"container mt-4\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2 class=\"mb-4\">완제품검사성적서</h2>\n        <div class=\"center-button\">\n          <button class=\"btn btn-primary\" @click=\"spmInsStdInsert\" style=\"margin-bottom:-40px;\">성적서 반영</button>\n        </div>\n      </div>\n    <!-- 조회 조건 -->\n    <div class=\"input\">\n       제품검색 <input v-model=\"searchQuery\" class=\"form-control\"  placeholder=\"\" readonly />\n      <button class=\"btn btn-outline-secondary\" id=\"icon-btn\" @click=\"openProductModal\" style=\"margin-right:505px;\">🔍</button>\n      성적서번호 <input :value=\"selectedRsltNo\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      <hr style=\"margin-left:-75px;\">\n\n      라인번호 <input :value=\"selectedLineId\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      제품명 <input :value=\"selectedProductName\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      작성일자 <input :value=\"selectedInsDate\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      검사자 <input :value=\"selectedInsDev\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n    </div>\n    <br>\n    <div class=\"middle\">\n      <!-- 결점구분 -->\n      <div>\n        <table class=\"table table-bordered text-center\" id=\"table\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>결점구분</th>\n              <th>검사량</th>\n              <th>합격량</th>\n              <th>불량량</th>\n            </tr>\n          </thead>\n\n          <!-- 수량 입력칸 -->\n          <tbody>\n            <tr>\n              <td>수량</td>\n              <td><input v-model=\"newItem.mgr_count\" class=\"rslInput\" placeholder=\"검사량\" style=\"background-color: #eee;\" readonly/></td>\n              <td><input v-model=\"newItem.succ_count\" class=\"rslInput\" placeholder=\"합격량\" /></td>\n              <td><input v-model=\"newItem.dft_count\" class=\"rslInput\" placeholder=\"불량량\" /></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- 종합판정 -->\n      <!-- 종합판정 -->\n<div class=\"rst\">\n  <div class=\"hstack gap-3\">\n    <div style=\"padding-left:50px;\">종합판정</div>\n    <div class=\"vr\"></div>\n    <button\n\n      :class=\"['jdg-btn', autoOverallJdg === '합격' ? 'btn-green' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >합격</button>\n    <button\n      :class=\"['jdg-btn', autoOverallJdg === '불합격' ? 'btn-red' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >불합격</button>\n  </div>\n</div>\n    </div>\n    <h5>검사결과</h5>\n    <!-- 테이블 -->\n    <!-- 테이블 헤더 -->\n    <table class=\"table table-bordered text-center \">\n      <thead class=\"table-light\">\n        <tr>\n          <th>검사항목</th>\n          <th>검사기준</th>\n          <th>검사결과</th>\n          <th>판정</th>\n          <th>비고</th>\n        </tr>\n      </thead>\n\n      <!-- 테이블 바디 : 검사결과  -->\n      <tbody>\n        <tr v-for=\"(item, index) in spmInsStdList\" :key=\"item.spm_ins_std_no\">\n          <td>{{ item.ins_itm }}</td>\n    <td>{{ item.ins_mthd }}</td>\n    <td>\n      <input v-model=\"newItemList[index].mgr_rslt\" class=\"form-control\" placeholder=\"검사결과\" />\n    </td>\n    <td>\n      {{ getJdg(item, newItemList[index].mgr_rslt) }}\n    </td>\n    <td>\n      <input v-model=\"newItemList[index].rmk\" class=\"form-control\" placeholder=\"결점원인, 결점코드 등\"/>\n    </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- 제품 검색 모달 -->\n  <PrdSelModal v-if=\"showProductModal\" :prodList=\"prodList\" @select-product=\"handleSelectedProduct\"\n    @close=\"showProductModal = false\" />\n</template>\n\n<script>\nimport axios from 'axios';\nimport useDateUtils from '@/utils/useDates.js' // 날짜 포맷 유틸\nimport PrdSelModal from '@/views/qualitys/PrdRsltSelModal.vue'; // 모달\n\nimport { ref, onBeforeMount } from 'vue';\n\n// 반응형 객체 선언 : 원시타입    \nconst isUpdated = ref(false);\n\nexport default {\n  components: { PrdSelModal },\n  data() {\n    return {\n      searchQuery: '',             // 제품검색\n      selectedLineId: '',          // 라인번호\n      selectedProductName: '',     // 제품명\n      selectedInsDate: this.getToday(),     // 날짜\n       newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      spmInsStdList: [],\n      prodList: [],\n      showProductModal: false,\n      newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      newItemList: [],\n      overallJdg: '',\n      selectedRsltNo: '', // 성적서 번호\n    };\n  },\n  watch: {\n    'newItem.succ_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const succ = Number(val);\n      if (!isNaN(mgr) && !isNaN(succ)) {\n        this.newItem.dft_count = mgr - succ >= 0 ? mgr - succ : '';\n      }\n    },\n    'newItem.dft_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const dft = Number(val);\n      if (!isNaN(mgr) && !isNaN(dft)) {\n        this.newItem.succ_count = mgr - dft >= 0 ? mgr - dft : '';\n      }\n    }\n  },\n  created() {\n    this.selectedInsDev = localStorage.getItem('username') || ''; // 검사자(로그인 사용자)\n  },\n  computed: {\n  autoOverallJdg() {\n    // 모든 판정이 '적합'이면 '합격', 하나라도 '부적합'이면 '불합격'\n    if (!this.spmInsStdList.length) return '';\n    for (let i = 0; i < this.spmInsStdList.length; i++) {\n      const 판정 = this.getJdg(this.spmInsStdList[i], this.newItemList[i]?.mgr_rslt);\n      if (판정 === '부적합') return '불합격';\n    }\n    // 모두 '적합'이면\n    if (this.spmInsStdList.every((item, idx) => this.getJdg(item, this.newItemList[idx]?.mgr_rslt) === '적합')) {\n      return '합격';\n    }\n    return '';\n  }\n},\n  methods: {\n    // 등록\n    async spmInsStdInsert() {\n  if (!this.selectedRsltNo) {\n    alert('성적서 번호가 없습니다.');\n    return;\n  }\n\n  // 1. 성적서(마스터) 저장\n  let obj = {\n    rslt_no: this.selectedRsltNo,\n    mgr: this.selectedInsDev,\n    ins_dt: this.selectedInsDate,\n    mgr_count: this.newItem.mgr_count,\n    succ_count: this.newItem.succ_count,\n    dft_count: this.newItem.dft_count,\n    ovr_jdg: this.getOvrJdgCode(this.autoOverallJdg), // 자동 판정 사용\n    rmk: this.newItem.rmk || '',\n    ln_opr_no: this.selectedLineId,\n    prd_no: this.searchQuery\n  };\n\n  try {\n    let result = await axios.post(\"/api/spmInsRslt\", obj);\n    let addRes = result.data;\n\nif (addRes.isSuccessed) {\n      // 1) 서버에서 마지막 상세번호 조회\n      const res = await axios.get('/api/spmInsRslt/lastDtlNo');\n      let lastNo = Number(res.data.lastNo) || 0;\n\n        // 2) 상세(행별) 저장\n      const dtlList = this.spmInsStdList.map((item, idx) => {\n        lastNo += 1;\n        return {\n          spm_ins_rslt_dtl_no: `YGS-${String(lastNo).padStart(3, '0')}`,\n          mgr_date: this.selectedInsDate,\n          spm_ins_std_no: item.spm_ins_std_no,\n          mgr_rslt: this.newItemList[idx].mgr_rslt,\n          jdg: this.getJdgCode(this.getJdg(item, this.newItemList[idx].mgr_rslt)),\n          dft_qty: 0,\n          rslt_no: this.selectedRsltNo,\n          rmk: this.newItemList[idx].rmk || ''\n      };\n});\n\n       await axios.post(\"/api/spmInsRslt/dtl\", dtlList);\n\n      alert('등록되었습니다.');\n      // 필요시 화면 갱신\n    } else {\n      alert('모든 필드를 확인하세요.');\n    }\n  } catch (err) {\n    alert('등록 중 오류가 발생했습니다.');\n  }\n},\n  parseNumber(str) {\n      // 앞부분의 숫자만 추출 (예: \"200g\" → 200)\n      const match = String(str).match(/^(\\d+(\\.\\d+)?)/);\n      return match ? Number(match[1]) : NaN;\n    },\n  getJdg(item, mgr_rslt) {\n  if (mgr_rslt === '' || mgr_rslt === null || mgr_rslt === undefined) return '';\n\n  const std = this.parseNumber(item.ins_mthd);\n  const tol = this.parseNumber(item.ins_spc);\n  const result = this.parseNumber(mgr_rslt);\n\n  // 값이 모두 숫자일 때만 비교\n  if (!isNaN(std) && !isNaN(tol) && !isNaN(result)) {\n    const min = std - tol;\n    const max = std + tol;\n    return (result >= min && result <= max) ? '적합' : '부적합';\n  }\n\n  // 만약 검사결과가 '적합', '부적합' 등 한글로 들어올 경우\n  if (mgr_rslt === '적합') return '적합';\n  if (mgr_rslt === '부적합') return '부적합';\n\n  // 1/0로 들어올 경우\n  if (mgr_rslt === '1' || mgr_rslt === 1) return '적합';\n  if (mgr_rslt === '0' || mgr_rslt === 0) return '부적합';\n\n  return '';\n},\n\n    getToday() {\n    const today = new Date();\n    // YYYY-MM-DD 형식\n    return today.toISOString().slice(0, 10);\n    },\n    // 날짜 포맷\n    dateFormat(value, format) {\n      return useDateUtils.dateFormat(value, format)\n    },\n\n\n    // 모달\n    showModal() {\n      this.showProductModal = true; // 모달 열기\n    },\n    hideModal() {\n      this.showProductModal = false; // 모달 닫기\n    },\n    openProductModal() {\n      axios.get('/api/spmInsRslt/prdList') // 제품 목록 가져오기\n        .then(res => {\n          console.log('제품목록:', res.data);\n          this.prodList = Array.isArray(res.data) ? res.data : []; // 배열인지 확인 후 설정\n          this.showProductModal = true; // 모달 열기\n        })\n      .catch(err => {\n          console.error('제품 목록 불러오기 실패', err);\n          this.prodList = []; // 실패 시 빈 배열로 설정\n        });\n    },\n\n    // 제품 선택 시\n  async handleSelectedProduct(item) {\n  this.selectedLineId = item.ln_opr_no;\n  this.selectedProductName = item.prd_nm;\n  this.searchQuery = item.prd_no;  \n  this.selectedInsDate = this.getToday();\n\n  this.showProductModal = false;\n\n  // 성적서 번호 자동 할당\n  try {\n    const res = await axios.get('/api/spmInsRslt/lastRsltNo');\n    const lastNo = Number(res.data.lastNo) || 0;\n    const nextNo = String(lastNo + 1).padStart(3, '0');\n    this.selectedRsltNo = `SJS-${nextNo}`;\n  } catch (err) {\n    this.selectedRsltNo = 'SJS-001';\n  }\n\n  await this.getSpmInsStdList(item.prd_no);\n\n   // selectInsCount로 검사량(pdn_qty) 조회\n  try {\n    const res = await axios.get('/api/spmInsRslt/insCount', {\n      params: { ln_opr_no: item.ln_opr_no, prd_no: item.prd_no }\n    });\n    console.log('insCount 응답:', res.data);\n    this.newItem.mgr_count = res.data?.pdn_qty ?? '';\n  } catch (err) {\n    this.newItem.mgr_count = '';\n  }\n},\n    // 기준서 목록 가져오기\n    async getSpmInsStdList(prd_no) {\n  try {\n    const result = await axios.get('/api/spmInsStd', { params: { prd_no } });\n    this.spmInsStdList = result.data;\n    // 행 개수만큼 입력값 배열 초기화 (반응형)\n    this.newItemList = this.spmInsStdList.map(() => ({\n      mgr_rslt: '',\n      rmk: ''\n    }));\n  } catch (err) {\n    alert('기준서 목록을 가져오는 중 오류가 발생했습니다.');\n  }\n},\n  getOvrJdgCode(jdg) {\n    if (jdg === '합격') return 'n1';\n    if (jdg === '불합격') return 'n2';\n    return '';\n  },\n   getJdgCode(jdg) {\n    if (jdg === '적합') return 'o1';\n    if (jdg === '부적합') return 'o2';\n    return '';\n  },\n  }\n}\n\n</script>\n<style>\n.input {\n  border: 1px solid lightgray;\n  padding: 30px;\n  padding-left: 100px;\n}\n\n.form-control {\n  display: inline-block;\n  width: 150px;\n}\n\n.btn {\n  margin: 5px;\n}\n\n.btn1 {\n  float: right;\n}\n\n#table {\n  width:650px;\n  height:130px;\n  margin-right:20px;\n}\n.rslInput{\n  width:100px;\n}\n.middle {\n  display: flex;\n}\n.rst{\n  width:650px;\n  height:130px;\n  border: 1px solid lightgray;\n  padding: 10px;\n}\n.jdg-btn.btn-green {\n  background-color: #4caf50 !important;\n  color: #fff !important;\n}\n.jdg-btn.btn-red {\n  background-color: #e53935 !important;\n  color: #fff !important;\n}\n</style>"],"names":["_sfc_main","p","_a","item","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","$event","$data","_openBlock","_Fragment","_renderList","$options","_toDisplayString","ref","PrdSelModal","val","mgr","succ","dft","i","idx","obj","axios","res","lastNo","dtlList","str","match","mgr_rslt","std","tol","result","min","max","value","format","useDateUtils","err","nextNo","prd_no","jdg","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","args","_createTextVNode","_hoisted_11","_vModelText","_normalizeClass","index","_createBlock","_component_PrdSelModal","_createCommentVNode"],"mappings":"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"}
=======
<<<<<<< HEAD
<<<<<<<< HEAD:server/public/assets/spmInsRslt-C9dj637J.js.map
{"version":3,"file":"spmInsRslt-C9dj637J.js","sources":["../../../client/src/views/qualitys/PrdRsltSelModal.vue","../../../client/src/views/qualitys/spmInsRslt.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade show d-block\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">제품 선택</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <input\n              type=\"text\"\n              class=\"form-control w-25\"\n              placeholder=\"제품명 검색\"\n              v-model=\"search\"\n              id=\"searchProduct\"\n            />\n          </div>\n\n          <table class=\"table table-sm table-bordered text-center\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>제품명</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n              v-for=\"item in filteredProducts\"\n              :key=\"item.ln_opr_no + '-' + item.prd_nm\"\n              @click=\"selectProduct(item)\" \n              style=\"cursor: pointer;\">\n              <td>{{ item.ln_opr_no }} </td>\n              <td>{{ item.prd_nm }}</td>              \n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 부모로부터 전달받는 props (속성값)\n  props: {\n    prodList: {\n    type: Array,\n    default: () => []\n  }\n},\n  // 컴포넌트 내부에서 사용하는 데이터 정의\n  data() {\n    return {\n      search: '',         // 검색어 입력값\n      // selectedProd: []    // 사용자가 선택한 제품 목록 (체크 상태 유지)\n    };\n  },\n\n  // 계산된 속성 (화면에 반응형으로 자동 갱신됨)\n  computed: {\n    // 검색어를 기준으로 prodList를 필터링한 결과 반환\n    filteredProducts() {\n      if (!this.prodList) return []  // prodList가 없으면 빈 배열 반환\n      return this.prodList.filter(p => p.prd_nm?.includes(this.search))  // 제품명 포함 여부로 필터링\n    }\n  },\n  \n  // 사용자 동작에 따른 메서드 정의\n  methods: {\n\n    selectProduct(item){\n      this.$emit('select-product', item);\n      this.$emit('close');\n    },\n  },\n  mounted() {\n  console.log('모달에 전달된 prodList:', this.prodList);\n},\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff;\n}\n</style>","<template>\n  <div class=\"container mt-4\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2 class=\"mb-4\">완제품검사성적서</h2>\n        <div class=\"center-button\">\n          <button class=\"btn btn-primary\" @click=\"spmInsStdInsert\" style=\"margin-bottom:-40px;\">성적서 반영</button>\n        </div>\n      </div>\n    <!-- 조회 조건 -->\n    <div class=\"input\">\n       제품검색 <input v-model=\"searchQuery\" class=\"form-control\"  placeholder=\"\" readonly />\n      <button class=\"btn btn-outline-secondary\" id=\"icon-btn\" @click=\"openProductModal\" style=\"margin-right:505px;\">🔍</button>\n      성적서번호 <input :value=\"selectedRsltNo\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      <hr style=\"margin-left:-75px;\">\n\n      라인번호 <input :value=\"selectedLineId\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      제품명 <input :value=\"selectedProductName\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      작성일자 <input :value=\"selectedInsDate\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      검사자 <input :value=\"selectedInsDev\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n    </div>\n    <br>\n    <div class=\"middle\">\n      <!-- 결점구분 -->\n      <div>\n        <table class=\"table table-bordered text-center\" id=\"table\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>결점구분</th>\n              <th>검사량</th>\n              <th>합격량</th>\n              <th>불량량</th>\n            </tr>\n          </thead>\n\n          <!-- 수량 입력칸 -->\n          <tbody>\n            <tr>\n              <td>수량</td>\n              <td><input v-model=\"newItem.mgr_count\" class=\"rslInput\" placeholder=\"검사량\" style=\"background-color: #eee;\" readonly/></td>\n              <td><input v-model=\"newItem.succ_count\" class=\"rslInput\" placeholder=\"합격량\" /></td>\n              <td><input v-model=\"newItem.dft_count\" class=\"rslInput\" placeholder=\"불량량\" /></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- 종합판정 -->\n      <!-- 종합판정 -->\n<div class=\"rst\">\n  <div class=\"hstack gap-3\">\n    <div style=\"padding-left:50px;\">종합판정</div>\n    <div class=\"vr\"></div>\n    <button\n\n      :class=\"['jdg-btn', autoOverallJdg === '합격' ? 'btn-green' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >합격</button>\n    <button\n      :class=\"['jdg-btn', autoOverallJdg === '불합격' ? 'btn-red' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >불합격</button>\n  </div>\n</div>\n    </div>\n    <h5>검사결과</h5>\n    <!-- 테이블 -->\n    <!-- 테이블 헤더 -->\n    <table class=\"table table-bordered text-center \">\n      <thead class=\"table-light\">\n        <tr>\n          <th>검사항목</th>\n          <th>검사기준</th>\n          <th>검사결과</th>\n          <th>판정</th>\n          <th>비고</th>\n        </tr>\n      </thead>\n\n      <!-- 테이블 바디 : 검사결과  -->\n      <tbody>\n        <tr v-for=\"(item, index) in spmInsStdList\" :key=\"item.spm_ins_std_no\">\n          <td>{{ item.ins_itm }}</td>\n    <td>{{ item.ins_mthd }}</td>\n    <td>\n      <input v-model=\"newItemList[index].mgr_rslt\" class=\"form-control\" placeholder=\"검사결과\" />\n    </td>\n    <td>\n      {{ getJdg(item, newItemList[index].mgr_rslt) }}\n    </td>\n    <td>\n      <input v-model=\"newItemList[index].rmk\" class=\"form-control\" placeholder=\"결점원인, 결점코드 등\"/>\n    </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- 제품 검색 모달 -->\n  <PrdSelModal v-if=\"showProductModal\" :prodList=\"prodList\" @select-product=\"handleSelectedProduct\"\n    @close=\"showProductModal = false\" />\n</template>\n\n<script>\nimport axios from 'axios';\nimport useDateUtils from '@/utils/useDates.js' // 날짜 포맷 유틸\nimport PrdSelModal from '@/views/qualitys/PrdRsltSelModal.vue'; // 모달\n\nimport { ref, onBeforeMount } from 'vue';\n\n// 반응형 객체 선언 : 원시타입    \nconst isUpdated = ref(false);\n\nexport default {\n  components: { PrdSelModal },\n  data() {\n    return {\n      searchQuery: '',             // 제품검색\n      selectedLineId: '',          // 라인번호\n      selectedProductName: '',     // 제품명\n      selectedInsDate: this.getToday(),     // 날짜\n       newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      spmInsStdList: [],\n      prodList: [],\n      showProductModal: false,\n      newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      newItemList: [],\n      overallJdg: '',\n      selectedRsltNo: '', // 성적서 번호\n    };\n  },\n  watch: {\n    'newItem.succ_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const succ = Number(val);\n      if (!isNaN(mgr) && !isNaN(succ)) {\n        this.newItem.dft_count = mgr - succ >= 0 ? mgr - succ : '';\n      }\n    },\n    'newItem.dft_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const dft = Number(val);\n      if (!isNaN(mgr) && !isNaN(dft)) {\n        this.newItem.succ_count = mgr - dft >= 0 ? mgr - dft : '';\n      }\n    }\n  },\n  created() {\n    this.selectedInsDev = localStorage.getItem('username') || ''; // 검사자(로그인 사용자)\n  },\n  computed: {\n  autoOverallJdg() {\n    // 모든 판정이 '적합'이면 '합격', 하나라도 '부적합'이면 '불합격'\n    if (!this.spmInsStdList.length) return '';\n    for (let i = 0; i < this.spmInsStdList.length; i++) {\n      const 판정 = this.getJdg(this.spmInsStdList[i], this.newItemList[i]?.mgr_rslt);\n      if (판정 === '부적합') return '불합격';\n    }\n    // 모두 '적합'이면\n    if (this.spmInsStdList.every((item, idx) => this.getJdg(item, this.newItemList[idx]?.mgr_rslt) === '적합')) {\n      return '합격';\n    }\n    return '';\n  }\n},\n  methods: {\n    // 등록\n    async spmInsStdInsert() {\n  if (!this.selectedRsltNo) {\n    alert('성적서 번호가 없습니다.');\n    return;\n  }\n\n  // 1. 성적서(마스터) 저장\n  let obj = {\n    rslt_no: this.selectedRsltNo,\n    mgr: this.selectedInsDev,\n    ins_dt: this.selectedInsDate,\n    mgr_count: this.newItem.mgr_count,\n    succ_count: this.newItem.succ_count,\n    dft_count: this.newItem.dft_count,\n    ovr_jdg: this.getOvrJdgCode(this.autoOverallJdg), // 자동 판정 사용\n    rmk: this.newItem.rmk || '',\n    ln_opr_no: this.selectedLineId,\n    prd_no: this.searchQuery\n  };\n\n  try {\n    let result = await axios.post(\"/api/spmInsRslt\", obj);\n    let addRes = result.data;\n\nif (addRes.isSuccessed) {\n      // 1) 서버에서 마지막 상세번호 조회\n      const res = await axios.get('/api/spmInsRslt/lastDtlNo');\n      let lastNo = Number(res.data.lastNo) || 0;\n\n        // 2) 상세(행별) 저장\n      const dtlList = this.spmInsStdList.map((item, idx) => {\n        lastNo += 1;\n        return {\n          spm_ins_rslt_dtl_no: `YGS-${String(lastNo).padStart(3, '0')}`,\n          mgr_date: this.selectedInsDate,\n          spm_ins_std_no: item.spm_ins_std_no,\n          mgr_rslt: this.newItemList[idx].mgr_rslt,\n          jdg: this.getJdgCode(this.getJdg(item, this.newItemList[idx].mgr_rslt)),\n          dft_qty: 0,\n          rslt_no: this.selectedRsltNo,\n          rmk: this.newItemList[idx].rmk || ''\n      };\n});\n\n       await axios.post(\"/api/spmInsRslt/dtl\", dtlList);\n\n      alert('등록되었습니다.');\n      // 필요시 화면 갱신\n    } else {\n      alert('모든 필드를 확인하세요.');\n    }\n  } catch (err) {\n    alert('등록 중 오류가 발생했습니다.');\n  }\n},\n  parseNumber(str) {\n      // 앞부분의 숫자만 추출 (예: \"200g\" → 200)\n      const match = String(str).match(/^(\\d+(\\.\\d+)?)/);\n      return match ? Number(match[1]) : NaN;\n    },\n  getJdg(item, mgr_rslt) {\n  if (mgr_rslt === '' || mgr_rslt === null || mgr_rslt === undefined) return '';\n\n  const std = this.parseNumber(item.ins_mthd);\n  const tol = this.parseNumber(item.ins_spc);\n  const result = this.parseNumber(mgr_rslt);\n\n  // 값이 모두 숫자일 때만 비교\n  if (!isNaN(std) && !isNaN(tol) && !isNaN(result)) {\n    const min = std - tol;\n    const max = std + tol;\n    return (result >= min && result <= max) ? '적합' : '부적합';\n  }\n\n  // 만약 검사결과가 '적합', '부적합' 등 한글로 들어올 경우\n  if (mgr_rslt === '적합') return '적합';\n  if (mgr_rslt === '부적합') return '부적합';\n\n  // 1/0로 들어올 경우\n  if (mgr_rslt === '1' || mgr_rslt === 1) return '적합';\n  if (mgr_rslt === '0' || mgr_rslt === 0) return '부적합';\n\n  return '';\n},\n\n    getToday() {\n    const today = new Date();\n    // YYYY-MM-DD 형식\n    return today.toISOString().slice(0, 10);\n    },\n    // 날짜 포맷\n    dateFormat(value, format) {\n      return useDateUtils.dateFormat(value, format)\n    },\n\n\n    // 모달\n    showModal() {\n      this.showProductModal = true; // 모달 열기\n    },\n    hideModal() {\n      this.showProductModal = false; // 모달 닫기\n    },\n    openProductModal() {\n      axios.get('/api/spmInsRslt/prdList') // 제품 목록 가져오기\n        .then(res => {\n          console.log('제품목록:', res.data);\n          this.prodList = Array.isArray(res.data) ? res.data : []; // 배열인지 확인 후 설정\n          this.showProductModal = true; // 모달 열기\n        })\n      .catch(err => {\n          console.error('제품 목록 불러오기 실패', err);\n          this.prodList = []; // 실패 시 빈 배열로 설정\n        });\n    },\n\n    // 제품 선택 시\n  async handleSelectedProduct(item) {\n  this.selectedLineId = item.ln_opr_no;\n  this.selectedProductName = item.prd_nm;\n  this.searchQuery = item.prd_no;  \n  this.selectedInsDate = this.getToday();\n\n  this.showProductModal = false;\n\n  // 성적서 번호 자동 할당\n  try {\n    const res = await axios.get('/api/spmInsRslt/lastRsltNo');\n    const lastNo = Number(res.data.lastNo) || 0;\n    const nextNo = String(lastNo + 1).padStart(3, '0');\n    this.selectedRsltNo = `SJS-${nextNo}`;\n  } catch (err) {\n    this.selectedRsltNo = 'SJS-001';\n  }\n\n  await this.getSpmInsStdList(item.prd_no);\n\n   // selectInsCount로 검사량(pdn_qty) 조회\n  try {\n    const res = await axios.get('/api/spmInsRslt/insCount', {\n      params: { ln_opr_no: item.ln_opr_no, prd_no: item.prd_no }\n    });\n    console.log('insCount 응답:', res.data);\n    this.newItem.mgr_count = res.data?.pdn_qty ?? '';\n  } catch (err) {\n    this.newItem.mgr_count = '';\n  }\n},\n    // 기준서 목록 가져오기\n    async getSpmInsStdList(prd_no) {\n  try {\n    const result = await axios.get('/api/spmInsStd', { params: { prd_no } });\n    this.spmInsStdList = result.data;\n    // 행 개수만큼 입력값 배열 초기화 (반응형)\n    this.newItemList = this.spmInsStdList.map(() => ({\n      mgr_rslt: '',\n      rmk: ''\n    }));\n  } catch (err) {\n    alert('기준서 목록을 가져오는 중 오류가 발생했습니다.');\n  }\n},\n  getOvrJdgCode(jdg) {\n    if (jdg === '합격') return 'n1';\n    if (jdg === '불합격') return 'n2';\n    return '';\n  },\n   getJdgCode(jdg) {\n    if (jdg === '적합') return 'o1';\n    if (jdg === '부적합') return 'o2';\n    return '';\n  },\n  }\n}\n\n</script>\n<style>\n.input {\n  border: 1px solid lightgray;\n  padding: 30px;\n  padding-left: 100px;\n}\n\n.form-control {\n  display: inline-block;\n  width: 150px;\n}\n\n.btn {\n  margin: 5px;\n}\n\n.btn1 {\n  float: right;\n}\n\n#table {\n  width:650px;\n  height:130px;\n  margin-right:20px;\n}\n.rslInput{\n  width:100px;\n}\n.middle {\n  display: flex;\n}\n.rst{\n  width:650px;\n  height:130px;\n  border: 1px solid lightgray;\n  padding: 10px;\n}\n.jdg-btn.btn-green {\n  background-color: #4caf50 !important;\n  color: #fff !important;\n}\n.jdg-btn.btn-red {\n  background-color: #e53935 !important;\n  color: #fff !important;\n}\n</style>"],"names":["_sfc_main","p","_a","item","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","$event","$data","_openBlock","_Fragment","_renderList","$options","_toDisplayString","ref","PrdSelModal","val","mgr","succ","dft","i","idx","obj","axios","res","lastNo","dtlList","str","match","mgr_rslt","std","tol","result","min","max","value","format","useDateUtils","err","nextNo","prd_no","jdg","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","args","_createTextVNode","_hoisted_11","_vModelText","_normalizeClass","index","_createBlock","_component_PrdSelModal","_createCommentVNode"],"mappings":"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"}
========
{"version":3,"file":"spmInsRslt-DVnLpjNu.js","sources":["../../../client/src/views/qualitys/PrdRsltSelModal.vue","../../../client/src/views/qualitys/spmInsRslt.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade show d-block\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">제품 선택</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <input\n              type=\"text\"\n              class=\"form-control w-25\"\n              placeholder=\"제품명 검색\"\n              v-model=\"search\"\n              id=\"searchProduct\"\n            />\n          </div>\n\n          <table class=\"table table-sm table-bordered text-center\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>제품명</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n              v-for=\"item in filteredProducts\"\n              :key=\"item.ln_opr_no + '-' + item.prd_nm\"\n              @click=\"selectProduct(item)\" \n              style=\"cursor: pointer;\">\n              <td>{{ item.ln_opr_no }} </td>\n              <td>{{ item.prd_nm }}</td>              \n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 부모로부터 전달받는 props (속성값)\n  props: {\n    prodList: {\n    type: Array,\n    default: () => []\n  }\n},\n  // 컴포넌트 내부에서 사용하는 데이터 정의\n  data() {\n    return {\n      search: '',         // 검색어 입력값\n      // selectedProd: []    // 사용자가 선택한 제품 목록 (체크 상태 유지)\n    };\n  },\n\n  // 계산된 속성 (화면에 반응형으로 자동 갱신됨)\n  computed: {\n    // 검색어를 기준으로 prodList를 필터링한 결과 반환\n    filteredProducts() {\n      if (!this.prodList) return []  // prodList가 없으면 빈 배열 반환\n      return this.prodList.filter(p => p.prd_nm?.includes(this.search))  // 제품명 포함 여부로 필터링\n    }\n  },\n  \n  // 사용자 동작에 따른 메서드 정의\n  methods: {\n\n    selectProduct(item){\n      this.$emit('select-product', item);\n      this.$emit('close');\n    },\n  },\n  mounted() {\n  console.log('모달에 전달된 prodList:', this.prodList);\n},\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff;\n}\n</style>","<template>\n  <div class=\"container mt-4\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2 class=\"mb-4\">완제품검사성적서</h2>\n        <div class=\"center-button\">\n          <button class=\"btn btn-primary\" @click=\"spmInsStdInsert\" style=\"margin-bottom:-40px;\">성적서 반영</button>\n        </div>\n      </div>\n    <!-- 조회 조건 -->\n    <div class=\"input\">\n       제품검색 <input v-model=\"searchQuery\" class=\"form-control\"  placeholder=\"\" readonly />\n      <button class=\"btn btn-outline-secondary\" id=\"icon-btn\" @click=\"openProductModal\" style=\"margin-right:505px;\">🔍</button>\n      성적서번호 <input :value=\"selectedRsltNo\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      <hr style=\"margin-left:-75px;\">\n\n      라인번호 <input :value=\"selectedLineId\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      제품명 <input :value=\"selectedProductName\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      작성일자 <input :value=\"selectedInsDate\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      검사자 <input :value=\"selectedInsDev\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n    </div>\n    <br>\n    <div class=\"middle\">\n      <!-- 결점구분 -->\n      <div>\n        <table class=\"table table-bordered text-center\" id=\"table\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>결점구분</th>\n              <th>검사량</th>\n              <th>합격량</th>\n              <th>불량량</th>\n            </tr>\n          </thead>\n\n          <!-- 수량 입력칸 -->\n          <tbody>\n            <tr>\n              <td>수량</td>\n              <td><input v-model=\"newItem.mgr_count\" class=\"rslInput\" placeholder=\"검사량\" style=\"background-color: #eee;\" readonly/></td>\n              <td><input v-model=\"newItem.succ_count\" class=\"rslInput\" placeholder=\"합격량\" /></td>\n              <td><input v-model=\"newItem.dft_count\" class=\"rslInput\" placeholder=\"불량량\" /></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- 종합판정 -->\n      <!-- 종합판정 -->\n<div class=\"rst\">\n  <div class=\"hstack gap-3\">\n    <div style=\"padding-left:50px;\">종합판정</div>\n    <div class=\"vr\"></div>\n    <button\n\n      :class=\"['jdg-btn', autoOverallJdg === '합격' ? 'btn-green' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >합격</button>\n    <button\n      :class=\"['jdg-btn', autoOverallJdg === '불합격' ? 'btn-red' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >불합격</button>\n  </div>\n</div>\n    </div>\n    <h5>검사결과</h5>\n    <!-- 테이블 -->\n    <!-- 테이블 헤더 -->\n    <table class=\"table table-bordered text-center \">\n      <thead class=\"table-light\">\n        <tr>\n          <th>검사항목</th>\n          <th>검사기준</th>\n          <th>검사결과</th>\n          <th>판정</th>\n          <th>비고</th>\n        </tr>\n      </thead>\n\n      <!-- 테이블 바디 : 검사결과  -->\n      <tbody>\n        <tr v-for=\"(item, index) in spmInsStdList\" :key=\"item.spm_ins_std_no\">\n          <td>{{ item.ins_itm }}</td>\n    <td>{{ item.ins_mthd }}</td>\n    <td>\n      <input v-model=\"newItemList[index].mgr_rslt\" class=\"form-control\" placeholder=\"검사결과\" />\n    </td>\n    <td>\n      {{ getJdg(item, newItemList[index].mgr_rslt) }}\n    </td>\n    <td>\n      <input v-model=\"newItemList[index].rmk\" class=\"form-control\" placeholder=\"결점원인, 결점코드 등\"/>\n    </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- 제품 검색 모달 -->\n  <PrdSelModal v-if=\"showProductModal\" :prodList=\"prodList\" @select-product=\"handleSelectedProduct\"\n    @close=\"showProductModal = false\" />\n</template>\n\n<script>\nimport axios from 'axios';\nimport useDateUtils from '@/utils/useDates.js' // 날짜 포맷 유틸\nimport PrdSelModal from '@/views/qualitys/PrdRsltSelModal.vue'; // 모달\n\nimport { ref, onBeforeMount } from 'vue';\n\n// 반응형 객체 선언 : 원시타입    \nconst isUpdated = ref(false);\n\nexport default {\n  components: { PrdSelModal },\n  data() {\n    return {\n      searchQuery: '',             // 제품검색\n      selectedLineId: '',          // 라인번호\n      selectedProductName: '',     // 제품명\n      selectedInsDate: this.getToday(),     // 날짜\n       newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      spmInsStdList: [],\n      prodList: [],\n      showProductModal: false,\n      newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      newItemList: [],\n      overallJdg: '',\n      selectedRsltNo: '', // 성적서 번호\n    };\n  },\n  watch: {\n    'newItem.succ_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const succ = Number(val);\n      if (!isNaN(mgr) && !isNaN(succ)) {\n        this.newItem.dft_count = mgr - succ >= 0 ? mgr - succ : '';\n      }\n    },\n    'newItem.dft_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const dft = Number(val);\n      if (!isNaN(mgr) && !isNaN(dft)) {\n        this.newItem.succ_count = mgr - dft >= 0 ? mgr - dft : '';\n      }\n    }\n  },\n  created() {\n    this.selectedInsDev = localStorage.getItem('username') || ''; // 검사자(로그인 사용자)\n  },\n  computed: {\n  autoOverallJdg() {\n    // 모든 판정이 '적합'이면 '합격', 하나라도 '부적합'이면 '불합격'\n    if (!this.spmInsStdList.length) return '';\n    for (let i = 0; i < this.spmInsStdList.length; i++) {\n      const 판정 = this.getJdg(this.spmInsStdList[i], this.newItemList[i]?.mgr_rslt);\n      if (판정 === '부적합') return '불합격';\n    }\n    // 모두 '적합'이면\n    if (this.spmInsStdList.every((item, idx) => this.getJdg(item, this.newItemList[idx]?.mgr_rslt) === '적합')) {\n      return '합격';\n    }\n    return '';\n  }\n},\n  methods: {\n    // 등록\n    async spmInsStdInsert() {\n  if (!this.selectedRsltNo) {\n    alert('성적서 번호가 없습니다.');\n    return;\n  }\n\n  // 1. 성적서(마스터) 저장\n  let obj = {\n    rslt_no: this.selectedRsltNo,\n    mgr: this.selectedInsDev,\n    ins_dt: this.selectedInsDate,\n    mgr_count: this.newItem.mgr_count,\n    succ_count: this.newItem.succ_count,\n    dft_count: this.newItem.dft_count,\n    ovr_jdg: this.getOvrJdgCode(this.autoOverallJdg), // 자동 판정 사용\n    rmk: this.newItem.rmk || '',\n    ln_opr_no: this.selectedLineId,\n    prd_no: this.searchQuery\n  };\n\n  try {\n    let result = await axios.post(\"/api/spmInsRslt\", obj);\n    let addRes = result.data;\n\nif (addRes.isSuccessed) {\n      // 1) 서버에서 마지막 상세번호 조회\n      const res = await axios.get('/api/spmInsRslt/lastDtlNo');\n      let lastNo = Number(res.data.lastNo) || 0;\n\n        // 2) 상세(행별) 저장\n      const dtlList = this.spmInsStdList.map((item, idx) => {\n        lastNo += 1;\n        return {\n          spm_ins_rslt_dtl_no: `YGS-${String(lastNo).padStart(3, '0')}`,\n          mgr_date: this.selectedInsDate,\n          spm_ins_std_no: item.spm_ins_std_no,\n          mgr_rslt: this.newItemList[idx].mgr_rslt,\n          jdg: this.getJdgCode(this.getJdg(item, this.newItemList[idx].mgr_rslt)),\n          dft_qty: 0,\n          rslt_no: this.selectedRsltNo,\n          rmk: this.newItemList[idx].rmk || ''\n      };\n});\n\n       await axios.post(\"/api/spmInsRslt/dtl\", dtlList);\n\n      alert('등록되었습니다.');\n      // 필요시 화면 갱신\n    } else {\n      alert('모든 필드를 확인하세요.');\n    }\n  } catch (err) {\n    alert('등록 중 오류가 발생했습니다.');\n  }\n},\n  parseNumber(str) {\n      // 앞부분의 숫자만 추출 (예: \"200g\" → 200)\n      const match = String(str).match(/^(\\d+(\\.\\d+)?)/);\n      return match ? Number(match[1]) : NaN;\n    },\n  getJdg(item, mgr_rslt) {\n  if (mgr_rslt === '' || mgr_rslt === null || mgr_rslt === undefined) return '';\n\n  const std = this.parseNumber(item.ins_mthd);\n  const tol = this.parseNumber(item.ins_spc);\n  const result = this.parseNumber(mgr_rslt);\n\n  // 값이 모두 숫자일 때만 비교\n  if (!isNaN(std) && !isNaN(tol) && !isNaN(result)) {\n    const min = std - tol;\n    const max = std + tol;\n    return (result >= min && result <= max) ? '적합' : '부적합';\n  }\n\n  // 만약 검사결과가 '적합', '부적합' 등 한글로 들어올 경우\n  if (mgr_rslt === '적합') return '적합';\n  if (mgr_rslt === '부적합') return '부적합';\n\n  // 1/0로 들어올 경우\n  if (mgr_rslt === '1' || mgr_rslt === 1) return '적합';\n  if (mgr_rslt === '0' || mgr_rslt === 0) return '부적합';\n\n  return '';\n},\n\n    getToday() {\n    const today = new Date();\n    // YYYY-MM-DD 형식\n    return today.toISOString().slice(0, 10);\n    },\n    // 날짜 포맷\n    dateFormat(value, format) {\n      return useDateUtils.dateFormat(value, format)\n    },\n\n\n    // 모달\n    showModal() {\n      this.showProductModal = true; // 모달 열기\n    },\n    hideModal() {\n      this.showProductModal = false; // 모달 닫기\n    },\n    openProductModal() {\n      axios.get('/api/spmInsRslt/prdList') // 제품 목록 가져오기\n        .then(res => {\n          console.log('제품목록:', res.data);\n          this.prodList = Array.isArray(res.data) ? res.data : []; // 배열인지 확인 후 설정\n          this.showProductModal = true; // 모달 열기\n        })\n      .catch(err => {\n          console.error('제품 목록 불러오기 실패', err);\n          this.prodList = []; // 실패 시 빈 배열로 설정\n        });\n    },\n\n    // 제품 선택 시\n  async handleSelectedProduct(item) {\n  this.selectedLineId = item.ln_opr_no;\n  this.selectedProductName = item.prd_nm;\n  this.searchQuery = item.prd_no;  \n  this.selectedInsDate = this.getToday();\n\n  this.showProductModal = false;\n\n  // 성적서 번호 자동 할당\n  try {\n    const res = await axios.get('/api/spmInsRslt/lastRsltNo');\n    const lastNo = Number(res.data.lastNo) || 0;\n    const nextNo = String(lastNo + 1).padStart(3, '0');\n    this.selectedRsltNo = `SJS-${nextNo}`;\n  } catch (err) {\n    this.selectedRsltNo = 'SJS-001';\n  }\n\n  await this.getSpmInsStdList(item.prd_no);\n\n   // selectInsCount로 검사량(pdn_qty) 조회\n  try {\n    const res = await axios.get('/api/spmInsRslt/insCount', {\n      params: { ln_opr_no: item.ln_opr_no, prd_no: item.prd_no }\n    });\n    console.log('insCount 응답:', res.data);\n    this.newItem.mgr_count = res.data?.pdn_qty ?? '';\n  } catch (err) {\n    this.newItem.mgr_count = '';\n  }\n},\n    // 기준서 목록 가져오기\n    async getSpmInsStdList(prd_no) {\n  try {\n    const result = await axios.get('/api/spmInsStd', { params: { prd_no } });\n    this.spmInsStdList = result.data;\n    // 행 개수만큼 입력값 배열 초기화 (반응형)\n    this.newItemList = this.spmInsStdList.map(() => ({\n      mgr_rslt: '',\n      rmk: ''\n    }));\n  } catch (err) {\n    alert('기준서 목록을 가져오는 중 오류가 발생했습니다.');\n  }\n},\n  getOvrJdgCode(jdg) {\n    if (jdg === '합격') return 'n1';\n    if (jdg === '불합격') return 'n2';\n    return '';\n  },\n   getJdgCode(jdg) {\n    if (jdg === '적합') return 'o1';\n    if (jdg === '부적합') return 'o2';\n    return '';\n  },\n  }\n}\n\n</script>\n<style>\n.input {\n  border: 1px solid lightgray;\n  padding: 30px;\n  padding-left: 100px;\n}\n\n.form-control {\n  display: inline-block;\n  width: 150px;\n}\n\n.btn {\n  margin: 5px;\n}\n\n.btn1 {\n  float: right;\n}\n\n#table {\n  width:650px;\n  height:130px;\n  margin-right:20px;\n}\n.rslInput{\n  width:100px;\n}\n.middle {\n  display: flex;\n}\n.rst{\n  width:650px;\n  height:130px;\n  border: 1px solid lightgray;\n  padding: 10px;\n}\n.jdg-btn.btn-green {\n  background-color: #4caf50 !important;\n  color: #fff !important;\n}\n.jdg-btn.btn-red {\n  background-color: #e53935 !important;\n  color: #fff !important;\n}\n</style>"],"names":["_sfc_main","p","_a","item","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","$event","$data","_openBlock","_Fragment","_renderList","$options","_toDisplayString","ref","PrdSelModal","val","mgr","succ","dft","i","idx","obj","axios","res","lastNo","dtlList","str","match","mgr_rslt","std","tol","result","min","max","value","format","useDateUtils","err","nextNo","prd_no","jdg","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","args","_createTextVNode","_hoisted_11","_vModelText","_normalizeClass","index","_createBlock","_component_PrdSelModal","_createCommentVNode"],"mappings":"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"}
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/spmInsRslt-DVnLpjNu.js.map
=======
{"version":3,"file":"spmInsRslt-DVnLpjNu.js","sources":["../../../client/src/views/qualitys/PrdRsltSelModal.vue","../../../client/src/views/qualitys/spmInsRslt.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade show d-block\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">제품 선택</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <input\n              type=\"text\"\n              class=\"form-control w-25\"\n              placeholder=\"제품명 검색\"\n              v-model=\"search\"\n              id=\"searchProduct\"\n            />\n          </div>\n\n          <table class=\"table table-sm table-bordered text-center\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>제품명</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n              v-for=\"item in filteredProducts\"\n              :key=\"item.ln_opr_no + '-' + item.prd_nm\"\n              @click=\"selectProduct(item)\" \n              style=\"cursor: pointer;\">\n              <td>{{ item.ln_opr_no }} </td>\n              <td>{{ item.prd_nm }}</td>              \n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 부모로부터 전달받는 props (속성값)\n  props: {\n    prodList: {\n    type: Array,\n    default: () => []\n  }\n},\n  // 컴포넌트 내부에서 사용하는 데이터 정의\n  data() {\n    return {\n      search: '',         // 검색어 입력값\n      // selectedProd: []    // 사용자가 선택한 제품 목록 (체크 상태 유지)\n    };\n  },\n\n  // 계산된 속성 (화면에 반응형으로 자동 갱신됨)\n  computed: {\n    // 검색어를 기준으로 prodList를 필터링한 결과 반환\n    filteredProducts() {\n      if (!this.prodList) return []  // prodList가 없으면 빈 배열 반환\n      return this.prodList.filter(p => p.prd_nm?.includes(this.search))  // 제품명 포함 여부로 필터링\n    }\n  },\n  \n  // 사용자 동작에 따른 메서드 정의\n  methods: {\n\n    selectProduct(item){\n      this.$emit('select-product', item);\n      this.$emit('close');\n    },\n  },\n  mounted() {\n  console.log('모달에 전달된 prodList:', this.prodList);\n},\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff;\n}\n</style>","<template>\n  <div class=\"container mt-4\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2 class=\"mb-4\">완제품검사성적서</h2>\n        <div class=\"center-button\">\n          <button class=\"btn btn-primary\" @click=\"spmInsStdInsert\" style=\"margin-bottom:-40px;\">성적서 반영</button>\n        </div>\n      </div>\n    <!-- 조회 조건 -->\n    <div class=\"input\">\n       제품검색 <input v-model=\"searchQuery\" class=\"form-control\"  placeholder=\"\" readonly />\n      <button class=\"btn btn-outline-secondary\" id=\"icon-btn\" @click=\"openProductModal\" style=\"margin-right:505px;\">🔍</button>\n      성적서번호 <input :value=\"selectedRsltNo\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      <hr style=\"margin-left:-75px;\">\n\n      라인번호 <input :value=\"selectedLineId\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      제품명 <input :value=\"selectedProductName\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      작성일자 <input :value=\"selectedInsDate\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n      검사자 <input :value=\"selectedInsDev\" class=\"form-control\" readonly style=\"background-color: #eee; margin-right:52px;\" />\n    </div>\n    <br>\n    <div class=\"middle\">\n      <!-- 결점구분 -->\n      <div>\n        <table class=\"table table-bordered text-center\" id=\"table\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>결점구분</th>\n              <th>검사량</th>\n              <th>합격량</th>\n              <th>불량량</th>\n            </tr>\n          </thead>\n\n          <!-- 수량 입력칸 -->\n          <tbody>\n            <tr>\n              <td>수량</td>\n              <td><input v-model=\"newItem.mgr_count\" class=\"rslInput\" placeholder=\"검사량\" style=\"background-color: #eee;\" readonly/></td>\n              <td><input v-model=\"newItem.succ_count\" class=\"rslInput\" placeholder=\"합격량\" /></td>\n              <td><input v-model=\"newItem.dft_count\" class=\"rslInput\" placeholder=\"불량량\" /></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- 종합판정 -->\n      <!-- 종합판정 -->\n<div class=\"rst\">\n  <div class=\"hstack gap-3\">\n    <div style=\"padding-left:50px;\">종합판정</div>\n    <div class=\"vr\"></div>\n    <button\n\n      :class=\"['jdg-btn', autoOverallJdg === '합격' ? 'btn-green' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >합격</button>\n    <button\n      :class=\"['jdg-btn', autoOverallJdg === '불합격' ? 'btn-red' : '']\"\n      style=\"width:150px; height:100px; border-radius: 5px; border-color:lightgray;\"\n    >불합격</button>\n  </div>\n</div>\n    </div>\n    <h5>검사결과</h5>\n    <!-- 테이블 -->\n    <!-- 테이블 헤더 -->\n    <table class=\"table table-bordered text-center \">\n      <thead class=\"table-light\">\n        <tr>\n          <th>검사항목</th>\n          <th>검사기준</th>\n          <th>검사결과</th>\n          <th>판정</th>\n          <th>비고</th>\n        </tr>\n      </thead>\n\n      <!-- 테이블 바디 : 검사결과  -->\n      <tbody>\n        <tr v-for=\"(item, index) in spmInsStdList\" :key=\"item.spm_ins_std_no\">\n          <td>{{ item.ins_itm }}</td>\n    <td>{{ item.ins_mthd }}</td>\n    <td>\n      <input v-model=\"newItemList[index].mgr_rslt\" class=\"form-control\" placeholder=\"검사결과\" />\n    </td>\n    <td>\n      {{ getJdg(item, newItemList[index].mgr_rslt) }}\n    </td>\n    <td>\n      <input v-model=\"newItemList[index].rmk\" class=\"form-control\" placeholder=\"결점원인, 결점코드 등\"/>\n    </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- 제품 검색 모달 -->\n  <PrdSelModal v-if=\"showProductModal\" :prodList=\"prodList\" @select-product=\"handleSelectedProduct\"\n    @close=\"showProductModal = false\" />\n</template>\n\n<script>\nimport axios from 'axios';\nimport useDateUtils from '@/utils/useDates.js' // 날짜 포맷 유틸\nimport PrdSelModal from '@/views/qualitys/PrdRsltSelModal.vue'; // 모달\n\nimport { ref, onBeforeMount } from 'vue';\n\n// 반응형 객체 선언 : 원시타입    \nconst isUpdated = ref(false);\n\nexport default {\n  components: { PrdSelModal },\n  data() {\n    return {\n      searchQuery: '',             // 제품검색\n      selectedLineId: '',          // 라인번호\n      selectedProductName: '',     // 제품명\n      selectedInsDate: this.getToday(),     // 날짜\n       newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      spmInsStdList: [],\n      prodList: [],\n      showProductModal: false,\n      newItem: {\n        mgr_count: '',   // 검사량\n        succ_count: '',  // 합격량\n        dft_count: '',   // 불량량\n        rmk: ''\n      },\n      newItemList: [],\n      overallJdg: '',\n      selectedRsltNo: '', // 성적서 번호\n    };\n  },\n  watch: {\n    'newItem.succ_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const succ = Number(val);\n      if (!isNaN(mgr) && !isNaN(succ)) {\n        this.newItem.dft_count = mgr - succ >= 0 ? mgr - succ : '';\n      }\n    },\n    'newItem.dft_count'(val) {\n      const mgr = Number(this.newItem.mgr_count);\n      const dft = Number(val);\n      if (!isNaN(mgr) && !isNaN(dft)) {\n        this.newItem.succ_count = mgr - dft >= 0 ? mgr - dft : '';\n      }\n    }\n  },\n  created() {\n    this.selectedInsDev = localStorage.getItem('username') || ''; // 검사자(로그인 사용자)\n  },\n  computed: {\n  autoOverallJdg() {\n    // 모든 판정이 '적합'이면 '합격', 하나라도 '부적합'이면 '불합격'\n    if (!this.spmInsStdList.length) return '';\n    for (let i = 0; i < this.spmInsStdList.length; i++) {\n      const 판정 = this.getJdg(this.spmInsStdList[i], this.newItemList[i]?.mgr_rslt);\n      if (판정 === '부적합') return '불합격';\n    }\n    // 모두 '적합'이면\n    if (this.spmInsStdList.every((item, idx) => this.getJdg(item, this.newItemList[idx]?.mgr_rslt) === '적합')) {\n      return '합격';\n    }\n    return '';\n  }\n},\n  methods: {\n    // 등록\n    async spmInsStdInsert() {\n  if (!this.selectedRsltNo) {\n    alert('성적서 번호가 없습니다.');\n    return;\n  }\n\n  // 1. 성적서(마스터) 저장\n  let obj = {\n    rslt_no: this.selectedRsltNo,\n    mgr: this.selectedInsDev,\n    ins_dt: this.selectedInsDate,\n    mgr_count: this.newItem.mgr_count,\n    succ_count: this.newItem.succ_count,\n    dft_count: this.newItem.dft_count,\n    ovr_jdg: this.getOvrJdgCode(this.autoOverallJdg), // 자동 판정 사용\n    rmk: this.newItem.rmk || '',\n    ln_opr_no: this.selectedLineId,\n    prd_no: this.searchQuery\n  };\n\n  try {\n    let result = await axios.post(\"/api/spmInsRslt\", obj);\n    let addRes = result.data;\n\nif (addRes.isSuccessed) {\n      // 1) 서버에서 마지막 상세번호 조회\n      const res = await axios.get('/api/spmInsRslt/lastDtlNo');\n      let lastNo = Number(res.data.lastNo) || 0;\n\n        // 2) 상세(행별) 저장\n      const dtlList = this.spmInsStdList.map((item, idx) => {\n        lastNo += 1;\n        return {\n          spm_ins_rslt_dtl_no: `YGS-${String(lastNo).padStart(3, '0')}`,\n          mgr_date: this.selectedInsDate,\n          spm_ins_std_no: item.spm_ins_std_no,\n          mgr_rslt: this.newItemList[idx].mgr_rslt,\n          jdg: this.getJdgCode(this.getJdg(item, this.newItemList[idx].mgr_rslt)),\n          dft_qty: 0,\n          rslt_no: this.selectedRsltNo,\n          rmk: this.newItemList[idx].rmk || ''\n      };\n});\n\n       await axios.post(\"/api/spmInsRslt/dtl\", dtlList);\n\n      alert('등록되었습니다.');\n      // 필요시 화면 갱신\n    } else {\n      alert('모든 필드를 확인하세요.');\n    }\n  } catch (err) {\n    alert('등록 중 오류가 발생했습니다.');\n  }\n},\n  parseNumber(str) {\n      // 앞부분의 숫자만 추출 (예: \"200g\" → 200)\n      const match = String(str).match(/^(\\d+(\\.\\d+)?)/);\n      return match ? Number(match[1]) : NaN;\n    },\n  getJdg(item, mgr_rslt) {\n  if (mgr_rslt === '' || mgr_rslt === null || mgr_rslt === undefined) return '';\n\n  const std = this.parseNumber(item.ins_mthd);\n  const tol = this.parseNumber(item.ins_spc);\n  const result = this.parseNumber(mgr_rslt);\n\n  // 값이 모두 숫자일 때만 비교\n  if (!isNaN(std) && !isNaN(tol) && !isNaN(result)) {\n    const min = std - tol;\n    const max = std + tol;\n    return (result >= min && result <= max) ? '적합' : '부적합';\n  }\n\n  // 만약 검사결과가 '적합', '부적합' 등 한글로 들어올 경우\n  if (mgr_rslt === '적합') return '적합';\n  if (mgr_rslt === '부적합') return '부적합';\n\n  // 1/0로 들어올 경우\n  if (mgr_rslt === '1' || mgr_rslt === 1) return '적합';\n  if (mgr_rslt === '0' || mgr_rslt === 0) return '부적합';\n\n  return '';\n},\n\n    getToday() {\n    const today = new Date();\n    // YYYY-MM-DD 형식\n    return today.toISOString().slice(0, 10);\n    },\n    // 날짜 포맷\n    dateFormat(value, format) {\n      return useDateUtils.dateFormat(value, format)\n    },\n\n\n    // 모달\n    showModal() {\n      this.showProductModal = true; // 모달 열기\n    },\n    hideModal() {\n      this.showProductModal = false; // 모달 닫기\n    },\n    openProductModal() {\n      axios.get('/api/spmInsRslt/prdList') // 제품 목록 가져오기\n        .then(res => {\n          console.log('제품목록:', res.data);\n          this.prodList = Array.isArray(res.data) ? res.data : []; // 배열인지 확인 후 설정\n          this.showProductModal = true; // 모달 열기\n        })\n      .catch(err => {\n          console.error('제품 목록 불러오기 실패', err);\n          this.prodList = []; // 실패 시 빈 배열로 설정\n        });\n    },\n\n    // 제품 선택 시\n  async handleSelectedProduct(item) {\n  this.selectedLineId = item.ln_opr_no;\n  this.selectedProductName = item.prd_nm;\n  this.searchQuery = item.prd_no;  \n  this.selectedInsDate = this.getToday();\n\n  this.showProductModal = false;\n\n  // 성적서 번호 자동 할당\n  try {\n    const res = await axios.get('/api/spmInsRslt/lastRsltNo');\n    const lastNo = Number(res.data.lastNo) || 0;\n    const nextNo = String(lastNo + 1).padStart(3, '0');\n    this.selectedRsltNo = `SJS-${nextNo}`;\n  } catch (err) {\n    this.selectedRsltNo = 'SJS-001';\n  }\n\n  await this.getSpmInsStdList(item.prd_no);\n\n   // selectInsCount로 검사량(pdn_qty) 조회\n  try {\n    const res = await axios.get('/api/spmInsRslt/insCount', {\n      params: { ln_opr_no: item.ln_opr_no, prd_no: item.prd_no }\n    });\n    console.log('insCount 응답:', res.data);\n    this.newItem.mgr_count = res.data?.pdn_qty ?? '';\n  } catch (err) {\n    this.newItem.mgr_count = '';\n  }\n},\n    // 기준서 목록 가져오기\n    async getSpmInsStdList(prd_no) {\n  try {\n    const result = await axios.get('/api/spmInsStd', { params: { prd_no } });\n    this.spmInsStdList = result.data;\n    // 행 개수만큼 입력값 배열 초기화 (반응형)\n    this.newItemList = this.spmInsStdList.map(() => ({\n      mgr_rslt: '',\n      rmk: ''\n    }));\n  } catch (err) {\n    alert('기준서 목록을 가져오는 중 오류가 발생했습니다.');\n  }\n},\n  getOvrJdgCode(jdg) {\n    if (jdg === '합격') return 'n1';\n    if (jdg === '불합격') return 'n2';\n    return '';\n  },\n   getJdgCode(jdg) {\n    if (jdg === '적합') return 'o1';\n    if (jdg === '부적합') return 'o2';\n    return '';\n  },\n  }\n}\n\n</script>\n<style>\n.input {\n  border: 1px solid lightgray;\n  padding: 30px;\n  padding-left: 100px;\n}\n\n.form-control {\n  display: inline-block;\n  width: 150px;\n}\n\n.btn {\n  margin: 5px;\n}\n\n.btn1 {\n  float: right;\n}\n\n#table {\n  width:650px;\n  height:130px;\n  margin-right:20px;\n}\n.rslInput{\n  width:100px;\n}\n.middle {\n  display: flex;\n}\n.rst{\n  width:650px;\n  height:130px;\n  border: 1px solid lightgray;\n  padding: 10px;\n}\n.jdg-btn.btn-green {\n  background-color: #4caf50 !important;\n  color: #fff !important;\n}\n.jdg-btn.btn-red {\n  background-color: #e53935 !important;\n  color: #fff !important;\n}\n</style>"],"names":["_sfc_main","p","_a","item","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","$event","$data","_openBlock","_Fragment","_renderList","$options","_toDisplayString","ref","PrdSelModal","val","mgr","succ","dft","i","idx","obj","axios","res","lastNo","dtlList","str","match","mgr_rslt","std","tol","result","min","max","value","format","useDateUtils","err","nextNo","prd_no","jdg","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","args","_createTextVNode","_hoisted_11","_vModelText","_normalizeClass","index","_createBlock","_component_PrdSelModal","_createCommentVNode"],"mappings":"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"}
>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b
>>>>>>> origin/Eunae
