<<<<<<<< HEAD:server/public/assets/spmInst-CqcFGb6h.js
import{_ as h,c as d,a as l,w as r,v as i,F as y,r as b,e as p,o as n,j as v,T as f,t as a}from"./index-CxFk6QSJ.js";import{v as k}from"./vdrSelectModal-bPKNTNvE.js";const V={name:"SpmInst",components:{vdrSelectModal:k},data(){return{mode:"basic",spmDate:"",ordNo:0,vdr:[],selectVdr:{},selectCpyNm:{},showVdrModal:!1,deliver:"",qty:0,unitPrc:0,prdNo:"",ords:[],checkOrd:[],lotQty:0,memo:""}},async created(){const e=await p.get("/api/vdrList"),t=await p.get("/api/ord");this.ords=t.data,console.log(this.ords),this.vdr=e.data},computed:{selectedOrder(){return this.checkOrd.length>0?this.checkOrd[0]:null}},methods:{handleVdrSelect(e){this.selectVdr=e,this.showVdrModal=!1},async saveSpm(){const e={ord_no:this.ordNo,dlv_addr:this.deliver,spm_dt:this.spmDate,vdr_no:this.selectVdr},t={lot_no:this.checkOrd[0].lot_no,prd_no:this.checkOrd[0].prd_no,lot_qty:this.lotQty,memo:this.memo};if(this.checkOrd[0].요청수량>this.checkOrd[0].lot수량){alert("출하할수 없습니다");return}try{await p.post("/api/addSpm",e),console.log("초기화전",this.selectVdr),this.selectVdr=null,alert("수주 저장 완료!"),console.log("초기화후",this.selectVdr),await p.post("/api/updateLot",t)}catch(u){console.error("저장 실패:",u),alert("에러발생"),console.log("payLoad",e)}},handleCheckChange(){if(this.checkOrd.length===1){const e=this.checkOrd[0];this.mode="checked",this.ordNo=e.ord_no,this.selectVdr=e.vdr_no,this.selectCpyNm=e.cpy_nm,this.lotQty=e.요청수량,this.deliver=e.ofc_addr}else{this.mode="basic",alert("하나의 수주만 선택하세요");return}}}},g={class:"col-md-10 p-4"},_={class:"row mb-3 g-3"},x={class:"col-md-3"},C={class:"col-md-3"},N={key:0,class:"col-md-3"},O={key:1,class:"col-md-3"},w={class:"col-md-3"},D={class:"col-md-3"},S={class:"col-md-3"},U={class:"table table-bordered text-center mt-4"},I=["value"],M={key:0},L={key:1},B={key:2},Q={key:3},j={class:"d-flex justify-content-end mt-3"};function q(e,t,u,F,o,m){return n(),d("div",g,[t[21]||(t[21]=l("h4",{class:"mb-4"},"출하지시",-1)),l("div",_,[l("div",x,[t[10]||(t[10]=l("label",{class:"form-label"},"출하일자",-1)),r(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.spmDate=s),type:"date",class:"form-control"},null,512),[[i,o.spmDate]])]),t[17]||(t[17]=l("div",{class:"col-md-3"},[l("label",{class:"form-label"},"담당자"),l("input",{type:"text",class:"form-control"})],-1)),l("div",C,[t[11]||(t[11]=l("label",{class:"form-label"},"거래처",-1)),r(l("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.selectCpyNm.cpy_nm=s),type:"text",class:"form-control",readonly:""},null,512),[[i,o.selectCpyNm.cpy_nm]])]),o.selectVdr.vdr_no>0?(n(),d("div",N,[t[12]||(t[12]=l("label",{class:"form-label"},"거래처코드",-1)),r(l("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.selectVdr.vdr_no=s),type:"number",class:"form-control",readonly:""},null,512),[[i,o.selectVdr.vdr_no]])])):(n(),d("div",O,[t[13]||(t[13]=l("label",{class:"form-label"},"거래처코드",-1)),r(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.selectVdr=s),type:"number",class:"form-control",readonly:""},null,512),[[i,o.selectVdr]])])),l("div",w,[t[14]||(t[14]=l("label",{class:"form-label"},"수주번호",-1)),r(l("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.ordNo=s),type:"number",class:"form-control"},null,512),[[i,o.ordNo]])]),l("div",D,[t[15]||(t[15]=l("label",{class:"form-label"},"배송지",-1)),r(l("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.deliver=s),type:"text",class:"form-control"},null,512),[[i,o.deliver]])]),l("div",S,[t[16]||(t[16]=l("label",{class:"form-label"},"비고",-1)),r(l("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.memo=s),type:"text",class:"form-control"},null,512),[[i,o.memo]])])]),l("table",U,[t[20]||(t[20]=l("thead",{class:"table-light"},[l("tr",null,[l("th",null,[l("input",{type:"checkbox"})]),l("th",null,"주문ID"),l("th",null,"거래처ID"),l("th",null,"거래처명"),l("th",null,"제품ID"),l("th",null,"제품명"),l("th",null,"요청수량"),l("th",null,"lot재고량"),l("th",null,"납기일자"),l("th",null,"상태")])],-1)),l("tbody",null,[(n(!0),d(y,null,b(o.ords,s=>(n(),d("tr",{key:s.ord_no},[l("td",null,[r(l("input",{type:"checkbox",value:s,"onUpdate:modelValue":t[7]||(t[7]=c=>o.checkOrd=c),onChange:t[8]||(t[8]=(...c)=>m.handleCheckChange&&m.handleCheckChange(...c))},null,40,I),[[f,o.checkOrd]])]),l("td",null,a(s.ord_no),1),l("td",null,a(s.vdr_no),1),l("td",null,a(s.cpy_nm),1),l("td",null,a(s.prd_no),1),l("td",null,a(s.prd_nm),1),l("td",null,a(s.요청수량),1),s.lot수량<=0?(n(),d("td",M,"0")):s.lot수량>0?(n(),d("td",L,a(s.lot수량),1)):v("",!0),l("td",null,a(s.납기예정),1),s.요청수량<s.lot수량?(n(),d("td",B,t[18]||(t[18]=[l("span",{class:"badge text-bg-primary"},"출하가능",-1)]))):(n(),d("td",Q,t[19]||(t[19]=[l("span",{class:"badge text-bg-danger"},"출하불가",-1)])))]))),128))])]),l("div",j,[l("button",{class:"btn btn-primary",onClick:t[9]||(t[9]=(...s)=>m.saveSpm&&m.saveSpm(...s))},"출하지시")])])}const P=h(V,[["render",q]]);export{P as default};
//# sourceMappingURL=spmInst-CqcFGb6h.js.map
========
import{_ as h,c as d,a as l,w as r,v as i,F as y,r as b,e as p,o as n,j as v,T as f,t as a}from"./index-DRp0-N0C.js";import{v as k}from"./vdrSelectModal-BGAdh289.js";const V={name:"SpmInst",components:{vdrSelectModal:k},data(){return{mode:"basic",spmDate:"",ordNo:0,vdr:[],selectVdr:{},selectCpyNm:{},showVdrModal:!1,deliver:"",qty:0,unitPrc:0,prdNo:"",ords:[],checkOrd:[],lotQty:0,memo:""}},async created(){const e=await p.get("/api/vdrList"),t=await p.get("/api/ord");this.ords=t.data,console.log(this.ords),this.vdr=e.data},computed:{selectedOrder(){return this.checkOrd.length>0?this.checkOrd[0]:null}},methods:{handleVdrSelect(e){this.selectVdr=e,this.showVdrModal=!1},async saveSpm(){const e={ord_no:this.ordNo,dlv_addr:this.deliver,spm_dt:this.spmDate,vdr_no:this.selectVdr},t={lot_no:this.checkOrd[0].lot_no,prd_no:this.checkOrd[0].prd_no,lot_qty:this.lotQty,memo:this.memo};if(this.checkOrd[0].요청수량>this.checkOrd[0].lot수량){alert("출하할수 없습니다");return}try{await p.post("/api/addSpm",e),console.log("초기화전",this.selectVdr),this.selectVdr=null,alert("수주 저장 완료!"),console.log("초기화후",this.selectVdr),await p.post("/api/updateLot",t)}catch(u){console.error("저장 실패:",u),alert("에러발생"),console.log("payLoad",e)}},handleCheckChange(){if(this.checkOrd.length===1){const e=this.checkOrd[0];this.mode="checked",this.ordNo=e.ord_no,this.selectVdr=e.vdr_no,this.selectCpyNm=e.cpy_nm,this.lotQty=e.요청수량,this.deliver=e.ofc_addr}else{this.mode="basic",alert("하나의 수주만 선택하세요");return}}}},g={class:"col-md-10 p-4"},_={class:"row mb-3 g-3"},x={class:"col-md-3"},C={class:"col-md-3"},N={key:0,class:"col-md-3"},O={key:1,class:"col-md-3"},w={class:"col-md-3"},D={class:"col-md-3"},S={class:"col-md-3"},U={class:"table table-bordered text-center mt-4"},I=["value"],M={key:0},L={key:1},B={key:2},Q={key:3},j={class:"d-flex justify-content-end mt-3"};function q(e,t,u,F,o,m){return n(),d("div",g,[t[21]||(t[21]=l("h4",{class:"mb-4"},"출하지시",-1)),l("div",_,[l("div",x,[t[10]||(t[10]=l("label",{class:"form-label"},"출하일자",-1)),r(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.spmDate=s),type:"date",class:"form-control"},null,512),[[i,o.spmDate]])]),t[17]||(t[17]=l("div",{class:"col-md-3"},[l("label",{class:"form-label"},"담당자"),l("input",{type:"text",class:"form-control"})],-1)),l("div",C,[t[11]||(t[11]=l("label",{class:"form-label"},"거래처",-1)),r(l("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.selectCpyNm.cpy_nm=s),type:"text",class:"form-control",readonly:""},null,512),[[i,o.selectCpyNm.cpy_nm]])]),o.selectVdr.vdr_no>0?(n(),d("div",N,[t[12]||(t[12]=l("label",{class:"form-label"},"거래처코드",-1)),r(l("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.selectVdr.vdr_no=s),type:"number",class:"form-control",readonly:""},null,512),[[i,o.selectVdr.vdr_no]])])):(n(),d("div",O,[t[13]||(t[13]=l("label",{class:"form-label"},"거래처코드",-1)),r(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.selectVdr=s),type:"number",class:"form-control",readonly:""},null,512),[[i,o.selectVdr]])])),l("div",w,[t[14]||(t[14]=l("label",{class:"form-label"},"수주번호",-1)),r(l("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.ordNo=s),type:"number",class:"form-control"},null,512),[[i,o.ordNo]])]),l("div",D,[t[15]||(t[15]=l("label",{class:"form-label"},"배송지",-1)),r(l("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.deliver=s),type:"text",class:"form-control"},null,512),[[i,o.deliver]])]),l("div",S,[t[16]||(t[16]=l("label",{class:"form-label"},"비고",-1)),r(l("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.memo=s),type:"text",class:"form-control"},null,512),[[i,o.memo]])])]),l("table",U,[t[20]||(t[20]=l("thead",{class:"table-light"},[l("tr",null,[l("th",null,[l("input",{type:"checkbox"})]),l("th",null,"주문ID"),l("th",null,"거래처ID"),l("th",null,"거래처명"),l("th",null,"제품ID"),l("th",null,"제품명"),l("th",null,"요청수량"),l("th",null,"lot재고량"),l("th",null,"납기일자"),l("th",null,"상태")])],-1)),l("tbody",null,[(n(!0),d(y,null,b(o.ords,s=>(n(),d("tr",{key:s.ord_no},[l("td",null,[r(l("input",{type:"checkbox",value:s,"onUpdate:modelValue":t[7]||(t[7]=c=>o.checkOrd=c),onChange:t[8]||(t[8]=(...c)=>m.handleCheckChange&&m.handleCheckChange(...c))},null,40,I),[[f,o.checkOrd]])]),l("td",null,a(s.ord_no),1),l("td",null,a(s.vdr_no),1),l("td",null,a(s.cpy_nm),1),l("td",null,a(s.prd_no),1),l("td",null,a(s.prd_nm),1),l("td",null,a(s.요청수량),1),s.lot수량<=0?(n(),d("td",M,"0")):s.lot수량>0?(n(),d("td",L,a(s.lot수량),1)):v("",!0),l("td",null,a(s.납기예정),1),s.요청수량<s.lot수량?(n(),d("td",B,t[18]||(t[18]=[l("span",{class:"badge text-bg-primary"},"출하가능",-1)]))):(n(),d("td",Q,t[19]||(t[19]=[l("span",{class:"badge text-bg-danger"},"출하불가",-1)])))]))),128))])]),l("div",j,[l("button",{class:"btn btn-primary",onClick:t[9]||(t[9]=(...s)=>m.saveSpm&&m.saveSpm(...s))},"출하지시")])])}const P=h(V,[["render",q]]);export{P as default};
//# sourceMappingURL=spmInst-D6k8OjYA.js.map
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/spmInst-D6k8OjYA.js
