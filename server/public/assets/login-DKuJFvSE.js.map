{"version":3,"file":"login-DKuJFvSE.js","sources":["../../../client/src/views/login/login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container d-flex justify-content-center align-items-center min-vh-100\">\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-6 col-lg-5\">\n          <div class=\"login-card\">\n            <div class=\"card-body px-4 py-5\">\n              <form @submit.prevent=\"userLogin\">\n                <div class=\"text-center mb-4\">\n                  <img src=\"@/assets/icons/login_bobe.png\" alt=\"밥먹고하시조\" class=\"login-logo\" />\n                  <p class=\"welcome-text\">오늘도 당신 덕분에 따뜻한 밥이 완성됩니다!</p>\n                </div>\n\n                <div class=\"form-section\">\n                  <div class=\"input-wrapper\">\n                    <div class=\"input-group\">\n                      <span class=\"input-group-text\">\n                        <i class=\"bi bi-person-fill\"></i>\n                      </span>\n                      <input type=\"text\" class=\"form-control\" v-model=\"loginInfo.emp_no\" placeholder=\"사원번호\"\n                        :disabled=\"isLoading\" />\n                    </div>\n                    <div class=\"invalid-feedback\" v-if=\"errors.emp_no\">{{ errors.emp_no }}</div>\n                  </div>\n\n                  <div class=\"input-wrapper\">\n                    <div class=\"input-group\">\n                      <span class=\"input-group-text\">\n                        <i class=\"bi bi-lock-fill\"></i>\n                      </span>\n                      <input type=\"password\" class=\"form-control\" v-model=\"loginInfo.pwd\" placeholder=\"비밀번호\"\n                        @keyup.enter=\"userLogin\" :disabled=\"isLoading\" />\n                    </div>\n                    <div class=\"invalid-feedback\" v-if=\"errors.pwd\">{{ errors.pwd }}</div>\n                  </div>\n\n                  <div class=\"text-end mb-3\">\n                    <button type=\"button\" class=\"btn-forgot\" @click=\"$router.push({ name: 'find2pwd' })\"\n                      :disabled=\"isLoading\">\n                      비밀번호 찾기\n                    </button>\n                  </div>\n\n                  <button type=\"submit\" class=\"btn-login\" :disabled=\"isLoading\">\n                    <span v-if=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n                    {{ isLoading ? '로그인 중...' : '로그인' }}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { useEmpStore } from \"../../stores/empStore\";\nimport { mapActions } from \"pinia\";\nimport 'bootstrap-icons/font/bootstrap-icons.css';  // Bootstrap Icons 추가\n\nexport default {\n  data() {\n    return {\n      loginInfo: {\n        emp_no: \"\",\n        pwd: \"\",\n      },\n      isLoading: false,\n      errors: {\n        emp_no: '',\n        pwd: ''\n      }\n    };\n  },\n  methods: {\n    ...mapActions(useEmpStore, [\"setLoginInfo\"]),\n\n    validateForm() {\n      let isValid = true;\n      this.errors = {\n        emp_no: '',\n        pwd: ''\n      };\n\n      if (!this.loginInfo.emp_no?.trim()) {\n        this.errors.emp_no = '사원번호를 입력해주세요';\n        isValid = false;\n      }\n\n      if (!this.loginInfo.pwd?.trim()) {\n        this.errors.pwd = '비밀번호를 입력해주세요';\n        isValid = false;\n      }\n\n      return isValid;\n    },\n\n    async userLogin() {\n      // 폼 검증\n      if (!this.validateForm()) {\n        return;\n      }\n\n      this.isLoading = true;\n\n      try {\n        const result = await axios.post(`/api/login`, this.loginInfo);\n        const loginRes = result.data;\n\n        if (loginRes.result) {\n          this.setLoginInfo({\n            emp_no: loginRes.emp_no,\n            nm: loginRes.nm,\n            pst_nm: loginRes.pst_nm,\n            pst_no: loginRes.pst_no,\n            dept_no: loginRes.dept_no,\n          });\n\n          alert(\"사랑합니다!\");\n          this.$router.push({ name: \"Home\" });\n        } else {\n          this.errors.pwd = loginRes.message || \"사원번호 혹은 비밀번호가 일치하지 않습니다.\";\n        }\n      } catch (err) {\n        console.error(\"Login error:\", err);\n\n        if (err.response) {\n          switch (err.response.status) {\n            case 401:\n              this.errors.pwd = \"사원번호 혹은 비밀번호가 일치하지 않습니다.\";\n              break;\n            case 429:\n              this.errors.pwd = \"로그인 시도가 너무 많습니다. 잠시 후 다시 시도해주세요.\";\n              break;\n            case 500:\n              alert(\"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.\");\n              break;\n            default:\n              alert(\"로그인 중 오류가 발생했습니다.\");\n          }\n        } else if (err.request) {\n          alert(\"서버와 통신할 수 없습니다. 네트워크 연결을 확인해주세요.\");\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"@/styles/style\" as *;\n\n.login-container {\n  background-color: #f8f9fa;\n  font-family: Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, \"Helvetica Neue\", \"Segoe UI\", \"Apple SD Gothic Neo\", \"Noto Sans KR\", \"Malgun Gothic\", sans-serif;\n}\n\n.login-card {\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);\n  min-height: 480px;\n  display: flex;\n  flex-direction: column;\n}\n\n.card-body {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 2.5rem 2.8rem !important;\n}\n\n.login-logo {\n  width: 200px;\n  height: auto;\n  margin-bottom: 1rem;\n}\n\n.welcome-text {\n  color: #6c757d;\n  font-size: 0.95rem;\n  margin-bottom: 2.2rem;\n  font-weight: 500;\n}\n\n.form-section {\n  max-width: 360px;\n  margin: 0 auto;\n  width: 100%;\n}\n\n.input-wrapper {\n  margin-bottom: 1.2rem;\n}\n\n.input-group {\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.2s ease;\n\n  &:focus-within {\n    border-color: #0d6efd;\n    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.15);\n  }\n\n  .input-group-text {\n    background-color: white;\n    border: none;\n    color: #6c757d;\n    padding: 0.75rem 1rem;\n\n    i {\n      font-size: 1.1rem;\n    }\n  }\n\n  .form-control {\n    border: none;\n    padding: 0.75rem 0.8rem;\n    font-size: 0.95rem;\n    background-color: white;\n\n    &:focus {\n      box-shadow: none;\n    }\n\n    &::placeholder {\n      color: #adb5bd;\n      font-size: 0.92rem;\n    }\n  }\n}\n\n.btn-forgot {\n  background: none;\n  border: none;\n  color: #6c757d;\n  font-size: 0.9rem;\n  padding: 0;\n  transition: color 0.2s;\n  margin-bottom: 1.2rem;\n\n  &:hover {\n    color: #0d6efd;\n  }\n}\n\n.btn-login {\n  width: 100%;\n  padding: 0.8rem;\n  border: none;\n  border-radius: 8px;\n  background: #0d6efd;\n  color: white;\n  font-weight: 600;\n  font-size: 0.95rem;\n  transition: all 0.2s;\n\n  &:hover:not(:disabled) {\n    background: #0b5ed7;\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.2);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    background: #adb5bd;\n    cursor: not-allowed;\n  }\n}\n\n.invalid-feedback {\n  display: block;\n  font-size: 0.85rem;\n  margin: 0.35rem 0 0 0.75rem;\n  color: #dc3545;\n}\n\n@media (max-width: 768px) {\n  .login-card {\n    margin: 1rem;\n    min-height: 450px;\n  }\n\n  .login-logo {\n    width: 180px;\n  }\n\n  .card-body {\n    padding: 2rem !important;\n  }\n\n  .form-section {\n    max-width: 100%;\n  }\n}\n</style>\n"],"names":["_sfc_main","mapActions","useEmpStore","isValid","_a","_b","loginRes","axios","err","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_openBlock","_createElementBlock","_createElementVNode","_cache","_withModifiers","$options","args","_imports_0","$event","$data","_vModelText","_hoisted_11","_toDisplayString","_createCommentVNode","_withKeys","_hoisted_15","_ctx","_hoisted_19","_createTextVNode"],"mappings":"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"}