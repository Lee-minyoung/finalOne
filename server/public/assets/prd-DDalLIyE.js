<<<<<<<< HEAD:server/public/assets/prd-DDalLIyE.js
<<<<<<<< HEAD:server/public/assets/prd-DDalLIyE.js
import{_,e as m,c as f,a as e,w as i,v as p,k as y,o as a,i as b,j as v,F as w,r as P,l as I,f as h,t as u}from"./index-CxFk6QSJ.js";import{u as k}from"./useDates-UMs5Kxim.js";import{d as x}from"./useCommonCode-DKmraWxZ.js";import{u as F}from"./useDates2-sS5pNIz9.js";const C={props:{prd:Object},data(){return{prdInfo:{}}},watch:{prd(){let s=this.prd;this.getPrdInfo(s.prd_no)}},methods:{CommonCodeFormat(s){return x.CommonCodeFormat(s)},dateFormat(s,t){return k.dateFormat(s,t)},async getPrdInfo(s){let t=await m.get(`/api/prd/${s}`).catch(l=>console.log(l));this.prdInfo=t.data},async prdUpdate(){let s={prd_nm:this.prdInfo.prd_nm,prd_tp:this.prdInfo.prd_tp,exp_dt:this.prdInfo.exp_dt,opt_stk_qty:this.prdInfo.opt_stk_qty};try{(await m.put(`/api/prd/${this.prdInfo.prd_no}`,s)).data.affectedRows>0?(alert("수정되었습니다."),this.$emit("prd-reload"),this.getPrdInfo(this.prdInfo.prd_no)):alert(`수정되지 않았습니다.
========
import{_,e as m,c as f,a as e,w as i,v as p,k as y,o as a,i as b,j as v,F as w,r as P,l as I,f as h,t as u}from"./index-DRp0-N0C.js";import{u as k}from"./useDates-UMs5Kxim.js";import{d as x}from"./useCommonCode-DKmraWxZ.js";import{u as F}from"./useDates2-sS5pNIz9.js";const C={props:{prd:Object},data(){return{prdInfo:{}}},watch:{prd(){let s=this.prd;this.getPrdInfo(s.prd_no)}},methods:{CommonCodeFormat(s){return x.CommonCodeFormat(s)},dateFormat(s,t){return k.dateFormat(s,t)},async getPrdInfo(s){let t=await m.get(`/api/prd/${s}`).catch(l=>console.log(l));this.prdInfo=t.data},async prdUpdate(){let s={prd_nm:this.prdInfo.prd_nm,prd_tp:this.prdInfo.prd_tp,exp_dt:this.prdInfo.exp_dt,opt_stk_qty:this.prdInfo.opt_stk_qty};try{(await m.put(`/api/prd/${this.prdInfo.prd_no}`,s)).data.affectedRows>0?(alert("수정되었습니다."),this.$emit("prd-reload"),this.getPrdInfo(this.prdInfo.prd_no)):alert(`수정되지 않았습니다.
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/prd-KdaOeSQy.js
========
import{_,e as m,c as f,a as e,w as i,v as p,k as y,o as a,i as b,j as v,F as w,r as P,l as I,f as h,t as u}from"./index-DRp0-N0C.js";import{u as k}from"./useDates-UMs5Kxim.js";import{d as x}from"./useCommonCode-DKmraWxZ.js";import{u as F}from"./useDates2-sS5pNIz9.js";const C={props:{prd:Object},data(){return{prdInfo:{}}},watch:{prd(){let s=this.prd;this.getPrdInfo(s.prd_no)}},methods:{CommonCodeFormat(s){return x.CommonCodeFormat(s)},dateFormat(s,t){return k.dateFormat(s,t)},async getPrdInfo(s){let t=await m.get(`/api/prd/${s}`).catch(l=>console.log(l));this.prdInfo=t.data},async prdUpdate(){let s={prd_nm:this.prdInfo.prd_nm,prd_tp:this.prdInfo.prd_tp,exp_dt:this.prdInfo.exp_dt,opt_stk_qty:this.prdInfo.opt_stk_qty};try{(await m.put(`/api/prd/${this.prdInfo.prd_no}`,s)).data.affectedRows>0?(alert("수정되었습니다."),this.$emit("prd-reload"),this.getPrdInfo(this.prdInfo.prd_no)):alert(`수정되지 않았습니다.
>>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b:server/public/assets/prd-KdaOeSQy.js
데이터를 확인해보세요.`)}catch(t){console.error("제품 수정 실패:",t),alert("제품 수정에 실패했습니다.")}},savePrd(){confirm(`정말로 수정하시겠습니까?
변경된 내용은 즉시 적용됩니다.`)&&this.prdUpdate()},addPrd(){this.$emit("goToForm",!1)},async deletePrd(s){if(s){if(confirm(`정말로 삭제하시겠습니까?
삭제된 데이터는 복구할 수 없습니다.`))try{(await m.delete(`/api/prd/${s}`)).data.affectedRows>0?(alert("정상적으로 삭제되었습니다."),this.$emit("prd-reload"),this.prdInfo={}):alert("삭제되지 않았습니다.")}catch(t){console.error("제품 삭제 실패:",t),alert("제품 삭제에 실패했습니다.")}}else alert("삭제할 제품을 선택하세요")},resetForm(){this.getPrdInfo(this.prdInfo.prd_no)}}},V={class:"col-md-6"},M={class:"d-flex justify-content-between mb-3"},T={class:"card p-3"},U={key:0},j={class:"row mb-2"},D={class:"col-md-6 mb-3"},q={class:"d-flex align-items-center"},L={class:"col-md-6 mb-3"},R={class:"d-flex align-items-center"},N={class:"col-md-12 mb-3"},B={class:"d-flex align-items-center"},G={class:"col-md-6 mb-3"},Q={class:"d-flex align-items-center"},S={class:"col-md-6 mb-3"},z={class:"d-flex align-items-center"},E={class:"col-md-6 mb-3"},O={class:"d-flex align-items-center"},A=["value"],H={class:"col-md-6 mb-3"},J={class:"d-flex align-items-center"},K=["value"],W={key:1};function X(s,t,l,c,o,n){return a(),f("div",V,[e("div",M,[e("div",null,[e("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...r)=>n.addPrd&&n.addPrd(...r))},"등록"),e("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=r=>n.deletePrd(o.prdInfo.prd_no))},"삭제")]),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[2]||(t[2]=(...r)=>n.resetForm&&n.resetForm(...r))},"초기화"),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=(...r)=>n.savePrd&&n.savePrd(...r))},"저장")])]),e("div",T,[t[18]||(t[18]=e("h4",null,"상세 보기",-1)),o.prdInfo.prd_no?(a(),f("div",U,[e("div",null,[e("div",j,[e("div",D,[e("div",q,[t[9]||(t[9]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품번호",-1)),i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=r=>o.prdInfo.prd_no=r),readonly:"",disabled:""},null,512),[[p,o.prdInfo.prd_no]])])]),e("div",L,[e("div",R,[t[11]||(t[11]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품유형",-1)),i(e("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=r=>o.prdInfo.prd_tp=r)},t[10]||(t[10]=[e("option",{value:"j5"},"제품",-1),e("option",{value:"j4"},"반제품",-1)]),512),[[y,o.prdInfo.prd_tp]])])]),e("div",N,[e("div",B,[t[12]||(t[12]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품명",-1)),i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=r=>o.prdInfo.prd_nm=r)},null,512),[[p,o.prdInfo.prd_nm]])])]),e("div",G,[e("div",Q,[t[13]||(t[13]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"유통기한",-1)),i(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=r=>o.prdInfo.exp_dt=r),min:"0"},null,512),[[p,o.prdInfo.exp_dt]])])]),e("div",S,[e("div",z,[t[14]||(t[14]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"적정재고량",-1)),i(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=r=>o.prdInfo.opt_stk_qty=r),min:"0"},null,512),[[p,o.prdInfo.opt_stk_qty]])])]),e("div",E,[e("div",O,[t[15]||(t[15]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(o.prdInfo.rgt_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,A)])]),e("div",H,[e("div",J,[t[16]||(t[16]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"수정일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(o.prdInfo.mdf_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,K)])])])])])):(a(),f("div",W,t[17]||(t[17]=[e("p",null,"제품을 선택하세요!",-1)])))])])}const Y=_(C,[["render",X],["__scopeId","data-v-d68ec3fc"]]),Z={data(){return{prdInfo:{prd_no:"",prd_nm:"",prd_tp:"",exp_dt:0,opt_stk_qty:0}}},created(){this.getPrdNo()},methods:{CommonCodeFormat(s){return x.CommonCodeFormat(s)},dateFormat(s,t){return F.dateFormat(s,t)},async getPrdNo(){try{let s=await m.get("/api/prdNo");this.prdInfo.prd_no="P-"+s.data[0].addPrdNo.padStart(3,"0")}catch(s){console.error("제품번호 조회 실패:",s),alert("제품번호를 가져오는데 실패했습니다.")}},async savePrd(){var s;try{if(!((s=this.prdInfo.prd_nm)!=null&&s.trim())){alert("제품명을 입력해주세요.");return}if(!this.prdInfo.prd_tp){alert("제품 유형을 선택해주세요.");return}if(this.prdInfo.exp_dt===null||this.prdInfo.exp_dt<=0){alert("유통기한을 입력해주세요.");return}if(this.prdInfo.opt_stk_qty===null||this.prdInfo.opt_stk_qty<=0){alert("적정재고량을 입력해주세요.");return}const t={prd_no:this.prdInfo.prd_no,prd_nm:this.prdInfo.prd_nm.trim(),prd_tp:this.prdInfo.prd_tp,exp_dt:parseInt(this.prdInfo.exp_dt)||0,opt_stk_qty:parseInt(this.prdInfo.opt_stk_qty)||0};(await m.post("/api/prd",this.prdInfo)).data.isSuccessed?(alert("등록되었습니다."),this.$emit("prd-reload"),this.$emit("goToInfo",!0)):alert(`등록되지 않았습니다.
데이터를 확인해보세요.`)}catch(t){console.error("제품 등록 실패:",t),alert("제품 등록에 실패했습니다.")}},resetForm(){this.prdInfo={prd_no:"",prd_nm:"",prd_tp:"",exp_dt:0,opt_stk_qty:0},this.getPrdNo()}}},$={class:"col-md-6"},tt={class:"d-flex justify-content-between mb-3"},et={class:"card p-3"},st={class:"row mb-2"},ot={class:"col-md-6 mb-3"},rt={class:"d-flex align-items-center"},nt={class:"col-md-6 mb-3"},lt={class:"d-flex align-items-center"},dt={class:"col-md-12 mb-3"},it={class:"d-flex align-items-center"},at={class:"col-md-6 mb-3"},pt={class:"d-flex align-items-center"},mt={class:"col-md-6 mb-3"},ft={class:"d-flex align-items-center"},ct={class:"col-md-6 mb-3"},ut={class:"d-flex align-items-center"},_t=["value"];function yt(s,t,l,c,o,n){return a(),f("div",$,[e("div",tt,[t[7]||(t[7]=e("div",null,null,-1)),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[0]||(t[0]=(...r)=>n.resetForm&&n.resetForm(...r))},"초기화"),e("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...r)=>n.savePrd&&n.savePrd(...r))},"저장")])]),e("div",et,[t[15]||(t[15]=e("h4",null,"제품 등록",-1)),e("div",null,[e("div",st,[e("div",ot,[e("div",rt,[t[8]||(t[8]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품번호",-1)),i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=r=>o.prdInfo.prd_no=r),readonly:"",disabled:""},null,512),[[p,o.prdInfo.prd_no]])])]),e("div",nt,[e("div",lt,[t[10]||(t[10]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품유형",-1)),i(e("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=r=>o.prdInfo.prd_tp=r)},t[9]||(t[9]=[e("option",{value:""},"선택",-1),e("option",{value:"j5"},"제품",-1),e("option",{value:"j4"},"반제품",-1)]),512),[[y,o.prdInfo.prd_tp]])])]),e("div",dt,[e("div",it,[t[11]||(t[11]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"제품명",-1)),i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=r=>o.prdInfo.prd_nm=r)},null,512),[[p,o.prdInfo.prd_nm]])])]),e("div",at,[e("div",pt,[t[12]||(t[12]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"유통기한",-1)),i(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=r=>o.prdInfo.exp_dt=r),min:"0"},null,512),[[p,o.prdInfo.exp_dt]])])]),e("div",mt,[e("div",ft,[t[13]||(t[13]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"적정재고량",-1)),i(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=r=>o.prdInfo.opt_stk_qty=r),min:"0"},null,512),[[p,o.prdInfo.opt_stk_qty]])])]),e("div",ct,[e("div",ut,[t[14]||(t[14]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(o.prdInfo.rgt_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,_t)])])])])])])}const bt=_(Z,[["render",yt],["__scopeId","data-v-fa6e4eae"]]),vt={components:{prdInfo:Y,prdForm:bt},data(){return{searchQuery:"",selectedType:"",selectedPrd:null,prdList:[],InfoView:!0}},computed:{filteredPrdList(){return this.prdList.filter(s=>s.prd_nm.toLowerCase().includes(this.searchQuery.toLowerCase())&&(this.selectedType===""||s.prd_tp===this.selectedType))}},created(){this.getPrdList()},methods:{prdTypeFormat(s){switch(s){case"j4":return"반제품";case"j5":return"제품";default:return s}},calculateRemainingMonths(s){if(!s.rgt_dt||!s.exp_dt)return"-";const t=new Date(s.rgt_dt),l=new Date(t);l.setMonth(l.getMonth()+s.exp_dt);const o=l-new Date,n=Math.floor(o/(1e3*60*60*24*30.5));return n<0?"만료됨":n+"개월"},getRemainingClass(s){if(!s.rgt_dt||!s.exp_dt)return"";const t=new Date(s.rgt_dt),l=new Date(t);l.setMonth(l.getMonth()+s.exp_dt);const o=l-new Date,n=Math.floor(o/(1e3*60*60*24*30.5));return n<0?"text-danger fw-bold":n<3?"text-warning fw-bold":""},async getPrdList(){try{const s=await m.get("/api/prd");this.prdList=s.data}catch(s){console.error("제품 목록 조회 실패:",s),alert("제품 목록을 불러오는데 실패했습니다.")}},async selectPrd(s){this.InfoView=!0;try{const t=await m.get(`/api/prd/${s}`);t.data?this.selectedPrd=t.data:(console.error("제품을 찾을 수 없습니다:",s),alert("제품 정보를 찾을 수 없습니다."))}catch(t){console.error("제품 상세 정보 조회 실패:",t),alert("제품 상세 정보를 불러오는데 실패했습니다.")}},msg(s){this.InfoView=s}}},It={class:"container mt-4"},ht={class:"row"},xt={class:"col-md-6"},gt={class:"d-flex justify-content-between mb-3"},wt={class:"card p-3"},Pt={class:"table-container"},kt={class:"table table-bordered"},Ft=["onClick"],Ct={class:"w-25"},Vt={class:"w-30"},Mt={class:"w-25"};function Tt(s,t,l,c,o,n){const r=I("prdInfo"),g=I("prdForm");return a(),f("div",It,[e("div",ht,[t[5]||(t[5]=e("h1",null,"제품 관리",-1)),e("div",xt,[e("div",gt,[i(e("input",{type:"text",class:"form-control w-50",placeholder:"제품명 검색...","onUpdate:modelValue":t[0]||(t[0]=d=>o.searchQuery=d)},null,512),[[p,o.searchQuery]]),i(e("select",{class:"form-select",style:{width:"100px"},"onUpdate:modelValue":t[1]||(t[1]=d=>o.selectedType=d)},t[2]||(t[2]=[e("option",{value:""},"전체",-1),e("option",{value:"j4"},"반제품",-1),e("option",{value:"j5"},"제품",-1)]),512),[[y,o.selectedType]])]),e("div",wt,[t[4]||(t[4]=e("h4",null,"제품 목록",-1)),e("div",Pt,[e("table",kt,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"w-25"},"제품번호"),e("th",{class:"w-30"},"제품명"),e("th",{class:"w-20"},"유통기한"),e("th",{class:"w-25"},"제품유형")])],-1)),e("tbody",null,[(a(!0),f(w,null,P(n.filteredPrdList,d=>(a(),f("tr",{key:d.prd_no,onClick:Ut=>n.selectPrd(d.prd_no),class:h([{"table-primary":o.selectedPrd&&o.selectedPrd.prd_no===d.prd_no},"table-hover"])},[e("td",Ct,u(d.prd_no),1),e("td",Vt,u(d.prd_nm),1),e("td",{class:h(["w-20",n.getRemainingClass(d)])},u(n.calculateRemainingMonths(d)),3),e("td",Mt,u(n.prdTypeFormat(d.prd_tp)),1)],10,Ft))),128))])])])])]),o.InfoView?(a(),b(r,{key:0,prd:o.selectedPrd,onGoToForm:n.msg,onPrdReload:n.getPrdList},null,8,["prd","onGoToForm","onPrdReload"])):v("",!0),o.InfoView?v("",!0):(a(),b(g,{key:1,onGoToInfo:n.msg,onPrdReload:n.getPrdList},null,8,["onGoToInfo","onPrdReload"]))])])}const Rt=_(vt,[["render",Tt],["__scopeId","data-v-581835b7"]]);export{Rt as default};
<<<<<<<< HEAD:server/public/assets/prd-DDalLIyE.js
<<<<<<<< HEAD:server/public/assets/prd-DDalLIyE.js
//# sourceMappingURL=prd-DDalLIyE.js.map
========
//# sourceMappingURL=prd-KdaOeSQy.js.map
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/prd-KdaOeSQy.js
========
//# sourceMappingURL=prd-KdaOeSQy.js.map
>>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b:server/public/assets/prd-KdaOeSQy.js
