import{_ as m,W as _,c as r,a as e,g,j as a,w as c,v as u,t as p,V as f,b,e as h,u as v,o as l}from"./index-CxFk6QSJ.js";import{_ as w}from"./login_bobe-DUqYSWcg.js";const y={data(){return{loginInfo:{emp_no:"",pwd:""},isLoading:!1,errors:{emp_no:"",pwd:""}}},methods:{..._(v,["setLoginInfo"]),validateForm(){var s,d;let t=!0;return this.errors={emp_no:"",pwd:""},(s=this.loginInfo.emp_no)!=null&&s.trim()||(this.errors.emp_no="사원번호를 입력해주세요",t=!1),(d=this.loginInfo.pwd)!=null&&d.trim()||(this.errors.pwd="비밀번호를 입력해주세요",t=!1),t},async userLogin(){if(this.validateForm()){this.isLoading=!0;try{const s=(await h.post("/api/login",this.loginInfo)).data;s.result?(this.setLoginInfo({emp_no:s.emp_no,nm:s.nm,pst_nm:s.pst_nm,pst_no:s.pst_no,dept_no:s.dept_no}),alert("사랑합니다!"),this.$router.push({name:"Home"})):this.errors.pwd=s.message||"사원번호 혹은 비밀번호가 일치하지 않습니다."}catch(t){if(console.error("Login error:",t),t.response)switch(t.response.status){case 401:this.errors.pwd="사원번호 혹은 비밀번호가 일치하지 않습니다.";break;case 429:this.errors.pwd="로그인 시도가 너무 많습니다. 잠시 후 다시 시도해주세요.";break;case 500:alert("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");break;default:alert("로그인 중 오류가 발생했습니다.")}else t.request&&alert("서버와 통신할 수 없습니다. 네트워크 연결을 확인해주세요.")}finally{this.isLoading=!1}}}}},L={class:"login-container d-flex justify-content-center align-items-center min-vh-100"},x={class:"container"},k={class:"row justify-content-center"},I={class:"col-md-6 col-lg-5"},V={class:"login-card"},j={class:"card-body px-4 py-5"},B={class:"form-section"},N={class:"input-wrapper"},S={class:"input-group"},C=["disabled"],D={key:0,class:"invalid-feedback"},E={class:"input-wrapper"},F={class:"input-group"},K=["disabled"],M={key:0,class:"invalid-feedback"},T={class:"text-end mb-3"},U=["disabled"],q=["disabled"],A={key:0,class:"spinner-border spinner-border-sm me-2"};function H(t,s,d,R,o,n){return l(),r("div",L,[e("div",x,[e("div",k,[e("div",I,[e("div",V,[e("div",j,[e("form",{onSubmit:s[4]||(s[4]=g((...i)=>n.userLogin&&n.userLogin(...i),["prevent"]))},[s[7]||(s[7]=e("div",{class:"text-center mb-4"},[e("img",{src:w,alt:"밥먹고하시조",class:"login-logo"}),e("p",{class:"welcome-text"},"오늘도 당신 덕분에 따뜻한 밥이 완성됩니다!")],-1)),e("div",B,[e("div",N,[e("div",S,[s[5]||(s[5]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-person-fill"})],-1)),c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=i=>o.loginInfo.emp_no=i),placeholder:"사원번호",disabled:o.isLoading},null,8,C),[[u,o.loginInfo.emp_no]])]),o.errors.emp_no?(l(),r("div",D,p(o.errors.emp_no),1)):a("",!0)]),e("div",E,[e("div",F,[s[6]||(s[6]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-lock-fill"})],-1)),c(e("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=i=>o.loginInfo.pwd=i),placeholder:"비밀번호",onKeyup:s[2]||(s[2]=f((...i)=>n.userLogin&&n.userLogin(...i),["enter"])),disabled:o.isLoading},null,40,K),[[u,o.loginInfo.pwd]])]),o.errors.pwd?(l(),r("div",M,p(o.errors.pwd),1)):a("",!0)]),e("div",T,[e("button",{type:"button",class:"btn-forgot",onClick:s[3]||(s[3]=i=>t.$router.push({name:"find2pwd"})),disabled:o.isLoading}," 비밀번호 찾기 ",8,U)]),e("button",{type:"submit",class:"btn-login",disabled:o.isLoading},[o.isLoading?(l(),r("span",A)):a("",!0),b(" "+p(o.isLoading?"로그인 중...":"로그인"),1)],8,q)])],32)])])])])])])}const G=m(y,[["render",H],["__scopeId","data-v-76203daa"]]);export{G as default};
//# sourceMappingURL=login-Bkn1JLh7.js.map
