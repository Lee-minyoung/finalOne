import{_,c as i,a as t,w as u,k as c,F as v,r as b,e as h,o as m,W as y,t as l}from"./index-BjdZvEQ0.js";import"./sweetalert2.esm.all-DV3w3JmD.js";const k={data(){return{mode:"basic",purToLotStatus:[],checkPur:[],purOrdNo:0,matNo:"",wareNo:0,expDt:"",prcsr:"",rcvr:0,rcvrMth:""}},async created(){const n=await h.get("/api/ordToLot");this.purToLotStatus=n.data},methods:{async saveImport(){var r,s,d,e;const n={mat_no:(r=this.checkPur[0])==null?void 0:r.mat_no,qty:(s=this.checkPur[0])==null?void 0:s.qty,warehouse_no:this.wareNo,cnsm_lmt_dt:this.expDt,unt_prc:(d=this.checkPur[0])==null?void 0:d.unt_prc,pur_ord_no:this.purOrdNo,prcsr:this.prcsr,vdr_no:(e=this.checkPur[0])==null?void 0:e.vdr_no,rcvr:this.rcvr,rcv_mthd:this.rcvrMth};try{await h.post("/api/addMatImport",n),alert("자재입고완료")}catch{alert("실패 ㅠㅠ ")}},handleCheckChange(){if(this.checkPur.length===1){const n=this.checkPur[0];this.mode="checked",this.purOrdNo=n.pur_ord_no,this.expDt=n.유통기한}else this.mode="basic"},async manyImports(){console.log("전체발주건",this.purToLotStatus),console.log("체크된 발주건",this.checkPur);const r=this.purToLotStatus.filter(s=>this.checkPur.map(d=>d.pur_ord_no).includes(s.pur_ord_no)).map(s=>({mat_no:s.mat_no,qty:s.qty,warehouse_no:this.wareNo,cnsm_lmt_dt:this.expDt,unt_prc:s.unt_prc,pur_ord_no:s.pur_ord_no,prcsr:this.prcsr,vdr_no:s.vdr_no,rcvr:this.rcvr,rcv_mthd:this.rcvrMth}));try{await h.post("/api/addMatImports",r),alert("자재입고완료")}catch{alert("자재입고실패")}}}},w={class:"col-md-10 p-4"},x={class:"row mb-3 g-3"},f={class:"mb-4"},g={colspan:"3",style:{border:"none"}},P={class:"mb-4"},C={colspan:"3",style:{border:"none"}},D={class:"mb-4"},I={colspan:"3",style:{border:"none"}},M={class:"table table-bordered text-center mt-4"},L=["value"],N={class:"d-flex justify-content-end mt-3"};function S(n,r,s,d,e,a){return m(),i("div",w,[r[14]||(r[14]=t("h4",{class:"mb-4"},"입고처리",-1)),t("div",x,[t("tr",f,[r[7]||(r[7]=t("th",{style:{width:"20%","min-width":"120px",border:"none"}},"수령자",-1)),t("td",g,[u(t("select",{"onUpdate:modelValue":r[0]||(r[0]=o=>e.rcvr=o),class:"form-select"},r[6]||(r[6]=[t("option",{value:"1"},"수령자1",-1),t("option",{value:"2"},"수령자2",-1),t("option",{value:"3"},"수령자3",-1)]),512),[[c,e.rcvr]])])]),t("tr",P,[r[9]||(r[9]=t("th",{style:{width:"20%","min-width":"120px",border:"none"}},"처리자",-1)),t("td",C,[u(t("select",{"onUpdate:modelValue":r[1]||(r[1]=o=>e.prcsr=o),class:"form-select"},r[8]||(r[8]=[t("option",{value:"1"},"처리자1",-1),t("option",{value:"2"},"처리자2",-1),t("option",{value:"3"},"처리자3",-1)]),512),[[c,e.prcsr]])])]),r[12]||(r[12]=t("tr",{class:"mb-4"},[t("th",{style:{width:"20%","min-width":"120px",border:"none"}},"창고번호"),t("td",{colspan:"3",style:{border:"none"}},[t("input",{class:"form-control",type:"text",placeholder:"예담창고","aria-label":"Disabled input example",disabled:""})])],-1)),t("tr",D,[r[11]||(r[11]=t("th",{style:{width:"20%","min-width":"120px",border:"none"}},"수령방법",-1)),t("td",I,[u(t("select",{class:"form-select","onUpdate:modelValue":r[2]||(r[2]=o=>e.rcvrMth=o)},r[10]||(r[10]=[t("option",{value:"1"},"수령방법1",-1),t("option",{value:"2"},"수령방법2",-1),t("option",{value:"3"},"수령방법3",-1)]),512),[[c,e.rcvrMth]])])])]),t("table",M,[r[13]||(r[13]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,[t("input",{type:"checkbox"})]),t("th",null,"발주번호"),t("th",null,"자재ID"),t("th",null,"자재명"),t("th",null,"수량"),t("th",null,"유통기한"),t("th",null,"거래처ID"),t("th",null,"거래처명")])],-1)),t("tbody",null,[(m(!0),i(v,null,b(e.purToLotStatus,o=>(m(),i("tr",{key:o.pur_ord_no},[t("td",null,[u(t("input",{type:"checkbox",value:o,"onUpdate:modelValue":r[3]||(r[3]=p=>e.checkPur=p),onChange:r[4]||(r[4]=(...p)=>a.handleCheckChange&&a.handleCheckChange(...p))},null,40,L),[[y,e.checkPur]])]),t("td",null,l(o.pur_ord_no),1),t("td",null,l(o.mat_no),1),t("td",null,l(o.자재명),1),t("td",null,l(o.qty),1),t("td",null,l(o.유통기한),1),t("td",null,l(o.vdr_no),1),t("td",null,l(o.거래처명),1)]))),128))])]),t("div",N,[t("button",{class:"btn btn-primary",onClick:r[5]||(r[5]=(...o)=>a.manyImports&&a.manyImports(...o))},"자재입고")])])}const O=_(k,[["render",S]]);export{O as default};
//# sourceMappingURL=matImport-m63M9GCC.js.map
