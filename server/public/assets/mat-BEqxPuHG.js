<<<<<<< HEAD
<<<<<<<< HEAD:server/public/assets/mat-wa5geKnT.js
import{_ as h,c as u,a as e,w as a,v as i,k as w,d as k,F as I,r as x,g as F,o as r,f as g,t as p,e as f,i as b,j as y,l as v}from"./index-CxFk6QSJ.js";import{u as L}from"./useDates-UMs5Kxim.js";import{d as V}from"./useCommonCode-DKmraWxZ.js";import{u as q}from"./useDates2-sS5pNIz9.js";const C={props:{vdrList:Array,selected:Array},data(){return{search:"",selectedVdr:null,selectedFilter:""}},computed:{filteredVdrList(){return this.vdrList?this.vdrList.filter(s=>{const t=!this.search||s.cpy_nm.toLowerCase().includes(this.search.toLowerCase()),m=this.selectedFilter===""||s.ofc_tp===this.selectedFilter;return t&&m}):[]}},created(){this.selectedVdr=this.selected?{vdr_no:this.selected}:null},methods:{matTypeFormat(s){return V.matTypeFormat(s)},ofcTypeFormat(s){switch(s){case"b1":return"판매처";case"b2":return"구매처";case"b3":return"혼합";case"b4":return"외주처";default:return s}},toggleVdrSelection(s){this.selectedVdr&&this.selectedVdr.vdr_no===s.vdr_no?this.selectedVdr=null:this.selectedVdr={vdr_no:s.vdr_no,cpy_nm:s.cpy_nm,ofc_tp:s.ofc_tp}},isSelected(s){return this.selectedVdr&&this.selectedVdr.vdr_no===s.vdr_no}}},S={class:"modal-dialog modal-lg"},U={class:"modal-content"},T={class:"modal-header"},N={class:"modal-body"},R={class:"d-flex gap-2 align-items-center mb-2 justify-content-between"},j={class:"d-flex gap-2 align-items-center",style:{flex:"1"}},D={class:"table-container"},B={class:"table table-sm table-bordered text-center"},G=["onClick"],Q={class:"w-10"},z={class:"w-10"},A={class:"w-10"};function $(s,t,m,_,l,n){return r(),u("div",{class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)","z-index":"1051"},onClick:t[4]||(t[4]=F(d=>s.$emit("close"),["self"]))},[e("div",S,[e("div",U,[e("div",T,[t[5]||(t[5]=e("h5",{class:"modal-title"},"대표거래처 선택",-1)),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=d=>s.$emit("close"))})]),e("div",N,[e("div",R,[e("div",j,[a(e("input",{type:"text",class:"form-control w-25",placeholder:"상호명 검색","onUpdate:modelValue":t[1]||(t[1]=d=>l.search=d)},null,512),[[i,l.search]]),a(e("select",{class:"form-select w-25","onUpdate:modelValue":t[2]||(t[2]=d=>l.selectedFilter=d)},t[6]||(t[6]=[k('<option value="" data-v-81bb1a76>전체</option><option value="b1" data-v-81bb1a76>판매처</option><option value="b2" data-v-81bb1a76>구매처</option><option value="b3" data-v-81bb1a76>혼합</option><option value="b4" data-v-81bb1a76>외주처</option>',5)]),512),[[w,l.selectedFilter]])]),e("button",{class:"btn btn-sm btn-primary",onClick:t[3]||(t[3]=d=>s.$emit("select-vdr",l.selectedVdr))},"거래처 등록")]),e("div",D,[e("table",B,[t[7]||(t[7]=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"w-10"},"거래처번호"),e("th",{class:"w-10"},"상호명"),e("th",{class:"w-10"},"사업자유형")])],-1)),e("tbody",null,[(r(!0),u(I,null,x(n.filteredVdrList,d=>(r(),u("tr",{key:d.vdr_no,onClick:o=>n.toggleVdrSelection(d),class:g({"table-primary":n.isSelected(d)}),style:{cursor:"pointer"}},[e("td",Q,p(d.vdr_no),1),e("td",z,p(d.cpy_nm),1),e("td",A,p(n.ofcTypeFormat(d.ofc_tp)),1)],10,G))),128))])])])])])])])}const M=h(C,[["render",$],["__scopeId","data-v-81bb1a76"]]),E={components:{matVdrSelectModal:M},props:{mat:Object},data(){return{matInfo:{},vdrList:[],showVdrModal:!1,selectedVdrName:""}},watch:{mat:{immediate:!0,handler(s){s&&s.mat_no&&(console.log("자재 데이터 변경:",s),this.matInfo={...s},this.getMatInfo(s.mat_no))}}},created(){this.getVdrList()},methods:{openVdrModal(){this.showVdrModal=!0},handleSelectedVdr(s){s&&(this.matInfo.mn_vdr=s.vdr_no,this.matInfo.vdr_nm=s.cpy_nm),this.showVdrModal=!1},dateFormat(s,t){return L.dateFormat(s,t)},getDate(s){return this.dateFormat(s,"yyyy-MM-dd")},async getMatInfo(s){try{console.log("자재 정보 조회:",s);let t=await f.get(`/api/mat/${s}`);if(t.data){console.log("서버에서 받은 자재 정보:",t.data);const m={원재료:"b1",부재료:"b2",소모품:"b3"},_={...t.data};_.mat_tp=m[t.data.mat_tp]||t.data.mat_tp,this.matInfo=_,console.log("설정된 자재 정보:",this.matInfo)}else console.error("자재 정보가 없습니다:",s),alert("자재 정보를 찾을 수 없습니다.")}catch(t){console.error("자재 정보 조회 실패:",t),t.response?alert(t.response.data.message||"자재 정보 조회 중 오류가 발생했습니다."):alert("자재 정보 조회 중 오류가 발생했습니다.")}},async getVdrList(){try{let s=await f.get("/api/vdr");this.vdrList=s.data}catch(s){console.error("거래처 목록 조회 실패:",s),alert("거래처 목록 조회 중 오류가 발생했습니다.")}},async matUpdate(){let s={mat_nm:this.matInfo.mat_nm,mat_tp:this.matInfo.mat_tp,mn_vdr:this.matInfo.mn_vdr||null,min_ord_qty:this.matInfo.min_ord_qty||0,min_stk_qty:this.matInfo.min_stk_qty||0,unit:this.matInfo.unit||"",ld_tm:this.matInfo.ld_tm||0};try{(await f.put(`/api/mat/${this.matInfo.mat_no}`,s)).data.isUpdated?(alert("수정되었습니다."),this.$emit("mat-reload"),this.getMatInfo(this.matInfo.mat_no)):alert(`수정되지 않았습니다.
데이터를 확인해보세요.`)}catch(t){console.error("자재 수정 중 오류 발생:",t),alert("자재 수정 중 오류가 발생했습니다.")}},saveMat(){confirm(`정말로 수정하시겠습니까?
변경된 내용은 즉시 적용됩니다.`)&&this.matUpdate()},addMat(){this.$emit("goToForm",!1)},async deleteMat(s){if(s){if(confirm(`정말로 삭제하시겠습니까?
삭제된 데이터는 복구할 수 없습니다.`))try{(await f.delete(`/api/mat/${s}`)).data.affectedRows>0?(alert("정상적으로 삭제되었습니다."),this.$emit("mat-reload")):alert("삭제되지 않았습니다.")}catch(t){console.error("자재 삭제 중 오류 발생:",t),alert("자재 삭제 중 오류가 발생했습니다.")}}else alert("삭제할 자재를 선택하세요")},resetForm(){this.getMatInfo(this.matInfo.mat_no)}}},O={class:"col-md-6"},H={class:"d-flex justify-content-between mb-3"},J={class:"card p-3"},K={key:0},P={class:"row mb-2"},W={class:"col-md-6 mb-3"},X={class:"d-flex align-items-center"},Y={class:"col-md-6 mb-3"},Z={class:"d-flex align-items-center"},tt={class:"col-md-12 mb-3"},et={class:"d-flex align-items-center"},st={class:"col-md-12 mb-3"},lt={class:"d-flex align-items-center"},ot={class:"flex-grow-1"},nt={class:"input-group"},at={class:"col-md-6 mb-3"},dt={class:"d-flex align-items-center"},it={class:"col-md-6 mb-3"},rt={class:"d-flex align-items-center"},mt={class:"col-md-6 mb-3"},ct={class:"d-flex align-items-center"},ut={class:"col-md-6 mb-3"},ft={class:"d-flex align-items-center"},pt={class:"col-md-6 mb-3"},_t={class:"d-flex align-items-center"},bt=["value"],yt={class:"col-md-6 mb-3"},vt={class:"d-flex align-items-center"},ht=["value"],wt={key:1};function It(s,t,m,_,l,n){const d=v("matVdrSelectModal");return r(),u("div",O,[e("div",H,[e("div",null,[e("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...o)=>n.addMat&&n.addMat(...o))},"등록"),e("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=o=>n.deleteMat(l.matInfo.mat_no))},"삭제")]),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[2]||(t[2]=(...o)=>n.resetForm&&n.resetForm(...o))},"초기화"),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=(...o)=>n.saveMat&&n.saveMat(...o))},"저장")])]),e("div",J,[t[26]||(t[26]=e("h4",null,"상세 보기",-1)),l.matInfo.mat_no?(r(),u("div",K,[e("div",null,[e("div",P,[e("div",W,[e("div",X,[t[14]||(t[14]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재번호",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>l.matInfo.mat_no=o),readonly:"",disabled:""},null,512),[[i,l.matInfo.mat_no]])])]),e("div",Y,[e("div",Z,[t[16]||(t[16]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재유형",-1)),a(e("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=o=>l.matInfo.mat_tp=o)},t[15]||(t[15]=[e("option",{value:""},"선택",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.matInfo.mat_tp]])])]),e("div",tt,[e("div",et,[t[17]||(t[17]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재명",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=o=>l.matInfo.mat_nm=o)},null,512),[[i,l.matInfo.mat_nm]])])]),e("div",st,[e("div",lt,[t[18]||(t[18]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"대표거래처",-1)),e("div",ot,[e("div",nt,[a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=o=>l.matInfo.vdr_nm=o),readonly:"",placeholder:"대표거래처를 선택하세요"},null,512),[[i,l.matInfo.vdr_nm]]),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[8]||(t[8]=(...o)=>n.openVdrModal&&n.openVdrModal(...o))},"거래처 선택")])])])]),e("div",at,[e("div",dt,[t[19]||(t[19]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소주문량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=o=>l.matInfo.min_ord_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_ord_qty]])])]),e("div",it,[e("div",rt,[t[20]||(t[20]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소재고량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=o=>l.matInfo.min_stk_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_stk_qty]])])]),e("div",mt,[e("div",ct,[t[21]||(t[21]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"단위",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=o=>l.matInfo.unit=o),style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.unit]])])]),e("div",ut,[e("div",ft,[t[22]||(t[22]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"리드타임(일)",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=o=>l.matInfo.ld_tm=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.ld_tm]])])]),e("div",pt,[e("div",_t,[t[23]||(t[23]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(l.matInfo.rgt_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,bt)])]),e("div",yt,[e("div",vt,[t[24]||(t[24]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"수정일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(l.matInfo.mdf_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,ht)])])])])])):(r(),u("div",wt,t[25]||(t[25]=[e("p",null,"자재를 선택하세요!",-1)]))),l.showVdrModal?(r(),b(d,{key:2,vdrList:l.vdrList,selected:l.matInfo.mn_vdr,onSelectVdr:n.handleSelectedVdr,onClose:t[13]||(t[13]=o=>l.showVdrModal=!1)},null,8,["vdrList","selected","onSelectVdr"])):y("",!0)])])}const xt=h(E,[["render",It],["__scopeId","data-v-4b22dd38"]]),gt={components:{matVdrSelectModal:M},data(){return{matNo:"",today:"",matInfo:{mat_nm:"",mat_tp:"",mn_vdr:"",min_ord_qty:0,min_stk_qty:0,unit:"",ld_tm:0},vdrList:[],showVdrModal:!1,selectedVdrName:""}},created(){this.getMatNo(),this.getToday(),this.getVdrList()},methods:{dateFormat(s,t){return q.dateFormat(s,t)},getToday(){this.today=this.dateFormat(null,"yyyy-MM-dd")},async getMatNo(){try{let s=await f.get("/api/matNo");this.matNo="M-"+s.data[0].matNo.padStart(3,"0")}catch(s){console.error("자재번호 생성 실패:",s),alert("자재번호를 생성하는데 실패했습니다.")}},async getVdrList(){try{let s=await f.get("/api/vdr");this.vdrList=s.data}catch(s){console.error("거래처 목록 조회 실패:",s),alert("거래처 목록을 가져오는데 실패했습니다.")}},resetForm(){this.matInfo={mat_nm:"",mat_tp:"",mn_vdr:"",min_ord_qty:0,min_stk_qty:0,unit:"",ld_tm:0}},async saveMat(){var s;try{if(!((s=this.matInfo.mat_nm)!=null&&s.trim())){alert("자재명을 입력해주세요.");return}if(!this.matInfo.mat_tp){alert("자재유형을 선택해주세요.");return}if(!this.matInfo.mn_vdr){alert("대표거래처를 선택해주세요.");return}if(!this.matInfo.min_ord_qty){alert("최소주문량을 입력해주세요.");return}if(!this.matInfo.min_stk_qty){alert("최소재고량을 입력해주세요.");return}if(!this.matInfo.unit){alert("단위를 선택해주세요.");return}if(!this.matInfo.ld_tm){alert("리드타임을 입력해주세요.");return}let t={mat_no:this.matNo,mat_nm:this.matInfo.mat_nm,mat_tp:this.matInfo.mat_tp,mn_vdr:this.matInfo.mn_vdr||null,min_ord_qty:Number(this.matInfo.min_ord_qty)||0,min_stk_qty:Number(this.matInfo.min_stk_qty)||0,unit:this.matInfo.unit||"",ld_tm:Number(this.matInfo.ld_tm)||0};console.log("전송할 자재 데이터:",t);let m=await f.post("/api/mat",t);console.log("자재 등록 응답:",m.data),m.data.isSuccessed?(alert("자재가 등록되었습니다."),this.$emit("mat-reload"),this.$emit("goToInfo",!0)):alert("자재 등록에 실패했습니다.")}catch(t){console.error("자재 등록 실패:",t),t.response?(console.error("에러 응답:",t.response.data),alert(t.response.data.message||"자재 등록 중 오류가 발생했습니다.")):alert("자재 등록 중 오류가 발생했습니다.")}},openVdrModal(){this.showVdrModal=!0},handleSelectedVdr(s){s&&(this.matInfo.mn_vdr=s.vdr_no,this.selectedVdrName=s.cpy_nm),this.showVdrModal=!1}}},Vt={class:"col-md-6"},Mt={class:"d-flex justify-content-between mb-3"},kt={class:"card p-3"},Ft={class:"row mb-2"},Lt={class:"col-md-6 mb-3"},qt={class:"d-flex align-items-center"},Ct={class:"col-md-6 mb-3"},St={class:"d-flex align-items-center"},Ut={class:"col-md-12 mb-3"},Tt={class:"d-flex align-items-center"},Nt={class:"col-md-12 mb-3"},Rt={class:"d-flex align-items-center"},jt={class:"flex-grow-1"},Dt={class:"input-group"},Bt={class:"col-md-6 mb-3"},Gt={class:"d-flex align-items-center"},Qt={class:"col-md-6 mb-3"},zt={class:"d-flex align-items-center"},At={class:"col-md-6 mb-3"},$t={class:"d-flex align-items-center"},Et={class:"col-md-6 mb-3"},Ot={class:"d-flex align-items-center"},Ht={class:"col-md-6 mb-3"},Jt={class:"d-flex align-items-center"},Kt=["value"];function Pt(s,t,m,_,l,n){const d=v("matVdrSelectModal");return r(),u("div",Vt,[e("div",Mt,[t[12]||(t[12]=e("div",null,null,-1)),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[0]||(t[0]=(...o)=>n.resetForm&&n.resetForm(...o))},"초기화"),e("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...o)=>n.saveMat&&n.saveMat(...o))},"저장")])]),e("div",kt,[t[23]||(t[23]=e("h4",null,"자재 등록",-1)),e("div",null,[e("div",Ft,[e("div",Lt,[e("div",qt,[t[13]||(t[13]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재번호",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>l.matNo=o),readonly:"",disabled:""},null,512),[[i,l.matNo]])])]),e("div",Ct,[e("div",St,[t[15]||(t[15]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재유형",-1)),a(e("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=o=>l.matInfo.mat_tp=o)},t[14]||(t[14]=[e("option",{value:""},"선택",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.matInfo.mat_tp]])])]),e("div",Ut,[e("div",Tt,[t[16]||(t[16]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재명",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>l.matInfo.mat_nm=o)},null,512),[[i,l.matInfo.mat_nm]])])]),e("div",Nt,[e("div",Rt,[t[17]||(t[17]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"대표거래처",-1)),e("div",jt,[e("div",Dt,[a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=o=>l.selectedVdrName=o),readonly:"",placeholder:"대표거래처를 선택하세요"},null,512),[[i,l.selectedVdrName]]),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[6]||(t[6]=(...o)=>n.openVdrModal&&n.openVdrModal(...o))},"거래처 선택")])])])]),e("div",Bt,[e("div",Gt,[t[18]||(t[18]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소주문량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=o=>l.matInfo.min_ord_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_ord_qty]])])]),e("div",Qt,[e("div",zt,[t[19]||(t[19]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소재고량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=o=>l.matInfo.min_stk_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_stk_qty]])])]),e("div",At,[e("div",$t,[t[20]||(t[20]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"단위",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=o=>l.matInfo.unit=o),style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.unit]])])]),e("div",Et,[e("div",Ot,[t[21]||(t[21]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"리드타임(일)",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=o=>l.matInfo.ld_tm=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.ld_tm]])])]),e("div",Ht,[e("div",Jt,[t[22]||(t[22]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:l.today,readonly:"",disabled:""},null,8,Kt)])])])]),l.showVdrModal?(r(),b(d,{key:0,vdrList:l.vdrList,selected:l.matInfo.mn_vdr,onSelectVdr:n.handleSelectedVdr,onClose:t[11]||(t[11]=o=>l.showVdrModal=!1)},null,8,["vdrList","selected","onSelectVdr"])):y("",!0)])])}const Wt=h(gt,[["render",Pt],["__scopeId","data-v-c3a0da6e"]]),Xt={components:{matInfo:xt,matForm:Wt},name:"mat",data(){return{searchQuery:"",selectedType:"",selectedMat:null,matList:[],InfoView:!0}},computed:{filteredMatList(){return this.matList.filter(s=>s.mat_nm.toLowerCase().includes(this.searchQuery.toLowerCase())&&(this.selectedType===""||s.mat_tp===this.selectedType))}},created(){this.getMatList()},methods:{matTypeFormat(s){return V.matTypeFormat(s)},async getMatList(){try{let s=await f.get("/api/mat");this.matList=s.data}catch(s){console.error("자재 목록 조회 실패:",s),alert("자재 목록을 불러오는데 실패했습니다.")}},async selectMat(s){this.InfoView=!0;try{const t=await f.get(`/api/mat/${s}`);t.data?(this.selectedMat=t.data,console.log("Selected Mat:",this.selectedMat)):(console.error("자재를 찾을 수 없습니다:",s),alert("자재 정보를 찾을 수 없습니다."))}catch(t){console.error("자재 상세 정보 조회 실패:",t),alert("자재 상세 정보를 불러오는데 실패했습니다.")}},msg(s){this.InfoView=s}}},Yt={class:"container mt-4"},Zt={class:"row"},te={class:"col-md-6"},ee={class:"d-flex justify-content-between mb-3"},se={class:"card p-3"},le={class:"table-container"},oe={class:"table table-bordered"},ne=["onClick"],ae={class:"w-25"},de={class:"w-35"},ie={class:"w-15"},re={class:"w-25"};function me(s,t,m,_,l,n){const d=v("matInfo"),o=v("matForm");return r(),u("div",Yt,[e("div",Zt,[t[5]||(t[5]=e("h1",null,"자재 관리",-1)),e("div",te,[e("div",ee,[a(e("input",{type:"text",class:"form-control w-50",placeholder:"자재명 검색...","onUpdate:modelValue":t[0]||(t[0]=c=>l.searchQuery=c)},null,512),[[i,l.searchQuery]]),a(e("select",{class:"form-select",style:{width:"100px"},"onUpdate:modelValue":t[1]||(t[1]=c=>l.selectedType=c)},t[2]||(t[2]=[e("option",{value:""},"전체",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.selectedType]])]),e("div",se,[t[4]||(t[4]=e("h4",null,"자재 목록",-1)),e("div",le,[e("table",oe,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"w-25"},"자재번호"),e("th",{class:"w-35"},"자재명"),e("th",{class:"w-15"},"단위"),e("th",{class:"w-25"},"자재유형")])],-1)),e("tbody",null,[(r(!0),u(I,null,x(n.filteredMatList,c=>(r(),u("tr",{key:c.mat_no,onClick:ce=>n.selectMat(c.mat_no),class:g([{"table-primary":l.selectedMat&&l.selectedMat.mat_no===c.mat_no},"table-hover"])},[e("td",ae,p(c.mat_no),1),e("td",de,p(c.mat_nm),1),e("td",ie,p(c.unit),1),e("td",re,p(n.matTypeFormat(c.mat_tp)),1)],10,ne))),128))])])])])]),l.InfoView?(r(),b(d,{key:0,mat:l.selectedMat,onGoToForm:n.msg,onMatReload:n.getMatList},null,8,["mat","onGoToForm","onMatReload"])):y("",!0),l.InfoView?y("",!0):(r(),b(o,{key:1,onGoToInfo:n.msg,onMatReload:n.getMatList},null,8,["onGoToInfo","onMatReload"]))])])}const be=h(Xt,[["render",me],["__scopeId","data-v-8a60d64e"]]);export{be as default};
//# sourceMappingURL=mat-wa5geKnT.js.map
========
=======
>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b
import{_ as h,c as u,a as e,w as a,v as i,k as w,d as k,F as I,r as x,g as F,o as r,f as g,t as p,e as f,i as b,j as y,l as v}from"./index-DRp0-N0C.js";import{u as L}from"./useDates-UMs5Kxim.js";import{d as V}from"./useCommonCode-DKmraWxZ.js";import{u as q}from"./useDates2-sS5pNIz9.js";const C={props:{vdrList:Array,selected:Array},data(){return{search:"",selectedVdr:null,selectedFilter:""}},computed:{filteredVdrList(){return this.vdrList?this.vdrList.filter(s=>{const t=!this.search||s.cpy_nm.toLowerCase().includes(this.search.toLowerCase()),m=this.selectedFilter===""||s.ofc_tp===this.selectedFilter;return t&&m}):[]}},created(){this.selectedVdr=this.selected?{vdr_no:this.selected}:null},methods:{matTypeFormat(s){return V.matTypeFormat(s)},ofcTypeFormat(s){switch(s){case"b1":return"판매처";case"b2":return"구매처";case"b3":return"혼합";case"b4":return"외주처";default:return s}},toggleVdrSelection(s){this.selectedVdr&&this.selectedVdr.vdr_no===s.vdr_no?this.selectedVdr=null:this.selectedVdr={vdr_no:s.vdr_no,cpy_nm:s.cpy_nm,ofc_tp:s.ofc_tp}},isSelected(s){return this.selectedVdr&&this.selectedVdr.vdr_no===s.vdr_no}}},S={class:"modal-dialog modal-lg"},U={class:"modal-content"},T={class:"modal-header"},N={class:"modal-body"},R={class:"d-flex gap-2 align-items-center mb-2 justify-content-between"},j={class:"d-flex gap-2 align-items-center",style:{flex:"1"}},D={class:"table-container"},B={class:"table table-sm table-bordered text-center"},G=["onClick"],Q={class:"w-10"},z={class:"w-10"},A={class:"w-10"};function $(s,t,m,_,l,n){return r(),u("div",{class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)","z-index":"1051"},onClick:t[4]||(t[4]=F(d=>s.$emit("close"),["self"]))},[e("div",S,[e("div",U,[e("div",T,[t[5]||(t[5]=e("h5",{class:"modal-title"},"대표거래처 선택",-1)),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=d=>s.$emit("close"))})]),e("div",N,[e("div",R,[e("div",j,[a(e("input",{type:"text",class:"form-control w-25",placeholder:"상호명 검색","onUpdate:modelValue":t[1]||(t[1]=d=>l.search=d)},null,512),[[i,l.search]]),a(e("select",{class:"form-select w-25","onUpdate:modelValue":t[2]||(t[2]=d=>l.selectedFilter=d)},t[6]||(t[6]=[k('<option value="" data-v-81bb1a76>전체</option><option value="b1" data-v-81bb1a76>판매처</option><option value="b2" data-v-81bb1a76>구매처</option><option value="b3" data-v-81bb1a76>혼합</option><option value="b4" data-v-81bb1a76>외주처</option>',5)]),512),[[w,l.selectedFilter]])]),e("button",{class:"btn btn-sm btn-primary",onClick:t[3]||(t[3]=d=>s.$emit("select-vdr",l.selectedVdr))},"거래처 등록")]),e("div",D,[e("table",B,[t[7]||(t[7]=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"w-10"},"거래처번호"),e("th",{class:"w-10"},"상호명"),e("th",{class:"w-10"},"사업자유형")])],-1)),e("tbody",null,[(r(!0),u(I,null,x(n.filteredVdrList,d=>(r(),u("tr",{key:d.vdr_no,onClick:o=>n.toggleVdrSelection(d),class:g({"table-primary":n.isSelected(d)}),style:{cursor:"pointer"}},[e("td",Q,p(d.vdr_no),1),e("td",z,p(d.cpy_nm),1),e("td",A,p(n.ofcTypeFormat(d.ofc_tp)),1)],10,G))),128))])])])])])])])}const M=h(C,[["render",$],["__scopeId","data-v-81bb1a76"]]),E={components:{matVdrSelectModal:M},props:{mat:Object},data(){return{matInfo:{},vdrList:[],showVdrModal:!1,selectedVdrName:""}},watch:{mat:{immediate:!0,handler(s){s&&s.mat_no&&(console.log("자재 데이터 변경:",s),this.matInfo={...s},this.getMatInfo(s.mat_no))}}},created(){this.getVdrList()},methods:{openVdrModal(){this.showVdrModal=!0},handleSelectedVdr(s){s&&(this.matInfo.mn_vdr=s.vdr_no,this.matInfo.vdr_nm=s.cpy_nm),this.showVdrModal=!1},dateFormat(s,t){return L.dateFormat(s,t)},getDate(s){return this.dateFormat(s,"yyyy-MM-dd")},async getMatInfo(s){try{console.log("자재 정보 조회:",s);let t=await f.get(`/api/mat/${s}`);if(t.data){console.log("서버에서 받은 자재 정보:",t.data);const m={원재료:"b1",부재료:"b2",소모품:"b3"},_={...t.data};_.mat_tp=m[t.data.mat_tp]||t.data.mat_tp,this.matInfo=_,console.log("설정된 자재 정보:",this.matInfo)}else console.error("자재 정보가 없습니다:",s),alert("자재 정보를 찾을 수 없습니다.")}catch(t){console.error("자재 정보 조회 실패:",t),t.response?alert(t.response.data.message||"자재 정보 조회 중 오류가 발생했습니다."):alert("자재 정보 조회 중 오류가 발생했습니다.")}},async getVdrList(){try{let s=await f.get("/api/vdr");this.vdrList=s.data}catch(s){console.error("거래처 목록 조회 실패:",s),alert("거래처 목록 조회 중 오류가 발생했습니다.")}},async matUpdate(){let s={mat_nm:this.matInfo.mat_nm,mat_tp:this.matInfo.mat_tp,mn_vdr:this.matInfo.mn_vdr||null,min_ord_qty:this.matInfo.min_ord_qty||0,min_stk_qty:this.matInfo.min_stk_qty||0,unit:this.matInfo.unit||"",ld_tm:this.matInfo.ld_tm||0};try{(await f.put(`/api/mat/${this.matInfo.mat_no}`,s)).data.isUpdated?(alert("수정되었습니다."),this.$emit("mat-reload"),this.getMatInfo(this.matInfo.mat_no)):alert(`수정되지 않았습니다.
데이터를 확인해보세요.`)}catch(t){console.error("자재 수정 중 오류 발생:",t),alert("자재 수정 중 오류가 발생했습니다.")}},saveMat(){confirm(`정말로 수정하시겠습니까?
변경된 내용은 즉시 적용됩니다.`)&&this.matUpdate()},addMat(){this.$emit("goToForm",!1)},async deleteMat(s){if(s){if(confirm(`정말로 삭제하시겠습니까?
삭제된 데이터는 복구할 수 없습니다.`))try{(await f.delete(`/api/mat/${s}`)).data.affectedRows>0?(alert("정상적으로 삭제되었습니다."),this.$emit("mat-reload")):alert("삭제되지 않았습니다.")}catch(t){console.error("자재 삭제 중 오류 발생:",t),alert("자재 삭제 중 오류가 발생했습니다.")}}else alert("삭제할 자재를 선택하세요")},resetForm(){this.getMatInfo(this.matInfo.mat_no)}}},O={class:"col-md-6"},H={class:"d-flex justify-content-between mb-3"},J={class:"card p-3"},K={key:0},P={class:"row mb-2"},W={class:"col-md-6 mb-3"},X={class:"d-flex align-items-center"},Y={class:"col-md-6 mb-3"},Z={class:"d-flex align-items-center"},tt={class:"col-md-12 mb-3"},et={class:"d-flex align-items-center"},st={class:"col-md-12 mb-3"},lt={class:"d-flex align-items-center"},ot={class:"flex-grow-1"},nt={class:"input-group"},at={class:"col-md-6 mb-3"},dt={class:"d-flex align-items-center"},it={class:"col-md-6 mb-3"},rt={class:"d-flex align-items-center"},mt={class:"col-md-6 mb-3"},ct={class:"d-flex align-items-center"},ut={class:"col-md-6 mb-3"},ft={class:"d-flex align-items-center"},pt={class:"col-md-6 mb-3"},_t={class:"d-flex align-items-center"},bt=["value"],yt={class:"col-md-6 mb-3"},vt={class:"d-flex align-items-center"},ht=["value"],wt={key:1};function It(s,t,m,_,l,n){const d=v("matVdrSelectModal");return r(),u("div",O,[e("div",H,[e("div",null,[e("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...o)=>n.addMat&&n.addMat(...o))},"등록"),e("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=o=>n.deleteMat(l.matInfo.mat_no))},"삭제")]),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[2]||(t[2]=(...o)=>n.resetForm&&n.resetForm(...o))},"초기화"),e("button",{class:"btn btn-success",onClick:t[3]||(t[3]=(...o)=>n.saveMat&&n.saveMat(...o))},"저장")])]),e("div",J,[t[26]||(t[26]=e("h4",null,"상세 보기",-1)),l.matInfo.mat_no?(r(),u("div",K,[e("div",null,[e("div",P,[e("div",W,[e("div",X,[t[14]||(t[14]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재번호",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>l.matInfo.mat_no=o),readonly:"",disabled:""},null,512),[[i,l.matInfo.mat_no]])])]),e("div",Y,[e("div",Z,[t[16]||(t[16]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재유형",-1)),a(e("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=o=>l.matInfo.mat_tp=o)},t[15]||(t[15]=[e("option",{value:""},"선택",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.matInfo.mat_tp]])])]),e("div",tt,[e("div",et,[t[17]||(t[17]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재명",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=o=>l.matInfo.mat_nm=o)},null,512),[[i,l.matInfo.mat_nm]])])]),e("div",st,[e("div",lt,[t[18]||(t[18]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"대표거래처",-1)),e("div",ot,[e("div",nt,[a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=o=>l.matInfo.vdr_nm=o),readonly:"",placeholder:"대표거래처를 선택하세요"},null,512),[[i,l.matInfo.vdr_nm]]),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[8]||(t[8]=(...o)=>n.openVdrModal&&n.openVdrModal(...o))},"거래처 선택")])])])]),e("div",at,[e("div",dt,[t[19]||(t[19]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소주문량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=o=>l.matInfo.min_ord_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_ord_qty]])])]),e("div",it,[e("div",rt,[t[20]||(t[20]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소재고량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=o=>l.matInfo.min_stk_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_stk_qty]])])]),e("div",mt,[e("div",ct,[t[21]||(t[21]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"단위",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[11]||(t[11]=o=>l.matInfo.unit=o),style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.unit]])])]),e("div",ut,[e("div",ft,[t[22]||(t[22]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"리드타임(일)",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=o=>l.matInfo.ld_tm=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.ld_tm]])])]),e("div",pt,[e("div",_t,[t[23]||(t[23]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(l.matInfo.rgt_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,bt)])]),e("div",yt,[e("div",vt,[t[24]||(t[24]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"수정일자",-1)),e("input",{type:"text",class:"form-control",value:n.dateFormat(l.matInfo.mdf_dt,"yyyy-MM-dd"),readonly:"",disabled:""},null,8,ht)])])])])])):(r(),u("div",wt,t[25]||(t[25]=[e("p",null,"자재를 선택하세요!",-1)]))),l.showVdrModal?(r(),b(d,{key:2,vdrList:l.vdrList,selected:l.matInfo.mn_vdr,onSelectVdr:n.handleSelectedVdr,onClose:t[13]||(t[13]=o=>l.showVdrModal=!1)},null,8,["vdrList","selected","onSelectVdr"])):y("",!0)])])}const xt=h(E,[["render",It],["__scopeId","data-v-4b22dd38"]]),gt={components:{matVdrSelectModal:M},data(){return{matNo:"",today:"",matInfo:{mat_nm:"",mat_tp:"",mn_vdr:"",min_ord_qty:0,min_stk_qty:0,unit:"",ld_tm:0},vdrList:[],showVdrModal:!1,selectedVdrName:""}},created(){this.getMatNo(),this.getToday(),this.getVdrList()},methods:{dateFormat(s,t){return q.dateFormat(s,t)},getToday(){this.today=this.dateFormat(null,"yyyy-MM-dd")},async getMatNo(){try{let s=await f.get("/api/matNo");this.matNo="M-"+s.data[0].matNo.padStart(3,"0")}catch(s){console.error("자재번호 생성 실패:",s),alert("자재번호를 생성하는데 실패했습니다.")}},async getVdrList(){try{let s=await f.get("/api/vdr");this.vdrList=s.data}catch(s){console.error("거래처 목록 조회 실패:",s),alert("거래처 목록을 가져오는데 실패했습니다.")}},resetForm(){this.matInfo={mat_nm:"",mat_tp:"",mn_vdr:"",min_ord_qty:0,min_stk_qty:0,unit:"",ld_tm:0}},async saveMat(){var s;try{if(!((s=this.matInfo.mat_nm)!=null&&s.trim())){alert("자재명을 입력해주세요.");return}if(!this.matInfo.mat_tp){alert("자재유형을 선택해주세요.");return}if(!this.matInfo.mn_vdr){alert("대표거래처를 선택해주세요.");return}if(!this.matInfo.min_ord_qty){alert("최소주문량을 입력해주세요.");return}if(!this.matInfo.min_stk_qty){alert("최소재고량을 입력해주세요.");return}if(!this.matInfo.unit){alert("단위를 선택해주세요.");return}if(!this.matInfo.ld_tm){alert("리드타임을 입력해주세요.");return}let t={mat_no:this.matNo,mat_nm:this.matInfo.mat_nm,mat_tp:this.matInfo.mat_tp,mn_vdr:this.matInfo.mn_vdr||null,min_ord_qty:Number(this.matInfo.min_ord_qty)||0,min_stk_qty:Number(this.matInfo.min_stk_qty)||0,unit:this.matInfo.unit||"",ld_tm:Number(this.matInfo.ld_tm)||0};console.log("전송할 자재 데이터:",t);let m=await f.post("/api/mat",t);console.log("자재 등록 응답:",m.data),m.data.isSuccessed?(alert("자재가 등록되었습니다."),this.$emit("mat-reload"),this.$emit("goToInfo",!0)):alert("자재 등록에 실패했습니다.")}catch(t){console.error("자재 등록 실패:",t),t.response?(console.error("에러 응답:",t.response.data),alert(t.response.data.message||"자재 등록 중 오류가 발생했습니다.")):alert("자재 등록 중 오류가 발생했습니다.")}},openVdrModal(){this.showVdrModal=!0},handleSelectedVdr(s){s&&(this.matInfo.mn_vdr=s.vdr_no,this.selectedVdrName=s.cpy_nm),this.showVdrModal=!1}}},Vt={class:"col-md-6"},Mt={class:"d-flex justify-content-between mb-3"},kt={class:"card p-3"},Ft={class:"row mb-2"},Lt={class:"col-md-6 mb-3"},qt={class:"d-flex align-items-center"},Ct={class:"col-md-6 mb-3"},St={class:"d-flex align-items-center"},Ut={class:"col-md-12 mb-3"},Tt={class:"d-flex align-items-center"},Nt={class:"col-md-12 mb-3"},Rt={class:"d-flex align-items-center"},jt={class:"flex-grow-1"},Dt={class:"input-group"},Bt={class:"col-md-6 mb-3"},Gt={class:"d-flex align-items-center"},Qt={class:"col-md-6 mb-3"},zt={class:"d-flex align-items-center"},At={class:"col-md-6 mb-3"},$t={class:"d-flex align-items-center"},Et={class:"col-md-6 mb-3"},Ot={class:"d-flex align-items-center"},Ht={class:"col-md-6 mb-3"},Jt={class:"d-flex align-items-center"},Kt=["value"];function Pt(s,t,m,_,l,n){const d=v("matVdrSelectModal");return r(),u("div",Vt,[e("div",Mt,[t[12]||(t[12]=e("div",null,null,-1)),e("div",null,[e("button",{class:"btn btn-warning me-2",onClick:t[0]||(t[0]=(...o)=>n.resetForm&&n.resetForm(...o))},"초기화"),e("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...o)=>n.saveMat&&n.saveMat(...o))},"저장")])]),e("div",kt,[t[23]||(t[23]=e("h4",null,"자재 등록",-1)),e("div",null,[e("div",Ft,[e("div",Lt,[e("div",qt,[t[13]||(t[13]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재번호",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>l.matNo=o),readonly:"",disabled:""},null,512),[[i,l.matNo]])])]),e("div",Ct,[e("div",St,[t[15]||(t[15]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재유형",-1)),a(e("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=o=>l.matInfo.mat_tp=o)},t[14]||(t[14]=[e("option",{value:""},"선택",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.matInfo.mat_tp]])])]),e("div",Ut,[e("div",Tt,[t[16]||(t[16]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"자재명",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=o=>l.matInfo.mat_nm=o)},null,512),[[i,l.matInfo.mat_nm]])])]),e("div",Nt,[e("div",Rt,[t[17]||(t[17]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"대표거래처",-1)),e("div",jt,[e("div",Dt,[a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=o=>l.selectedVdrName=o),readonly:"",placeholder:"대표거래처를 선택하세요"},null,512),[[i,l.selectedVdrName]]),e("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[6]||(t[6]=(...o)=>n.openVdrModal&&n.openVdrModal(...o))},"거래처 선택")])])])]),e("div",Bt,[e("div",Gt,[t[18]||(t[18]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소주문량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=o=>l.matInfo.min_ord_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_ord_qty]])])]),e("div",Qt,[e("div",zt,[t[19]||(t[19]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"최소재고량",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=o=>l.matInfo.min_stk_qty=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.min_stk_qty]])])]),e("div",At,[e("div",$t,[t[20]||(t[20]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"단위",-1)),a(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=o=>l.matInfo.unit=o),style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.unit]])])]),e("div",Et,[e("div",Ot,[t[21]||(t[21]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"리드타임(일)",-1)),a(e("input",{type:"number",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=o=>l.matInfo.ld_tm=o),min:"0",style:{"max-width":"300px",width:"100%"}},null,512),[[i,l.matInfo.ld_tm]])])]),e("div",Ht,[e("div",Jt,[t[22]||(t[22]=e("label",{class:"form-label me-3",style:{"min-width":"100px"}},"등록일자",-1)),e("input",{type:"text",class:"form-control",value:l.today,readonly:"",disabled:""},null,8,Kt)])])])]),l.showVdrModal?(r(),b(d,{key:0,vdrList:l.vdrList,selected:l.matInfo.mn_vdr,onSelectVdr:n.handleSelectedVdr,onClose:t[11]||(t[11]=o=>l.showVdrModal=!1)},null,8,["vdrList","selected","onSelectVdr"])):y("",!0)])])}const Wt=h(gt,[["render",Pt],["__scopeId","data-v-c3a0da6e"]]),Xt={components:{matInfo:xt,matForm:Wt},name:"mat",data(){return{searchQuery:"",selectedType:"",selectedMat:null,matList:[],InfoView:!0}},computed:{filteredMatList(){return this.matList.filter(s=>s.mat_nm.toLowerCase().includes(this.searchQuery.toLowerCase())&&(this.selectedType===""||s.mat_tp===this.selectedType))}},created(){this.getMatList()},methods:{matTypeFormat(s){return V.matTypeFormat(s)},async getMatList(){try{let s=await f.get("/api/mat");this.matList=s.data}catch(s){console.error("자재 목록 조회 실패:",s),alert("자재 목록을 불러오는데 실패했습니다.")}},async selectMat(s){this.InfoView=!0;try{const t=await f.get(`/api/mat/${s}`);t.data?(this.selectedMat=t.data,console.log("Selected Mat:",this.selectedMat)):(console.error("자재를 찾을 수 없습니다:",s),alert("자재 정보를 찾을 수 없습니다."))}catch(t){console.error("자재 상세 정보 조회 실패:",t),alert("자재 상세 정보를 불러오는데 실패했습니다.")}},msg(s){this.InfoView=s}}},Yt={class:"container mt-4"},Zt={class:"row"},te={class:"col-md-6"},ee={class:"d-flex justify-content-between mb-3"},se={class:"card p-3"},le={class:"table-container"},oe={class:"table table-bordered"},ne=["onClick"],ae={class:"w-25"},de={class:"w-35"},ie={class:"w-15"},re={class:"w-25"};function me(s,t,m,_,l,n){const d=v("matInfo"),o=v("matForm");return r(),u("div",Yt,[e("div",Zt,[t[5]||(t[5]=e("h1",null,"자재 관리",-1)),e("div",te,[e("div",ee,[a(e("input",{type:"text",class:"form-control w-50",placeholder:"자재명 검색...","onUpdate:modelValue":t[0]||(t[0]=c=>l.searchQuery=c)},null,512),[[i,l.searchQuery]]),a(e("select",{class:"form-select",style:{width:"100px"},"onUpdate:modelValue":t[1]||(t[1]=c=>l.selectedType=c)},t[2]||(t[2]=[e("option",{value:""},"전체",-1),e("option",{value:"b1"},"원재료",-1),e("option",{value:"b2"},"부재료",-1),e("option",{value:"b3"},"소모품",-1)]),512),[[w,l.selectedType]])]),e("div",se,[t[4]||(t[4]=e("h4",null,"자재 목록",-1)),e("div",le,[e("table",oe,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"w-25"},"자재번호"),e("th",{class:"w-35"},"자재명"),e("th",{class:"w-15"},"단위"),e("th",{class:"w-25"},"자재유형")])],-1)),e("tbody",null,[(r(!0),u(I,null,x(n.filteredMatList,c=>(r(),u("tr",{key:c.mat_no,onClick:ce=>n.selectMat(c.mat_no),class:g([{"table-primary":l.selectedMat&&l.selectedMat.mat_no===c.mat_no},"table-hover"])},[e("td",ae,p(c.mat_no),1),e("td",de,p(c.mat_nm),1),e("td",ie,p(c.unit),1),e("td",re,p(n.matTypeFormat(c.mat_tp)),1)],10,ne))),128))])])])])]),l.InfoView?(r(),b(d,{key:0,mat:l.selectedMat,onGoToForm:n.msg,onMatReload:n.getMatList},null,8,["mat","onGoToForm","onMatReload"])):y("",!0),l.InfoView?y("",!0):(r(),b(o,{key:1,onGoToInfo:n.msg,onMatReload:n.getMatList},null,8,["onGoToInfo","onMatReload"]))])])}const be=h(Xt,[["render",me],["__scopeId","data-v-8a60d64e"]]);export{be as default};
//# sourceMappingURL=mat-BEqxPuHG.js.map
<<<<<<< HEAD
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/mat-BEqxPuHG.js
=======
>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b
