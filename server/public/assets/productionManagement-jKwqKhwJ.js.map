<<<<<<< HEAD
{"version":3,"file":"productionManagement-jKwqKhwJ.js","sources":["../../../client/src/views/production/line/LineInstructionModal.vue","../../../client/src/views/production/line/productionManagement.vue"],"sourcesContent":["<template>\n  <!-- ✅ 배경 클릭 시 닫힘 -->\n  <div class=\"modal fade show d-block\" id=\"lineModal\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n\n        <!-- ✅ 모달 헤더 -->\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title mb-0 fw-bold\">라인 선택 - {{ item.pdn_ord_no }}</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n\n        <!-- ✅ 모달 바디 -->\n        <div class=\"modal-body\">\n          <table class=\"table table-sm table-bordered table-hover text-center align-middle\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>라인명</th>\n                <th>상태</th>\n                <th>선택</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- ✅ 사용 가능한 라인 목록 -->\n              <tr\n                v-for=\"line in item.lineList.filter(line => !usedLines.includes(line.ln_no))\"\n                :key=\"line.ln_no\"\n                :class=\"{ 'table-primary': selectedLine === line.ln_no }\"\n              >\n                <td>{{ line.ln_no }}</td>\n                <td>{{ line.ln_nm }}</td>\n                <td>\n                  <span class=\"badge\" :class=\"{\n                    'bg-secondary': line.ln_sts === 'l1',\n                    'bg-info': line.ln_sts === 'l2',\n                    'bg-primary': line.ln_sts === 'l3',\n                    'bg-success': line.ln_sts === 'l4',\n                    'bg-danger': line.ln_sts === 'l5',\n                    'bg-warning text-dark': line.ln_sts === 'l6',\n                    'bg-dark': !['l1', 'l2', 'l3', 'l4', 'l5', 'l6'].includes(line.ln_sts)\n                  }\">\n                    {{\n                      line.ln_sts === 'l1' ? '비가동' :\n                      line.ln_sts === 'l2' ? '대기중' :\n                      line.ln_sts === 'l3' ? '공정중' :\n                      line.ln_sts === 'l4' ? '준비중' :\n                      line.ln_sts === 'l5' ? '수리중' :\n                      line.ln_sts === 'l6' ? '점검중' :\n                      '오류'\n                    }}\n                  </span>\n                </td>\n                <td>\n                  <button\n                    class=\"btn btn-sm btn-outline-primary\"\n                    :disabled=\"line.ln_sts !== 'l1'\"\n                    @click=\"() => {\n                      $emit('set-line', { ...item, selected_line: line.ln_no })\n                      $emit('close')\n                    }\"\n                  >\n                    선택\n                  </button>\n                </td>\n              </tr>\n\n              <!-- ✅ 라인 리스트가 아예 없을 때 -->\n              <tr v-if=\"!item.lineList || item.lineList.length === 0\">\n                <td colspan=\"4\" class=\"text-center text-secondary\">라인 정보가 없습니다.</td>\n              </tr>\n\n              <!-- ✅ 라인은 있는데, 모두 사용 중일 때 -->\n              <tr v-else-if=\"item.lineList.filter(line => !usedLines.includes(line.ln_no)).length === 0\">\n                <td colspan=\"4\" class=\"text-center text-danger\">선택 가능한 라인이 없습니다.</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst filterConditions = {\n  '전체': () => true,\n  '진행중': item => ['l2', 'l3', 'l4'].includes(item.ln_sts),\n  '대기중': item => item.ln_sts === 'l1',\n  '공정지시': item => item.ln_sts === 'l2',\n  '공정현황': item => item.ln_sts === 'l3',\n  '공정완료': item => item.ln_sts === 'l4',\n  '설비점검중': item => ['l5', 'l6'].includes(item.ln_sts),\n};\n\nexport default {\n  props: {\n    item: Object,       // 선택된 지시 항목 객체 (lineList, selected_line 포함 예상)\n    usedLines: Array    // 이미 다른 항목에서 사용된 라인 번호 리스트\n  },\n\n  data() {\n    return {\n      // 선택된 라인 번호 (초기값: item.selected_line 이 있으면 사용, 없으면 '')\n      selectedLine: this.item.selected_line || ''\n    }\n  },\n\n  computed: {\n    /**\n     * 사용 가능한 라인 목록 필터링\n     * - item.lineList: 해당 지시 항목에서 선택 가능한 전체 라인\n     * - usedLines: 이미 다른 항목에서 선택한 라인들\n     * → 겹치지 않는 라인만 보여주기 위함\n     */\n    filteredLineList() {\n      const condition = filterConditions[this.statusFilter] || (() => true);\n      return this.LineList.filter(condition);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff !important;\n}\n</style>\n","<template>\n  <div class=\"container mt-4\">\n    <h2 class=\"mb-4\">생산지시현황</h2>\n\n    <!-- ✅ 지시 상태 필터 드롭다운 -->\n    <div class=\"d-flex justify-content-end mb-3\">\n      <select v-model=\"statusFilter\" class=\"form-select w-auto\">\n        <option value=\"전체\">전체</option>\n        <option value=\"r1+q2\">지시 가능</option>\n        <option value=\"r1+q1\">지시 대기</option>\n        <option value=\"r2\">지시 완료</option>\n        <option value=\"r3\">생산 완료</option>\n      </select>\n    </div>\n\n    <table class=\"table table-bordered text-center\" style=\"min-width: 1200px;\">\n      <colgroup>\n        <col style=\"width: 120px\" />\n        <col style=\"width: 180px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 140px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 100px\" />\n      </colgroup>\n      <thead class=\"table-light\">\n        <tr>\n          <th>지시번호</th>\n          <th>제품명</th>\n          <th>지시수량</th>\n          <th>지시일자</th>\n          <th>지시자</th>\n          <th>재료 입고</th>\n          <th>라인 지정</th>\n          <th>현황</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr v-for=\"item in filteredList\" :key=\"item.pdn_ord_dtl_no\">\n          <td>{{ item.pdn_ord_no }}</td>\n          <td>{{ item.prd_nm }}</td>\n          <td>{{ formatNumber(item.ord_qty) }}</td>\n          <td>{{ dateFormat(item.pdn_ord_dt, 'yyyy-MM-dd') }}</td>\n          <td>{{ item.crt_by }}</td>\n\n          <!-- ✅ r1 상태 -->\n          <template v-if=\"item.ord_sts === 'r1'\">\n            <td>\n              <span class=\"badge\" :class=\"{\n                'bg-warning text-dark': item.mat_ins_sts === 'q1',\n                'bg-success': item.mat_ins_sts === 'q2'\n              }\">\n                {{\n                  item.mat_ins_sts === 'q1' ? '입고대기'\n                    : item.mat_ins_sts === 'q2' ? '입고완료'\n                      : '오류'\n                }}\n              </span>\n            </td>\n            <td>\n              <div class=\"d-flex align-items-center justify-content-center gap-2\">\n                <span v-if=\"item.selected_line\">{{ item.selected_line }}</span>\n                <span v-else class=\"text-muted\">미지정</span>\n                <button class=\"btn btn-outline-secondary\" @click=\"openModal(item)\">\n                  🔍\n                </button>\n              </div>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-primary\" @click=\"assignLine(item)\">지시</button>\n            </td>\n          </template>\n\n          <!-- ✅ r2 상태: 생산지시완료 -->\n          <template v-else-if=\"item.ord_sts === 'r2'\">\n            <td colspan=\"1\">\n              <router-link to=\"/LineMang\" class=\"badge text-dark text-decoration-none\"\n                style=\"background-color: #aee2f8; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산지시완료\n              </router-link>\n            </td>\n            <td>\n              <span>{{ item.ln_no }}</span>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-danger\" @click=\"stopLine(item)\">취소</button>\n            </td>\n          </template>\n\n          <!-- ✅ r3 상태: 생산공정완료 -->\n          <template v-else-if=\"item.ord_sts === 'r3'\">\n            <td colspan=\"2\">\n              <span class=\"badge text-white\"\n                style=\"background-color: #6c757d; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산공정완료\n              </span>\n            </td>\n            <!-- <td>\n              <span>{{ item.ln_no }}</span>\n            </td> -->\n            <td>\n              <button class=\"btn btn-sm btn-outline-info\" @click=\"viewCompleteStatus(item)\">\n                완료현황\n              </button>\n            </td>\n          </template>\n\n        </tr>\n      </tbody>\n\n\n    </table>\n\n    <!-- ✅ 모달 -->\n    <LineInstructionModal v-if=\"showLineModal\" :item=\"selectedItem\" :used-lines=\"usedLines\" @set-line=\"setLine\"\n      @close=\"showLineModal = false\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport useDateUtils from '@/utils/useDates'\nimport LineInstructionModal from './LineInstructionModal.vue'\nimport Swal from 'sweetalert2'\n\nexport default {\n  components: { LineInstructionModal },\n\n  data() {\n    return {\n      instructionList: [],\n      selectedItem: null,\n      showLineModal: false,\n      statusFilter: 'r1+q2'\n    }\n  },\n\n  computed: {\n    dateFormat() {\n      return useDateUtils.dateFormat\n    },\n\n    usedLines() {\n      return this.instructionList\n        .filter(item => item.selected_line)\n        .map(item => item.selected_line)\n    },\n\n    filteredList() {\n  return this.instructionList.filter(item => {\n    if (this.statusFilter === '전체') return true\n\n    const [ord, mat] = this.statusFilter.split('+')\n\n    if (ord && item.ord_sts !== ord) return false\n    if (mat && item.mat_ins_sts !== mat) return false\n\n    return true\n  })\n}\n  },\n\n  created() {\n    this.fetchInstructions()\n  },\n\n  methods: {\n    async fetchInstructions() {\n      const res = await axios.get('/api/prodinst')\n      this.instructionList = res.data.map(row => ({\n        ...row,\n        selected_line: ''\n      }))\n    },\n\n    openModal(item) {\n      this.selectedItem = { ...item }\n      this.selectedItem.lineList = []\n\n      axios.get('/api/lineDrop', {\n        params: { pdn_ord_dtl_no: item.pdn_ord_dtl_no }\n      }).then(res => {\n        this.selectedItem.lineList = res.data\n        this.showLineModal = true\n      })\n    },\n\n    setLine(item) {\n      const index = this.instructionList.findIndex(\n        i => i.pdn_ord_dtl_no === item.pdn_ord_dtl_no\n      )\n      if (index !== -1) {\n        this.instructionList[index].selected_line = item.selected_line\n      }\n    },\n\n    async assignLine(item) {\n      if (!item.selected_line) {\n        return Swal.fire('❗ 알림', '라인을 먼저 지정하세요.', 'warning')\n      }\n      if (item.mat_ins_sts !== 'q2') {\n        return Swal.fire('❗ 알림', '입고완료 상태에서만 지시 가능합니다.', 'info')\n      }\n\n      try {\n        await axios.post('/api/preparingLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('✅ 성공', '지시 완료!', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '지시 중 문제가 발생했습니다.', 'error')\n      }\n    },\n\n    async stopLine(item) {\n      const result = await Swal.fire({\n        title: '지시를 취소하시겠습니까?',\n        text: `제품명: ${item.prd_nm}`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: '예',\n        cancelButtonText: '아니오'\n      })\n\n      if (!result.isConfirmed) return\n\n      try {\n        await axios.post('/api/stopLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('완료', '지시가 취소되었습니다.', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '취소 중 문제가 발생했습니다.', 'error')\n      }\n    },\n    viewCompleteStatus(item) {\n      Swal.fire({\n        title: '✅ 완료현황',\n        html: `\n        <div style=\"text-align:left; line-height:1.7\">\n          <strong>지시ID:</strong> ${item.pdn_ord_no}<br>\n          <strong>제품명:</strong> ${item.prd_nm}<br>\n          <strong>지시수량:</strong> ${item.lo_ord_qty}개<br>\n          <strong>불량수량:</strong> ${item.dft_qty}개<br>\n          <strong>생산수량:</strong> ${item.pdn_qty}개<br>\n          <strong>지시자:</strong> ${item.mgr}<br>\n          <strong>완료일자:</strong> ${this.dateFormat(item.end_tm, 'yyyy-MM-dd   hh시 mm분')}<br>\n\n        </div>\n      `,\n        icon: 'info'\n      })\n    },\n    formatNumber(n) {\n      if (n == null || isNaN(n)) return '-'\n      return new Intl.NumberFormat().format(n)\n    },\n  }\n}\n/*\n  ln.ln_opr_no,\n  ln.ord_qty,\n  ln.pdn_qty,\n  ln.dft_qty,\n  ln.mgr,\n  ln.end_tm,\n*/\n</script>\n\n<style scoped>\nh2 {\n  font-weight: bold;\n  text-align: left;\n}\n\n.table td,\n.table th {\n  vertical-align: middle;\n}\n\n.selected-line {\n  font-weight: 600;\n  color: #198754;\n}\n</style>"],"names":["filterConditions","item","_sfc_main","condition","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","_toDisplayString","$props","_openBlock","_Fragment","_renderList","line","_normalizeClass","$data","_hoisted_8","_hoisted_9","_createCommentVNode","LineInstructionModal","useDateUtils","ord","mat","res","axios","row","index","i","Swal","err","n","_hoisted_10","_hoisted_11","$event","_createStaticVNode","$options","_createVNode","_component_router_link","_withCtx","_createTextVNode","_createBlock","_component_LineInstructionModal"],"mappings":"uQAsFA,MAAMA,EAAmB,CACvB,GAAM,IAAM,GACZ,IAAOC,GAAQ,CAAC,KAAM,KAAM,IAAI,EAAE,SAASA,EAAK,MAAM,EACtD,IAAOA,GAAQA,EAAK,SAAW,KAC/B,KAAQA,GAAQA,EAAK,SAAW,KAChC,KAAQA,GAAQA,EAAK,SAAW,KAChC,KAAQA,GAAQA,EAAK,SAAW,KAChC,MAASA,GAAQ,CAAC,KAAM,IAAI,EAAE,SAASA,EAAK,MAAM,CACpD,EAEKC,EAAU,CACb,MAAO,CACL,KAAM,OACN,UAAW,KACZ,EAED,MAAO,CACL,MAAO,CAEL,aAAc,KAAK,KAAK,eAAiB,EAC3C,CACD,EAED,SAAU,CAOR,kBAAmB,CACjB,MAAMC,EAAYH,EAAiB,KAAK,YAAY,IAAM,IAAM,IAChE,OAAO,KAAK,SAAS,OAAOG,CAAS,CACvC,CACF,CACF,EAtHSC,EAAA,CAAA,MAAM,uBAAuB,EAC3BC,EAAA,CAAA,MAAM,eAAe,EAGnBC,EAAA,CAAA,MAAM,cAAc,EACnBC,EAAA,CAAA,MAAM,0BAA0B,EAKjCC,EAAA,CAAA,MAAM,YAAY,EACdC,EAAA,CAAA,MAAM,oEAAoE,EAd3FC,EAAA,CAAA,WAAA,SAAA,KAAA,IAAA,CAAA,KAAA,IAAA,CAAA,qCAEEC,EAgFM,MAAA,CAhFD,MAAM,0BAA0B,GAAG,YAAY,MAAA,CAAmD,WAAA,kBAAA,UAAA,MAAA,EAAE,QAAKC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAFhHC,KAEuHC,EAAK,MAAA,OAAA,EAAA,CAAA,MAAA,CAAA,KACxHC,EA8EM,MA9ENX,EA8EM,CA7EJW,EA4EM,MA5ENV,EA4EM,CAzEJU,EAGM,MAHNT,EAGM,CAFJS,EAAuE,KAAvER,EAAqC,WAAWS,EAAAC,EAAA,KAAK,UAAU,EAAA,CAAA,EAC/DF,EAAyE,SAAA,CAAjE,KAAK,SAAS,MAAM,YAAa,uBAAOD,EAAK,MAAA,OAAA,OAIvDC,EAiEM,MAjENP,EAiEM,CAhEJO,EA+DQ,QA/DRN,EA+DQ,aA9DNM,EAOQ,QAAA,CAPD,MAAM,eAAa,CACxBA,EAKK,KAAA,KAAA,CAJHA,EAAa,UAAT,MAAI,EACRA,EAAY,UAAR,KAAG,EACPA,EAAW,UAAP,IAAE,EACNA,EAAW,UAAP,IAAE,UAGVA,EAqDQ,QAAA,KAAA,EAnDNG,EAAA,EAAA,EAAAP,EAwCKQ,OAjEnBC,EA0B+BH,EAAA,KAAK,SAAS,OAAOI,IAASJ,EAAS,UAAC,SAASI,EAAK,KAAK,CAAA,EAAnEA,QADTV,EAwCK,KAAA,CAtCF,IAAKU,EAAK,MACV,MA5BjBC,EA4B2C,CAAA,gBAAAC,EAAA,eAAiBF,EAAK,KAAK,CAAA,IAEtDN,EAAyB,KAAA,KAAAC,EAAlBK,EAAK,KAAK,EAAA,CAAA,EACjBN,EAAyB,KAAA,KAAAC,EAAlBK,EAAK,KAAK,EAAA,CAAA,EACjBN,EAoBK,KAAA,KAAA,CAnBHA,EAkBO,OAAA,CAlBD,MAjCxBO,GAiC8B,QAAO,CAA+C,eAAAD,EAAK,SAAM,KAA0C,UAAAA,EAAK,SAAM,KAA6C,aAAAA,EAAK,SAAM,KAA6C,aAAAA,EAAK,SAAM,KAA4C,YAAAA,EAAK,SAAM,KAAuD,uBAAAA,EAAK,SAAM,gDAAgF,SAASA,EAAK,MAAM,IAU3c,EAAAL,EAAAK,EAAK,SAAM,KAAA,MAA0CA,EAAK,SAAM,KAAA,MAA0CA,EAAK,SAAM,KAAA,MAA0CA,EAAK,SAAM,KAAA,MAA0CA,EAAK,SAAM,KAAA,MAA0CA,EAAK,SAAM,KAAA,iBAU1RN,EAWK,KAAA,KAAA,CAVHA,EASS,SAAA,CARP,MAAM,iCACL,SAAUM,EAAK,SAAM,KACrB,QAAK,IAAA,CAAgCP,EAAA,MAAuB,WAAA,CAAA,GAAAG,EAAA,KAAqB,cAAAI,EAAK,KAAK,CAAA,EAA0BP,EAAK,MAAA,OAAA,EAI5H,EAAA,OA7DnB,EAAAJ,CAAA,gBAoEyB,CAAAO,EAAA,KAAK,UAAYA,OAAK,SAAS,SAAM,GAAhDC,EAAA,EAAAP,EAEK,KAtEnBa,EAAAZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAqEgBG,EAAoE,KAAA,CAAhE,QAAQ,IAAI,MAAM,8BAA6B,eAAY,EAAA,MAIlDE,EAAA,KAAK,SAAS,OAAOI,GAAI,CAAKJ,EAAS,UAAC,SAASI,EAAK,KAAK,GAAG,SAAM,GAAnFH,EAAA,EAAAP,EAEK,KA3EnBc,EAAAb,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA0EgBG,EAAqE,KAAA,CAAjE,QAAQ,IAAI,MAAM,2BAA0B,mBAAgB,EAAA,MA1EhFW,EAAA,GAAA,EAAA,0EC+HKxB,EAAU,CACb,WAAY,CAAE,qBAAAyB,CAAsB,EAEpC,MAAO,CACL,MAAO,CACL,gBAAiB,CAAE,EACnB,aAAc,KACd,cAAe,GACf,aAAc,OAChB,CACD,EAED,SAAU,CACR,YAAa,CACX,OAAOC,EAAa,UACrB,EAED,WAAY,CACV,OAAO,KAAK,gBACT,OAAO3B,GAAQA,EAAK,aAAa,EACjC,IAAIA,GAAQA,EAAK,aAAa,CAClC,EAED,cAAe,CACjB,OAAO,KAAK,gBAAgB,OAAOA,GAAQ,CACzC,GAAI,KAAK,eAAiB,KAAM,MAAO,GAEvC,KAAM,CAAC4B,EAAKC,CAAG,EAAI,KAAK,aAAa,MAAM,GAAG,EAG9C,MADI,EAAAD,GAAO5B,EAAK,UAAY4B,GACxBC,GAAO7B,EAAK,cAAgB6B,EAGjC,CAAA,CACH,CACG,EAED,SAAU,CACR,KAAK,kBAAiB,CACvB,EAED,QAAS,CACP,MAAM,mBAAoB,CACxB,MAAMC,EAAM,MAAMC,EAAM,IAAI,eAAe,EAC3C,KAAK,gBAAkBD,EAAI,KAAK,IAAIE,IAAQ,CAC1C,GAAGA,EACH,cAAe,EACjB,EAAE,CACH,EAED,UAAUhC,EAAM,CACd,KAAK,aAAe,CAAE,GAAGA,CAAK,EAC9B,KAAK,aAAa,SAAW,CAAA,EAE7B+B,EAAM,IAAI,gBAAiB,CACzB,OAAQ,CAAE,eAAgB/B,EAAK,cAAe,EAC/C,EAAE,KAAK8B,GAAO,CACb,KAAK,aAAa,SAAWA,EAAI,KACjC,KAAK,cAAgB,EACtB,CAAA,CACF,EAED,QAAQ9B,EAAM,CACZ,MAAMiC,EAAQ,KAAK,gBAAgB,UACjCC,GAAKA,EAAE,iBAAmBlC,EAAK,cACjC,EACIiC,IAAU,KACZ,KAAK,gBAAgBA,CAAK,EAAE,cAAgBjC,EAAK,cAEpD,EAED,MAAM,WAAWA,EAAM,CACrB,GAAI,CAACA,EAAK,cACR,OAAOmC,EAAK,KAAK,OAAQ,gBAAiB,SAAS,EAErD,GAAInC,EAAK,cAAgB,KACvB,OAAOmC,EAAK,KAAK,OAAQ,uBAAwB,MAAM,EAGzD,GAAI,CACF,MAAMJ,EAAM,KAAK,qBAAsB,CACrC,eAAgB/B,EAAK,eACrB,MAAOA,EAAK,aACb,CAAA,EACD,MAAMmC,EAAK,KAAK,OAAQ,SAAU,SAAS,EAC3C,KAAK,kBAAiB,EACtB,KAAK,cAAgB,EACrB,OAAOC,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBD,EAAK,KAAK,KAAM,mBAAoB,OAAO,CAC7C,CACD,EAED,MAAM,SAASnC,EAAM,CAUnB,IATe,MAAMmC,EAAK,KAAK,CAC7B,MAAO,gBACP,KAAM,QAAQnC,EAAK,MAAM,GACzB,KAAM,WACN,iBAAkB,GAClB,kBAAmB,IACnB,iBAAkB,KACnB,CAAA,GAEW,YAEZ,GAAI,CACF,MAAM+B,EAAM,KAAK,gBAAiB,CAChC,eAAgB/B,EAAK,eACrB,MAAOA,EAAK,aACb,CAAA,EACD,MAAMmC,EAAK,KAAK,KAAM,eAAgB,SAAS,EAC/C,KAAK,kBAAiB,EACtB,KAAK,cAAgB,EACrB,OAAOC,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBD,EAAK,KAAK,KAAM,mBAAoB,OAAO,CAC7C,CACD,EACD,mBAAmBnC,EAAM,CACvBmC,EAAK,KAAK,CACR,MAAO,SACP,KAAM;AAAA;AAAA,mCAEqBnC,EAAK,UAAU;AAAA,kCAChBA,EAAK,MAAM;AAAA,mCACVA,EAAK,UAAU;AAAA,mCACfA,EAAK,OAAO;AAAA,mCACZA,EAAK,OAAO;AAAA,kCACbA,EAAK,GAAG;AAAA,mCACP,KAAK,WAAWA,EAAK,OAAQ,sBAAsB,CAAC;AAAA;AAAA;AAAA,QAI/E,KAAM,MACP,CAAA,CACF,EACD,aAAaqC,EAAG,CACd,OAAIA,GAAK,MAAQ,MAAMA,CAAC,EAAU,IAC3B,IAAI,KAAK,aAAc,EAAC,OAAOA,CAAC,CACxC,CACH,CACF,EA3QOlC,EAAA,CAAA,MAAM,gBAAgB,EAIpBC,EAAA,CAAA,MAAM,iCAAiC,KAUrC,MAAM,mCAAmC,MAAA,CAA0B,YAAA,QAAA,GA+C3DE,EAAA,CAAA,MAAM,wDAAwD,KA9DjF,IAAA,CAAA,KAAA,IAAA,EAgE6B,MAAM,cAhEnCG,EAAA,CAAA,SAAA,EAAAc,EAAA,CAAA,SAAA,EA6EgBC,EAAA,CAAA,QAAQ,GAAG,EA7E3Bc,GAAA,CAAA,SAAA,EAAAC,GAAA,CAAA,SAAA,gFACE,OAAAtB,EAAA,EAAAP,EAqHM,MArHNP,EAqHM,CApHJQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA4B,KAAxB,CAAA,MAAM,MAAM,EAAC,SAAM,EAAA,GAGvBA,EAQM,MARNV,EAQM,GAPJU,EAMS,SAAA,CAZf,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA6B,GAMuBlB,EAAY,aAAAkB,GAAE,MAAM,mCAN3CC,EAAA,2PAAA,CAAA,aAMuBnB,EAAY,YAAA,MAS/BR,EAkGQ,QAlGRT,EAkGQ,aAjGNS,EASW,WAAA,KAAA,CARTA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,EAAA,EACzBA,EAA4B,MAAA,CAAvB,MAAA,CAAoB,MAAA,OAAA,CAAA,CAAA,oBAE3BA,EAWQ,QAAA,CAXD,MAAM,eAAa,CACxBA,EASK,KAAA,KAAA,CARHA,EAAa,UAAT,MAAI,EACRA,EAAY,UAAR,KAAG,EACPA,EAAa,UAAT,MAAI,EACRA,EAAa,UAAT,MAAI,EACRA,EAAY,UAAR,KAAG,EACPA,EAAc,UAAV,OAAK,EACTA,EAAc,UAAV,OAAK,EACTA,EAAW,UAAP,IAAE,UAIVA,EAuEQ,QAAA,KAAA,EAtENG,EAAA,EAAA,EAAAP,EAqEKQ,EA7Gb,KAAAC,EAwC2BuB,EAAY,aAApB1C,QAAXU,EAqEK,KAAA,CArE6B,IAAKV,EAAK,iBAC1Cc,EAA8B,KAAA,KAAAC,EAAvBf,EAAK,UAAU,EAAA,CAAA,EACtBc,EAA0B,KAAA,KAAAC,EAAnBf,EAAK,MAAM,EAAA,CAAA,EAClBc,EAAyC,KAAlC,KAAAC,EAAA2B,EAAA,aAAa1C,EAAK,OAAO,CAAA,EAAA,CAAA,EAChCc,EAAwD,KAAjD,KAAAC,EAAA2B,EAAA,WAAW1C,EAAK,WAAU,YAAA,CAAA,EAAA,CAAA,EACjCc,EAA0B,KAAA,KAAAC,EAAnBf,EAAK,MAAM,EAAA,CAAA,EAGFA,EAAK,UAAO,MAA5BiB,EAAA,EAAAP,EAyBWQ,GAzErB,IAAA,CAAA,EAAA,CAiDYJ,EAWK,KAAA,KAAA,CAVHA,EASO,OAAA,CATD,MAlDpBO,GAkD0B,QAAO,CAAmD,uBAAArB,EAAK,cAAW,KAAyC,aAAAA,EAAK,cAAW,OAK3I,EAAAe,EAAAf,EAAK,cAAW,KAAA,OAAyCA,EAAK,cAAW,KAAA,kBAM/Ec,EAQK,KAAA,KAAA,CAPHA,EAMM,MANNR,EAMM,CALQN,EAAK,eAAjBiB,EAAA,EAAAP,EAA+D,OA/D/EH,EAAAQ,EA+DmDf,EAAK,aAAa,EAAA,CAAA,QACrDU,EAA0C,OAA1CF,EAAgC,KAAG,GACnCM,EAES,SAAA,CAFD,MAAM,4BAA6B,QAAK0B,GAAEE,EAAS,UAAC1C,CAAI,CAAG,EAAA,OAjEnF,EAAAS,CAAA,MAsEYK,EAEK,KAAA,KAAA,CADHA,EAA4E,SAAA,CAApE,MAAM,yBAA0B,QAAK0B,GAAEE,EAAU,WAAC1C,CAAI,CAAG,EAAA,KAvE/E,EAAAuB,CAAA,UA4E+BvB,EAAK,UAAO,MAAjCiB,EAAA,EAAAP,EAaWQ,GAzFrB,IAAA,CAAA,EAAA,CA6EYJ,EAKK,KALLU,EAKK,CAJHmB,EAGcC,EAAA,CAHD,GAAG,YAAY,MAAM,uCAChC,MAAA,CAA2I,mBAAA,UAAA,YAAA,UAAA,QAAA,gBAAA,QAAA,eAAA,YAAA,QAAA,aAAA,QAAA,IA/E3J,QAAAC,EA+E4J,IAE9IlC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAjFdmC,EA+E4J,UAE9I,KAjFd,EAAA,MAmFYhC,EAEK,KAAA,KAAA,CADHA,EAA6B,OAAA,KAAAC,EAApBf,EAAK,KAAK,EAAA,CAAA,IAErBc,EAEK,KAAA,KAAA,CADHA,EAAyE,SAAA,CAAjE,MAAM,wBAAyB,QAAK0B,GAAEE,EAAQ,SAAC1C,CAAI,CAAG,EAAA,KAvF5E,EAAAsC,EAAA,UA4F+BtC,EAAK,UAAO,MAAjCiB,EAAA,EAAAP,EAeWQ,GA3GrB,IAAA,CAAA,EAAA,aA6FYJ,EAKK,KAAA,CALD,QAAQ,KAAG,CACbA,EAGO,OAAA,CAHD,MAAM,mBACV,MAAA,CAA2I,mBAAA,UAAA,YAAA,UAAA,QAAA,gBAAA,QAAA,eAAA,YAAA,QAAA,aAAA,QAAA,GAAC,UAE9I,QAKFA,EAIK,KAAA,KAAA,CAHHA,EAES,SAAA,CAFD,MAAM,8BAA+B,QAAK0B,GAAEE,EAAkB,mBAAC1C,CAAI,CAAG,EAAA,SAvG5F,EAAAuC,EAAA,UAAAd,EAAA,GAAA,EAAA,gBAoHgCH,EAAa,mBAAzCyB,EACmCC,EAAA,CArHvC,IAAA,EAoHgD,KAAM1B,EAAY,aAAG,aAAYoB,EAAS,UAAG,UAAUA,EAAO,QACvG,uBAAOpB,EAAa,cAAA,gDArH3BG,EAAA,GAAA,EAAA"}
=======
<<<<<<< HEAD
<<<<<<<< HEAD:server/public/assets/productionManagement-DC0a36rp.js.map
{"version":3,"file":"productionManagement-DC0a36rp.js","sources":["../../../client/src/views/production/line/LineInstructionModal.vue","../../../client/src/views/production/line/productionManagement.vue"],"sourcesContent":["<template>\n  <!-- ✅ 배경 클릭 시 닫힘 -->\n  <div class=\"modal fade show d-block\" id=\"lineModal\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n\n        <!-- ✅ 모달 헤더 -->\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title mb-0 fw-bold\">라인 선택 - {{ item.pdn_ord_no }}</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n\n        <!-- ✅ 모달 바디 -->\n        <div class=\"modal-body\">\n          <table class=\"table table-sm table-bordered table-hover text-center align-middle\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>라인명</th>\n                <th>상태</th>\n                <th>선택</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- ✅ 사용 가능한 라인 목록 -->\n              <tr\n                v-for=\"line in item.lineList.filter(line => !usedLines.includes(line.ln_no))\"\n                :key=\"line.ln_no\"\n                :class=\"{ 'table-primary': selectedLine === line.ln_no }\"\n              >\n                <td>{{ line.ln_no }}</td>\n                <td>{{ line.ln_nm }}</td>\n                <td>\n                  <span class=\"badge\" :class=\"{\n                    'bg-secondary': line.ln_sts === 'l1',\n                    'bg-info': line.ln_sts === 'l2',\n                    'bg-primary': line.ln_sts === 'l3',\n                    'bg-success': line.ln_sts === 'l4',\n                    'bg-danger': line.ln_sts === 'l5',\n                    'bg-warning text-dark': line.ln_sts === 'l6',\n                    'bg-dark': !['l1', 'l2', 'l3', 'l4', 'l5', 'l6'].includes(line.ln_sts)\n                  }\">\n                    {{\n                      line.ln_sts === 'l1' ? '비가동' :\n                      line.ln_sts === 'l2' ? '대기중' :\n                      line.ln_sts === 'l3' ? '공정중' :\n                      line.ln_sts === 'l4' ? '준비중' :\n                      line.ln_sts === 'l5' ? '수리중' :\n                      line.ln_sts === 'l6' ? '점검중' :\n                      '오류'\n                    }}\n                  </span>\n                </td>\n                <td>\n                  <button\n                    class=\"btn btn-sm btn-outline-primary\"\n                    :disabled=\"line.ln_sts !== 'l1'\"\n                    @click=\"() => {\n                      $emit('set-line', { ...item, selected_line: line.ln_no })\n                      $emit('close')\n                    }\"\n                  >\n                    선택\n                  </button>\n                </td>\n              </tr>\n\n              <!-- ✅ 라인 리스트가 아예 없을 때 -->\n              <tr v-if=\"!item.lineList || item.lineList.length === 0\">\n                <td colspan=\"4\" class=\"text-center text-secondary\">라인 정보가 없습니다.</td>\n              </tr>\n\n              <!-- ✅ 라인은 있는데, 모두 사용 중일 때 -->\n              <tr v-else-if=\"item.lineList.filter(line => !usedLines.includes(line.ln_no)).length === 0\">\n                <td colspan=\"4\" class=\"text-center text-danger\">선택 가능한 라인이 없습니다.</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst filterConditions = {\n  '전체': () => true,\n  '진행중': item => ['l2', 'l3', 'l4'].includes(item.ln_sts),\n  '대기중': item => item.ln_sts === 'l1',\n  '공정지시': item => item.ln_sts === 'l2',\n  '공정현황': item => item.ln_sts === 'l3',\n  '공정완료': item => item.ln_sts === 'l4',\n  '설비점검중': item => ['l5', 'l6'].includes(item.ln_sts),\n};\n\nexport default {\n  props: {\n    item: Object,       // 선택된 지시 항목 객체 (lineList, selected_line 포함 예상)\n    usedLines: Array    // 이미 다른 항목에서 사용된 라인 번호 리스트\n  },\n\n  data() {\n    return {\n      // 선택된 라인 번호 (초기값: item.selected_line 이 있으면 사용, 없으면 '')\n      selectedLine: this.item.selected_line || ''\n    }\n  },\n\n  computed: {\n    /**\n     * 사용 가능한 라인 목록 필터링\n     * - item.lineList: 해당 지시 항목에서 선택 가능한 전체 라인\n     * - usedLines: 이미 다른 항목에서 선택한 라인들\n     * → 겹치지 않는 라인만 보여주기 위함\n     */\n    filteredLineList() {\n      const condition = filterConditions[this.statusFilter] || (() => true);\n      return this.LineList.filter(condition);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff !important;\n}\n</style>\n","<template>\n  <div class=\"container mt-4\">\n    <h2 class=\"mb-4\">생산지시현황</h2>\n\n    <!-- ✅ 지시 상태 필터 드롭다운 -->\n    <div class=\"d-flex justify-content-end mb-3\">\n      <select v-model=\"statusFilter\" class=\"form-select w-auto\">\n        <option value=\"전체\">전체</option>\n        <option value=\"r1+q2\">지시 가능</option>\n        <option value=\"r1+q1\">지시 대기</option>\n        <option value=\"r2\">지시 완료</option>\n        <option value=\"r3\">생산 완료</option>\n      </select>\n    </div>\n\n    <table class=\"table table-bordered text-center\" style=\"min-width: 1200px;\">\n      <colgroup>\n        <col style=\"width: 120px\" />\n        <col style=\"width: 180px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 140px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 100px\" />\n      </colgroup>\n      <thead class=\"table-light\">\n        <tr>\n          <th>지시번호</th>\n          <th>제품명</th>\n          <th>지시수량</th>\n          <th>지시일자</th>\n          <th>지시자</th>\n          <th>재료 입고</th>\n          <th>라인 지정</th>\n          <th>현황</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr v-for=\"item in filteredList\" :key=\"item.pdn_ord_dtl_no\">\n          <td>{{ item.pdn_ord_no }}</td>\n          <td>{{ item.prd_nm }}</td>\n          <td>{{ formatNumber(item.ord_qty) }}</td>\n          <td>{{ dateFormat(item.pdn_ord_dt, 'yyyy-MM-dd') }}</td>\n          <td>{{ item.crt_by }}</td>\n\n          <!-- ✅ r1 상태 -->\n          <template v-if=\"item.ord_sts === 'r1'\">\n            <td>\n              <span class=\"badge\" :class=\"{\n                'bg-warning text-dark': item.mat_ins_sts === 'q1',\n                'bg-success': item.mat_ins_sts === 'q2'\n              }\">\n                {{\n                  item.mat_ins_sts === 'q1' ? '입고대기'\n                    : item.mat_ins_sts === 'q2' ? '입고완료'\n                      : '오류'\n                }}\n              </span>\n            </td>\n            <td>\n              <div class=\"d-flex align-items-center justify-content-center gap-2\">\n                <span v-if=\"item.selected_line\">{{ item.selected_line }}</span>\n                <span v-else class=\"text-muted\">미지정</span>\n                <button class=\"btn btn-outline-secondary\" @click=\"openModal(item)\">\n                  🔍\n                </button>\n              </div>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-primary\" @click=\"assignLine(item)\">지시</button>\n            </td>\n          </template>\n\n          <!-- ✅ r2 상태: 생산지시완료 -->\n          <template v-else-if=\"item.ord_sts === 'r2'\">\n            <td colspan=\"1\">\n              <router-link to=\"/LineMang\" class=\"badge text-dark text-decoration-none\"\n                style=\"background-color: #aee2f8; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산지시완료\n              </router-link>\n            </td>\n            <td>\n              <span>{{ item.ln_no }}</span>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-danger\" @click=\"stopLine(item)\">취소</button>\n            </td>\n          </template>\n\n          <!-- ✅ r3 상태: 생산공정완료 -->\n          <template v-else-if=\"item.ord_sts === 'r3'\">\n            <td colspan=\"2\">\n              <span class=\"badge text-white\"\n                style=\"background-color: #6c757d; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산공정완료\n              </span>\n            </td>\n            <!-- <td>\n              <span>{{ item.ln_no }}</span>\n            </td> -->\n            <td>\n              <button class=\"btn btn-sm btn-outline-info\" @click=\"viewCompleteStatus(item)\">\n                완료현황\n              </button>\n            </td>\n          </template>\n\n        </tr>\n      </tbody>\n\n\n    </table>\n\n    <!-- ✅ 모달 -->\n    <LineInstructionModal v-if=\"showLineModal\" :item=\"selectedItem\" :used-lines=\"usedLines\" @set-line=\"setLine\"\n      @close=\"showLineModal = false\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport useDateUtils from '@/utils/useDates'\nimport LineInstructionModal from './LineInstructionModal.vue'\nimport Swal from 'sweetalert2'\n\nexport default {\n  components: { LineInstructionModal },\n\n  data() {\n    return {\n      instructionList: [],\n      selectedItem: null,\n      showLineModal: false,\n      statusFilter: 'r1+q2'\n    }\n  },\n\n  computed: {\n    dateFormat() {\n      return useDateUtils.dateFormat\n    },\n\n    usedLines() {\n      return this.instructionList\n        .filter(item => item.selected_line)\n        .map(item => item.selected_line)\n    },\n\n    filteredList() {\n  return this.instructionList.filter(item => {\n    if (this.statusFilter === '전체') return true\n\n    const [ord, mat] = this.statusFilter.split('+')\n\n    if (ord && item.ord_sts !== ord) return false\n    if (mat && item.mat_ins_sts !== mat) return false\n\n    return true\n  })\n}\n  },\n\n  created() {\n    this.fetchInstructions()\n  },\n\n  methods: {\n    async fetchInstructions() {\n      const res = await axios.get('/api/prodinst')\n      this.instructionList = res.data.map(row => ({\n        ...row,\n        selected_line: ''\n      }))\n    },\n\n    openModal(item) {\n      this.selectedItem = { ...item }\n      this.selectedItem.lineList = []\n\n      axios.get('/api/lineDrop', {\n        params: { pdn_ord_dtl_no: item.pdn_ord_dtl_no }\n      }).then(res => {\n        this.selectedItem.lineList = res.data\n        this.showLineModal = true\n      })\n    },\n\n    setLine(item) {\n      const index = this.instructionList.findIndex(\n        i => i.pdn_ord_dtl_no === item.pdn_ord_dtl_no\n      )\n      if (index !== -1) {\n        this.instructionList[index].selected_line = item.selected_line\n      }\n    },\n\n    async assignLine(item) {\n      if (!item.selected_line) {\n        return Swal.fire('❗ 알림', '라인을 먼저 지정하세요.', 'warning')\n      }\n      if (item.mat_ins_sts !== 'q2') {\n        return Swal.fire('❗ 알림', '입고완료 상태에서만 지시 가능합니다.', 'info')\n      }\n\n      try {\n        await axios.post('/api/preparingLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('✅ 성공', '지시 완료!', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '지시 중 문제가 발생했습니다.', 'error')\n      }\n    },\n\n    async stopLine(item) {\n      const result = await Swal.fire({\n        title: '지시를 취소하시겠습니까?',\n        text: `제품명: ${item.prd_nm}`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: '예',\n        cancelButtonText: '아니오'\n      })\n\n      if (!result.isConfirmed) return\n\n      try {\n        await axios.post('/api/stopLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('완료', '지시가 취소되었습니다.', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '취소 중 문제가 발생했습니다.', 'error')\n      }\n    },\n    viewCompleteStatus(item) {\n      Swal.fire({\n        title: '✅ 완료현황',\n        html: `\n        <div style=\"text-align:left; line-height:1.7\">\n          <strong>지시ID:</strong> ${item.pdn_ord_no}<br>\n          <strong>제품명:</strong> ${item.prd_nm}<br>\n          <strong>지시수량:</strong> ${item.lo_ord_qty}개<br>\n          <strong>불량수량:</strong> ${item.dft_qty}개<br>\n          <strong>생산수량:</strong> ${item.pdn_qty}개<br>\n          <strong>지시자:</strong> ${item.mgr}<br>\n          <strong>완료일자:</strong> ${this.dateFormat(item.end_tm, 'yyyy-MM-dd   hh시 mm분')}<br>\n\n        </div>\n      `,\n        icon: 'info'\n      })\n    },\n    formatNumber(n) {\n      if (n == null || isNaN(n)) return '-'\n      return new Intl.NumberFormat().format(n)\n    },\n  }\n}\n/*\n  ln.ln_opr_no,\n  ln.ord_qty,\n  ln.pdn_qty,\n  ln.dft_qty,\n  ln.mgr,\n  ln.end_tm,\n*/\n</script>\n\n<style scoped>\nh2 {\n  font-weight: bold;\n  text-align: left;\n}\n\n.table td,\n.table th {\n  vertical-align: middle;\n}\n\n.selected-line {\n  font-weight: 600;\n  color: #198754;\n}\n</style>"],"names":["filterConditions","item","_sfc_main","condition","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","_toDisplayString","$props","_openBlock","_Fragment","_renderList","line","_normalizeClass","$data","_hoisted_8","_hoisted_9","_createCommentVNode","LineInstructionModal","useDateUtils","ord","mat","res","axios","row","index","i","Swal","err","n","_hoisted_10","_hoisted_11","$event","_createStaticVNode","$options","_createVNode","_component_router_link","_withCtx","_createTextVNode","_createBlock","_component_LineInstructionModal"],"mappings":"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"}
========
{"version":3,"file":"productionManagement-jKwqKhwJ.js","sources":["../../../client/src/views/production/line/LineInstructionModal.vue","../../../client/src/views/production/line/productionManagement.vue"],"sourcesContent":["<template>\n  <!-- ✅ 배경 클릭 시 닫힘 -->\n  <div class=\"modal fade show d-block\" id=\"lineModal\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n\n        <!-- ✅ 모달 헤더 -->\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title mb-0 fw-bold\">라인 선택 - {{ item.pdn_ord_no }}</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n\n        <!-- ✅ 모달 바디 -->\n        <div class=\"modal-body\">\n          <table class=\"table table-sm table-bordered table-hover text-center align-middle\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>라인명</th>\n                <th>상태</th>\n                <th>선택</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- ✅ 사용 가능한 라인 목록 -->\n              <tr\n                v-for=\"line in item.lineList.filter(line => !usedLines.includes(line.ln_no))\"\n                :key=\"line.ln_no\"\n                :class=\"{ 'table-primary': selectedLine === line.ln_no }\"\n              >\n                <td>{{ line.ln_no }}</td>\n                <td>{{ line.ln_nm }}</td>\n                <td>\n                  <span class=\"badge\" :class=\"{\n                    'bg-secondary': line.ln_sts === 'l1',\n                    'bg-info': line.ln_sts === 'l2',\n                    'bg-primary': line.ln_sts === 'l3',\n                    'bg-success': line.ln_sts === 'l4',\n                    'bg-danger': line.ln_sts === 'l5',\n                    'bg-warning text-dark': line.ln_sts === 'l6',\n                    'bg-dark': !['l1', 'l2', 'l3', 'l4', 'l5', 'l6'].includes(line.ln_sts)\n                  }\">\n                    {{\n                      line.ln_sts === 'l1' ? '비가동' :\n                      line.ln_sts === 'l2' ? '대기중' :\n                      line.ln_sts === 'l3' ? '공정중' :\n                      line.ln_sts === 'l4' ? '준비중' :\n                      line.ln_sts === 'l5' ? '수리중' :\n                      line.ln_sts === 'l6' ? '점검중' :\n                      '오류'\n                    }}\n                  </span>\n                </td>\n                <td>\n                  <button\n                    class=\"btn btn-sm btn-outline-primary\"\n                    :disabled=\"line.ln_sts !== 'l1'\"\n                    @click=\"() => {\n                      $emit('set-line', { ...item, selected_line: line.ln_no })\n                      $emit('close')\n                    }\"\n                  >\n                    선택\n                  </button>\n                </td>\n              </tr>\n\n              <!-- ✅ 라인 리스트가 아예 없을 때 -->\n              <tr v-if=\"!item.lineList || item.lineList.length === 0\">\n                <td colspan=\"4\" class=\"text-center text-secondary\">라인 정보가 없습니다.</td>\n              </tr>\n\n              <!-- ✅ 라인은 있는데, 모두 사용 중일 때 -->\n              <tr v-else-if=\"item.lineList.filter(line => !usedLines.includes(line.ln_no)).length === 0\">\n                <td colspan=\"4\" class=\"text-center text-danger\">선택 가능한 라인이 없습니다.</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst filterConditions = {\n  '전체': () => true,\n  '진행중': item => ['l2', 'l3', 'l4'].includes(item.ln_sts),\n  '대기중': item => item.ln_sts === 'l1',\n  '공정지시': item => item.ln_sts === 'l2',\n  '공정현황': item => item.ln_sts === 'l3',\n  '공정완료': item => item.ln_sts === 'l4',\n  '설비점검중': item => ['l5', 'l6'].includes(item.ln_sts),\n};\n\nexport default {\n  props: {\n    item: Object,       // 선택된 지시 항목 객체 (lineList, selected_line 포함 예상)\n    usedLines: Array    // 이미 다른 항목에서 사용된 라인 번호 리스트\n  },\n\n  data() {\n    return {\n      // 선택된 라인 번호 (초기값: item.selected_line 이 있으면 사용, 없으면 '')\n      selectedLine: this.item.selected_line || ''\n    }\n  },\n\n  computed: {\n    /**\n     * 사용 가능한 라인 목록 필터링\n     * - item.lineList: 해당 지시 항목에서 선택 가능한 전체 라인\n     * - usedLines: 이미 다른 항목에서 선택한 라인들\n     * → 겹치지 않는 라인만 보여주기 위함\n     */\n    filteredLineList() {\n      const condition = filterConditions[this.statusFilter] || (() => true);\n      return this.LineList.filter(condition);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff !important;\n}\n</style>\n","<template>\n  <div class=\"container mt-4\">\n    <h2 class=\"mb-4\">생산지시현황</h2>\n\n    <!-- ✅ 지시 상태 필터 드롭다운 -->\n    <div class=\"d-flex justify-content-end mb-3\">\n      <select v-model=\"statusFilter\" class=\"form-select w-auto\">\n        <option value=\"전체\">전체</option>\n        <option value=\"r1+q2\">지시 가능</option>\n        <option value=\"r1+q1\">지시 대기</option>\n        <option value=\"r2\">지시 완료</option>\n        <option value=\"r3\">생산 완료</option>\n      </select>\n    </div>\n\n    <table class=\"table table-bordered text-center\" style=\"min-width: 1200px;\">\n      <colgroup>\n        <col style=\"width: 120px\" />\n        <col style=\"width: 180px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 140px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 100px\" />\n      </colgroup>\n      <thead class=\"table-light\">\n        <tr>\n          <th>지시번호</th>\n          <th>제품명</th>\n          <th>지시수량</th>\n          <th>지시일자</th>\n          <th>지시자</th>\n          <th>재료 입고</th>\n          <th>라인 지정</th>\n          <th>현황</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr v-for=\"item in filteredList\" :key=\"item.pdn_ord_dtl_no\">\n          <td>{{ item.pdn_ord_no }}</td>\n          <td>{{ item.prd_nm }}</td>\n          <td>{{ formatNumber(item.ord_qty) }}</td>\n          <td>{{ dateFormat(item.pdn_ord_dt, 'yyyy-MM-dd') }}</td>\n          <td>{{ item.crt_by }}</td>\n\n          <!-- ✅ r1 상태 -->\n          <template v-if=\"item.ord_sts === 'r1'\">\n            <td>\n              <span class=\"badge\" :class=\"{\n                'bg-warning text-dark': item.mat_ins_sts === 'q1',\n                'bg-success': item.mat_ins_sts === 'q2'\n              }\">\n                {{\n                  item.mat_ins_sts === 'q1' ? '입고대기'\n                    : item.mat_ins_sts === 'q2' ? '입고완료'\n                      : '오류'\n                }}\n              </span>\n            </td>\n            <td>\n              <div class=\"d-flex align-items-center justify-content-center gap-2\">\n                <span v-if=\"item.selected_line\">{{ item.selected_line }}</span>\n                <span v-else class=\"text-muted\">미지정</span>\n                <button class=\"btn btn-outline-secondary\" @click=\"openModal(item)\">\n                  🔍\n                </button>\n              </div>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-primary\" @click=\"assignLine(item)\">지시</button>\n            </td>\n          </template>\n\n          <!-- ✅ r2 상태: 생산지시완료 -->\n          <template v-else-if=\"item.ord_sts === 'r2'\">\n            <td colspan=\"1\">\n              <router-link to=\"/LineMang\" class=\"badge text-dark text-decoration-none\"\n                style=\"background-color: #aee2f8; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산지시완료\n              </router-link>\n            </td>\n            <td>\n              <span>{{ item.ln_no }}</span>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-danger\" @click=\"stopLine(item)\">취소</button>\n            </td>\n          </template>\n\n          <!-- ✅ r3 상태: 생산공정완료 -->\n          <template v-else-if=\"item.ord_sts === 'r3'\">\n            <td colspan=\"2\">\n              <span class=\"badge text-white\"\n                style=\"background-color: #6c757d; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산공정완료\n              </span>\n            </td>\n            <!-- <td>\n              <span>{{ item.ln_no }}</span>\n            </td> -->\n            <td>\n              <button class=\"btn btn-sm btn-outline-info\" @click=\"viewCompleteStatus(item)\">\n                완료현황\n              </button>\n            </td>\n          </template>\n\n        </tr>\n      </tbody>\n\n\n    </table>\n\n    <!-- ✅ 모달 -->\n    <LineInstructionModal v-if=\"showLineModal\" :item=\"selectedItem\" :used-lines=\"usedLines\" @set-line=\"setLine\"\n      @close=\"showLineModal = false\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport useDateUtils from '@/utils/useDates'\nimport LineInstructionModal from './LineInstructionModal.vue'\nimport Swal from 'sweetalert2'\n\nexport default {\n  components: { LineInstructionModal },\n\n  data() {\n    return {\n      instructionList: [],\n      selectedItem: null,\n      showLineModal: false,\n      statusFilter: 'r1+q2'\n    }\n  },\n\n  computed: {\n    dateFormat() {\n      return useDateUtils.dateFormat\n    },\n\n    usedLines() {\n      return this.instructionList\n        .filter(item => item.selected_line)\n        .map(item => item.selected_line)\n    },\n\n    filteredList() {\n  return this.instructionList.filter(item => {\n    if (this.statusFilter === '전체') return true\n\n    const [ord, mat] = this.statusFilter.split('+')\n\n    if (ord && item.ord_sts !== ord) return false\n    if (mat && item.mat_ins_sts !== mat) return false\n\n    return true\n  })\n}\n  },\n\n  created() {\n    this.fetchInstructions()\n  },\n\n  methods: {\n    async fetchInstructions() {\n      const res = await axios.get('/api/prodinst')\n      this.instructionList = res.data.map(row => ({\n        ...row,\n        selected_line: ''\n      }))\n    },\n\n    openModal(item) {\n      this.selectedItem = { ...item }\n      this.selectedItem.lineList = []\n\n      axios.get('/api/lineDrop', {\n        params: { pdn_ord_dtl_no: item.pdn_ord_dtl_no }\n      }).then(res => {\n        this.selectedItem.lineList = res.data\n        this.showLineModal = true\n      })\n    },\n\n    setLine(item) {\n      const index = this.instructionList.findIndex(\n        i => i.pdn_ord_dtl_no === item.pdn_ord_dtl_no\n      )\n      if (index !== -1) {\n        this.instructionList[index].selected_line = item.selected_line\n      }\n    },\n\n    async assignLine(item) {\n      if (!item.selected_line) {\n        return Swal.fire('❗ 알림', '라인을 먼저 지정하세요.', 'warning')\n      }\n      if (item.mat_ins_sts !== 'q2') {\n        return Swal.fire('❗ 알림', '입고완료 상태에서만 지시 가능합니다.', 'info')\n      }\n\n      try {\n        await axios.post('/api/preparingLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('✅ 성공', '지시 완료!', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '지시 중 문제가 발생했습니다.', 'error')\n      }\n    },\n\n    async stopLine(item) {\n      const result = await Swal.fire({\n        title: '지시를 취소하시겠습니까?',\n        text: `제품명: ${item.prd_nm}`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: '예',\n        cancelButtonText: '아니오'\n      })\n\n      if (!result.isConfirmed) return\n\n      try {\n        await axios.post('/api/stopLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('완료', '지시가 취소되었습니다.', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '취소 중 문제가 발생했습니다.', 'error')\n      }\n    },\n    viewCompleteStatus(item) {\n      Swal.fire({\n        title: '✅ 완료현황',\n        html: `\n        <div style=\"text-align:left; line-height:1.7\">\n          <strong>지시ID:</strong> ${item.pdn_ord_no}<br>\n          <strong>제품명:</strong> ${item.prd_nm}<br>\n          <strong>지시수량:</strong> ${item.lo_ord_qty}개<br>\n          <strong>불량수량:</strong> ${item.dft_qty}개<br>\n          <strong>생산수량:</strong> ${item.pdn_qty}개<br>\n          <strong>지시자:</strong> ${item.mgr}<br>\n          <strong>완료일자:</strong> ${this.dateFormat(item.end_tm, 'yyyy-MM-dd   hh시 mm분')}<br>\n\n        </div>\n      `,\n        icon: 'info'\n      })\n    },\n    formatNumber(n) {\n      if (n == null || isNaN(n)) return '-'\n      return new Intl.NumberFormat().format(n)\n    },\n  }\n}\n/*\n  ln.ln_opr_no,\n  ln.ord_qty,\n  ln.pdn_qty,\n  ln.dft_qty,\n  ln.mgr,\n  ln.end_tm,\n*/\n</script>\n\n<style scoped>\nh2 {\n  font-weight: bold;\n  text-align: left;\n}\n\n.table td,\n.table th {\n  vertical-align: middle;\n}\n\n.selected-line {\n  font-weight: 600;\n  color: #198754;\n}\n</style>"],"names":["filterConditions","item","_sfc_main","condition","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","_toDisplayString","$props","_openBlock","_Fragment","_renderList","line","_normalizeClass","$data","_hoisted_8","_hoisted_9","_createCommentVNode","LineInstructionModal","useDateUtils","ord","mat","res","axios","row","index","i","Swal","err","n","_hoisted_10","_hoisted_11","$event","_createStaticVNode","$options","_createVNode","_component_router_link","_withCtx","_createTextVNode","_createBlock","_component_LineInstructionModal"],"mappings":"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"}
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/productionManagement-jKwqKhwJ.js.map
=======
{"version":3,"file":"productionManagement-jKwqKhwJ.js","sources":["../../../client/src/views/production/line/LineInstructionModal.vue","../../../client/src/views/production/line/productionManagement.vue"],"sourcesContent":["<template>\n  <!-- ✅ 배경 클릭 시 닫힘 -->\n  <div class=\"modal fade show d-block\" id=\"lineModal\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n\n        <!-- ✅ 모달 헤더 -->\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title mb-0 fw-bold\">라인 선택 - {{ item.pdn_ord_no }}</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n\n        <!-- ✅ 모달 바디 -->\n        <div class=\"modal-body\">\n          <table class=\"table table-sm table-bordered table-hover text-center align-middle\">\n            <thead class=\"table-light\">\n              <tr>\n                <th>라인번호</th>\n                <th>라인명</th>\n                <th>상태</th>\n                <th>선택</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- ✅ 사용 가능한 라인 목록 -->\n              <tr\n                v-for=\"line in item.lineList.filter(line => !usedLines.includes(line.ln_no))\"\n                :key=\"line.ln_no\"\n                :class=\"{ 'table-primary': selectedLine === line.ln_no }\"\n              >\n                <td>{{ line.ln_no }}</td>\n                <td>{{ line.ln_nm }}</td>\n                <td>\n                  <span class=\"badge\" :class=\"{\n                    'bg-secondary': line.ln_sts === 'l1',\n                    'bg-info': line.ln_sts === 'l2',\n                    'bg-primary': line.ln_sts === 'l3',\n                    'bg-success': line.ln_sts === 'l4',\n                    'bg-danger': line.ln_sts === 'l5',\n                    'bg-warning text-dark': line.ln_sts === 'l6',\n                    'bg-dark': !['l1', 'l2', 'l3', 'l4', 'l5', 'l6'].includes(line.ln_sts)\n                  }\">\n                    {{\n                      line.ln_sts === 'l1' ? '비가동' :\n                      line.ln_sts === 'l2' ? '대기중' :\n                      line.ln_sts === 'l3' ? '공정중' :\n                      line.ln_sts === 'l4' ? '준비중' :\n                      line.ln_sts === 'l5' ? '수리중' :\n                      line.ln_sts === 'l6' ? '점검중' :\n                      '오류'\n                    }}\n                  </span>\n                </td>\n                <td>\n                  <button\n                    class=\"btn btn-sm btn-outline-primary\"\n                    :disabled=\"line.ln_sts !== 'l1'\"\n                    @click=\"() => {\n                      $emit('set-line', { ...item, selected_line: line.ln_no })\n                      $emit('close')\n                    }\"\n                  >\n                    선택\n                  </button>\n                </td>\n              </tr>\n\n              <!-- ✅ 라인 리스트가 아예 없을 때 -->\n              <tr v-if=\"!item.lineList || item.lineList.length === 0\">\n                <td colspan=\"4\" class=\"text-center text-secondary\">라인 정보가 없습니다.</td>\n              </tr>\n\n              <!-- ✅ 라인은 있는데, 모두 사용 중일 때 -->\n              <tr v-else-if=\"item.lineList.filter(line => !usedLines.includes(line.ln_no)).length === 0\">\n                <td colspan=\"4\" class=\"text-center text-danger\">선택 가능한 라인이 없습니다.</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst filterConditions = {\n  '전체': () => true,\n  '진행중': item => ['l2', 'l3', 'l4'].includes(item.ln_sts),\n  '대기중': item => item.ln_sts === 'l1',\n  '공정지시': item => item.ln_sts === 'l2',\n  '공정현황': item => item.ln_sts === 'l3',\n  '공정완료': item => item.ln_sts === 'l4',\n  '설비점검중': item => ['l5', 'l6'].includes(item.ln_sts),\n};\n\nexport default {\n  props: {\n    item: Object,       // 선택된 지시 항목 객체 (lineList, selected_line 포함 예상)\n    usedLines: Array    // 이미 다른 항목에서 사용된 라인 번호 리스트\n  },\n\n  data() {\n    return {\n      // 선택된 라인 번호 (초기값: item.selected_line 이 있으면 사용, 없으면 '')\n      selectedLine: this.item.selected_line || ''\n    }\n  },\n\n  computed: {\n    /**\n     * 사용 가능한 라인 목록 필터링\n     * - item.lineList: 해당 지시 항목에서 선택 가능한 전체 라인\n     * - usedLines: 이미 다른 항목에서 선택한 라인들\n     * → 겹치지 않는 라인만 보여주기 위함\n     */\n    filteredLineList() {\n      const condition = filterConditions[this.statusFilter] || (() => true);\n      return this.LineList.filter(condition);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.table-primary {\n  background-color: #cce5ff !important;\n}\n</style>\n","<template>\n  <div class=\"container mt-4\">\n    <h2 class=\"mb-4\">생산지시현황</h2>\n\n    <!-- ✅ 지시 상태 필터 드롭다운 -->\n    <div class=\"d-flex justify-content-end mb-3\">\n      <select v-model=\"statusFilter\" class=\"form-select w-auto\">\n        <option value=\"전체\">전체</option>\n        <option value=\"r1+q2\">지시 가능</option>\n        <option value=\"r1+q1\">지시 대기</option>\n        <option value=\"r2\">지시 완료</option>\n        <option value=\"r3\">생산 완료</option>\n      </select>\n    </div>\n\n    <table class=\"table table-bordered text-center\" style=\"min-width: 1200px;\">\n      <colgroup>\n        <col style=\"width: 120px\" />\n        <col style=\"width: 180px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 140px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 120px\" />\n        <col style=\"width: 100px\" />\n      </colgroup>\n      <thead class=\"table-light\">\n        <tr>\n          <th>지시번호</th>\n          <th>제품명</th>\n          <th>지시수량</th>\n          <th>지시일자</th>\n          <th>지시자</th>\n          <th>재료 입고</th>\n          <th>라인 지정</th>\n          <th>현황</th>\n        </tr>\n      </thead>\n\n      <tbody>\n        <tr v-for=\"item in filteredList\" :key=\"item.pdn_ord_dtl_no\">\n          <td>{{ item.pdn_ord_no }}</td>\n          <td>{{ item.prd_nm }}</td>\n          <td>{{ formatNumber(item.ord_qty) }}</td>\n          <td>{{ dateFormat(item.pdn_ord_dt, 'yyyy-MM-dd') }}</td>\n          <td>{{ item.crt_by }}</td>\n\n          <!-- ✅ r1 상태 -->\n          <template v-if=\"item.ord_sts === 'r1'\">\n            <td>\n              <span class=\"badge\" :class=\"{\n                'bg-warning text-dark': item.mat_ins_sts === 'q1',\n                'bg-success': item.mat_ins_sts === 'q2'\n              }\">\n                {{\n                  item.mat_ins_sts === 'q1' ? '입고대기'\n                    : item.mat_ins_sts === 'q2' ? '입고완료'\n                      : '오류'\n                }}\n              </span>\n            </td>\n            <td>\n              <div class=\"d-flex align-items-center justify-content-center gap-2\">\n                <span v-if=\"item.selected_line\">{{ item.selected_line }}</span>\n                <span v-else class=\"text-muted\">미지정</span>\n                <button class=\"btn btn-outline-secondary\" @click=\"openModal(item)\">\n                  🔍\n                </button>\n              </div>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-primary\" @click=\"assignLine(item)\">지시</button>\n            </td>\n          </template>\n\n          <!-- ✅ r2 상태: 생산지시완료 -->\n          <template v-else-if=\"item.ord_sts === 'r2'\">\n            <td colspan=\"1\">\n              <router-link to=\"/LineMang\" class=\"badge text-dark text-decoration-none\"\n                style=\"background-color: #aee2f8; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산지시완료\n              </router-link>\n            </td>\n            <td>\n              <span>{{ item.ln_no }}</span>\n            </td>\n            <td>\n              <button class=\"btn btn-sm btn-danger\" @click=\"stopLine(item)\">취소</button>\n            </td>\n          </template>\n\n          <!-- ✅ r3 상태: 생산공정완료 -->\n          <template v-else-if=\"item.ord_sts === 'r3'\">\n            <td colspan=\"2\">\n              <span class=\"badge text-white\"\n                style=\"background-color: #6c757d; font-size: 0.95rem; padding: 0.5rem 1.2rem; display: inline-block; min-width: 110px; text-align: center;\">\n                생산공정완료\n              </span>\n            </td>\n            <!-- <td>\n              <span>{{ item.ln_no }}</span>\n            </td> -->\n            <td>\n              <button class=\"btn btn-sm btn-outline-info\" @click=\"viewCompleteStatus(item)\">\n                완료현황\n              </button>\n            </td>\n          </template>\n\n        </tr>\n      </tbody>\n\n\n    </table>\n\n    <!-- ✅ 모달 -->\n    <LineInstructionModal v-if=\"showLineModal\" :item=\"selectedItem\" :used-lines=\"usedLines\" @set-line=\"setLine\"\n      @close=\"showLineModal = false\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport useDateUtils from '@/utils/useDates'\nimport LineInstructionModal from './LineInstructionModal.vue'\nimport Swal from 'sweetalert2'\n\nexport default {\n  components: { LineInstructionModal },\n\n  data() {\n    return {\n      instructionList: [],\n      selectedItem: null,\n      showLineModal: false,\n      statusFilter: 'r1+q2'\n    }\n  },\n\n  computed: {\n    dateFormat() {\n      return useDateUtils.dateFormat\n    },\n\n    usedLines() {\n      return this.instructionList\n        .filter(item => item.selected_line)\n        .map(item => item.selected_line)\n    },\n\n    filteredList() {\n  return this.instructionList.filter(item => {\n    if (this.statusFilter === '전체') return true\n\n    const [ord, mat] = this.statusFilter.split('+')\n\n    if (ord && item.ord_sts !== ord) return false\n    if (mat && item.mat_ins_sts !== mat) return false\n\n    return true\n  })\n}\n  },\n\n  created() {\n    this.fetchInstructions()\n  },\n\n  methods: {\n    async fetchInstructions() {\n      const res = await axios.get('/api/prodinst')\n      this.instructionList = res.data.map(row => ({\n        ...row,\n        selected_line: ''\n      }))\n    },\n\n    openModal(item) {\n      this.selectedItem = { ...item }\n      this.selectedItem.lineList = []\n\n      axios.get('/api/lineDrop', {\n        params: { pdn_ord_dtl_no: item.pdn_ord_dtl_no }\n      }).then(res => {\n        this.selectedItem.lineList = res.data\n        this.showLineModal = true\n      })\n    },\n\n    setLine(item) {\n      const index = this.instructionList.findIndex(\n        i => i.pdn_ord_dtl_no === item.pdn_ord_dtl_no\n      )\n      if (index !== -1) {\n        this.instructionList[index].selected_line = item.selected_line\n      }\n    },\n\n    async assignLine(item) {\n      if (!item.selected_line) {\n        return Swal.fire('❗ 알림', '라인을 먼저 지정하세요.', 'warning')\n      }\n      if (item.mat_ins_sts !== 'q2') {\n        return Swal.fire('❗ 알림', '입고완료 상태에서만 지시 가능합니다.', 'info')\n      }\n\n      try {\n        await axios.post('/api/preparingLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('✅ 성공', '지시 완료!', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '지시 중 문제가 발생했습니다.', 'error')\n      }\n    },\n\n    async stopLine(item) {\n      const result = await Swal.fire({\n        title: '지시를 취소하시겠습니까?',\n        text: `제품명: ${item.prd_nm}`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: '예',\n        cancelButtonText: '아니오'\n      })\n\n      if (!result.isConfirmed) return\n\n      try {\n        await axios.post('/api/stopLine', {\n          pdn_ord_dtl_no: item.pdn_ord_dtl_no,\n          ln_no: item.selected_line\n        })\n        await Swal.fire('완료', '지시가 취소되었습니다.', 'success')\n        this.fetchInstructions()\n        this.showLineModal = false\n      } catch (err) {\n        console.error(err)\n        Swal.fire('오류', '취소 중 문제가 발생했습니다.', 'error')\n      }\n    },\n    viewCompleteStatus(item) {\n      Swal.fire({\n        title: '✅ 완료현황',\n        html: `\n        <div style=\"text-align:left; line-height:1.7\">\n          <strong>지시ID:</strong> ${item.pdn_ord_no}<br>\n          <strong>제품명:</strong> ${item.prd_nm}<br>\n          <strong>지시수량:</strong> ${item.lo_ord_qty}개<br>\n          <strong>불량수량:</strong> ${item.dft_qty}개<br>\n          <strong>생산수량:</strong> ${item.pdn_qty}개<br>\n          <strong>지시자:</strong> ${item.mgr}<br>\n          <strong>완료일자:</strong> ${this.dateFormat(item.end_tm, 'yyyy-MM-dd   hh시 mm분')}<br>\n\n        </div>\n      `,\n        icon: 'info'\n      })\n    },\n    formatNumber(n) {\n      if (n == null || isNaN(n)) return '-'\n      return new Intl.NumberFormat().format(n)\n    },\n  }\n}\n/*\n  ln.ln_opr_no,\n  ln.ord_qty,\n  ln.pdn_qty,\n  ln.dft_qty,\n  ln.mgr,\n  ln.end_tm,\n*/\n</script>\n\n<style scoped>\nh2 {\n  font-weight: bold;\n  text-align: left;\n}\n\n.table td,\n.table th {\n  vertical-align: middle;\n}\n\n.selected-line {\n  font-weight: 600;\n  color: #198754;\n}\n</style>"],"names":["filterConditions","item","_sfc_main","condition","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","_toDisplayString","$props","_openBlock","_Fragment","_renderList","line","_normalizeClass","$data","_hoisted_8","_hoisted_9","_createCommentVNode","LineInstructionModal","useDateUtils","ord","mat","res","axios","row","index","i","Swal","err","n","_hoisted_10","_hoisted_11","$event","_createStaticVNode","$options","_createVNode","_component_router_link","_withCtx","_createTextVNode","_createBlock","_component_LineInstructionModal"],"mappings":"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"}
>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b
>>>>>>> origin/Eunae
