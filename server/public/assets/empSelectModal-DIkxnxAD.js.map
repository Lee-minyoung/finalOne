{"version":3,"file":"empSelectModal-DIkxnxAD.js","sources":["../../../client/src/views/modal/empSelectModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal fade show d-block\" style=\"background: rgba(0,0,0,0.5); z-index: 1051;\" @click.self=\"$emit('close')\">\n    <div class=\"modal-dialog modal-lg\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">사원 선택</h5>\n          <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <div class=\"d-flex gap-2\" style=\"width: 450px;\">\n              <input type=\"text\" class=\"form-control\" style=\"width: 60%\" placeholder=\"사원명 검색\" v-model=\"search\" />\n              <select class=\"form-select form-control\" v-model=\"selectedFilter\" style=\"width: 40%\">\n                <option value=\"\">전체</option>\n                <option v-for=\"dept in deptInfo\" :key=\"dept.dept_no\" :value=\"dept.dept_nm\">{{ dept.dept_nm }}</option>\n              </select>\n            </div>\n\n            <button class=\"btn btn-sm btn-primary\" @click=\"$emit('select-emp', selectedEmp)\">사원 등록</button>\n          </div>\n          <div class=\"table-container\">\n            <table class=\"table table-sm table-bordered text-center\">\n              <thead class=\"table-light\">\n                <tr>\n                  <th class=\"w-10\">사원번호</th>\n                  <th class=\"w-10\">이름</th>\n                  <th class=\"w-10\">부서명</th>\n                  <th class=\"w-10\">직급명</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"item in filteredEmp\" :key=\"item.emp_no\" @click=\"toggleEmpSelection(item)\"\n                  :class=\"{ 'table-primary': isSelected(item) }\" style=\"cursor: pointer;\">\n                  <td class=\"w-10\">{{ item.emp_no }}</td>\n                  <td class=\"w-10\">{{ item.nm }}</td>\n                  <td class=\"w-10\">{{ item.dept_nm }}</td>\n                  <td class=\"w-10\">{{ item.pst_nm }}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  props: {\n    empList: Array,   // 전체 사원 목록 \n    selected: Array  // 이미 등록된(선택된) 사원번호\n  },\n  data() {\n    return {\n      search: '',\n      selectedEmp: null,\n      selectedFilter: \"\",\n\n      deptInfo: [], // 부서 select option 만드는 데이터\n    }\n  },\n  computed: {\n    filteredEmp() {\n      if (!this.empList) return []\n      return this.empList.filter(emp => {\n        // 검색어 필터링\n        const matchesSearch = !this.search || emp.nm.toLowerCase().includes(this.search.toLowerCase());\n        // select 필터링\n        const matchesFilter = this.selectedFilter === \"\" || (emp.dept_nm === this.selectedFilter);\n        return matchesSearch && matchesFilter;\n      });\n    }\n  },\n  created() {\n    this.selectedEmp = this.selected ? { emp_no: this.selected } : null;  // 선택 상태 초기화(기존에 선택된 설비가 있다면 selectedEqp에 넣어줌)\n    this.getDeptInfo(); // 부서정보 가져오기\n  },\n  methods: {\n    async getDeptInfo() {\n      let result = await axios.get(`/api/deptModal`)\n        .catch(err => console.log(err));\n      this.deptInfo = result.data;\n    },\n    toggleEmpSelection(item) {\n      if (this.selectedEmp && this.selectedEmp.emp_no === item.emp_no) {\n        this.selectedEmp = null; // 선택 해제\n      } else {\n        this.selectedEmp = { emp_no: item.emp_no, nm: item.nm }; // 선택한 설비로 대체\n      }\n    },\n    isSelected(item) {\n      return this.selectedEmp && this.selectedEmp.emp_no === item.emp_no;\n    }\n  },\n}\n</script>\n\n<style scoped>\n@import '@/assets/styles/base-table.css';\n</style>"],"names":["_sfc_main","emp","matchesSearch","matchesFilter","result","axios","err","item","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_createElementBlock","_cache","_withModifiers","_ctx","_createElementVNode","_hoisted_6","$event","$data","_openBlock","_Fragment","_renderList","dept","$options","_normalizeClass","_toDisplayString"],"mappings":"4HAkDA,MAAKA,EAAU,CACb,MAAO,CACL,QAAS,MACT,SAAU,KACX,EACD,MAAO,CACL,MAAO,CACL,OAAQ,GACR,YAAa,KACb,eAAgB,GAEhB,SAAU,CAAE,CACd,CACD,EACD,SAAU,CACR,aAAc,CACZ,OAAK,KAAK,QACH,KAAK,QAAQ,OAAOC,GAAO,CAEhC,MAAMC,EAAgB,CAAC,KAAK,QAAUD,EAAI,GAAG,YAAW,EAAG,SAAS,KAAK,OAAO,YAAW,CAAE,EAEvFE,EAAgB,KAAK,iBAAmB,IAAOF,EAAI,UAAY,KAAK,eAC1E,OAAOC,GAAiBC,CAC1B,CAAC,EAPyB,CAAA,CAQ5B,CACD,EACD,SAAU,CACR,KAAK,YAAc,KAAK,SAAW,CAAE,OAAQ,KAAK,QAAW,EAAE,KAC/D,KAAK,YAAW,CACjB,EACD,QAAS,CACP,MAAM,aAAc,CAClB,IAAIC,EAAS,MAAMC,EAAM,IAAI,gBAAgB,EAC1C,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAChC,KAAK,SAAWF,EAAO,IACxB,EACD,mBAAmBG,EAAM,CACnB,KAAK,aAAe,KAAK,YAAY,SAAWA,EAAK,OACvD,KAAK,YAAc,KAEnB,KAAK,YAAc,CAAE,OAAQA,EAAK,OAAQ,GAAIA,EAAK,GAEtD,EACD,WAAWA,EAAM,CACf,OAAO,KAAK,aAAe,KAAK,YAAY,SAAWA,EAAK,MAC9D,CACD,CACH,EA/FSC,EAAA,CAAA,MAAM,uBAAuB,EAC3BC,EAAA,CAAA,MAAM,eAAe,EACnBC,EAAA,CAAA,MAAM,cAAc,EAIpBC,EAAA,CAAA,MAAM,YAAY,EAChBC,EAAA,CAAA,MAAM,wDAAwD,KAC5D,MAAM,eAAe,MAAA,CAAqB,MAAA,OAAA,GAV3DC,EAAA,CAAA,OAAA,EAoBeC,EAAA,CAAA,MAAM,iBAAiB,EACnBC,EAAA,CAAA,MAAM,2CAA2C,EArBpEC,EAAA,CAAA,SAAA,EAiCsBC,EAAA,CAAA,MAAM,MAAM,EACZC,EAAA,CAAA,MAAM,MAAM,EACZC,EAAA,CAAA,MAAM,MAAM,EACZC,EAAA,CAAA,MAAM,MAAM,qCAnChCC,EA2CM,MAAA,CA3CD,MAAM,0BAA0B,MAAA,CAAmD,WAAA,kBAAA,UAAA,MAAA,EAAE,QAAKC,EAAA,CAAA,IAAAA,EAAA,CAAA,EADjGC,KACwGC,EAAK,MAAA,OAAA,EAAA,CAAA,MAAA,CAAA,KACzGC,EAyCM,MAzCNjB,EAyCM,CAxCJiB,EAuCM,MAvCNhB,EAuCM,CAtCJgB,EAGM,MAHNf,EAGM,CAFJY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAAkC,KAA9B,CAAA,MAAM,aAAa,EAAC,QAAK,EAAA,GAC7BA,EAAyE,SAAA,CAAjE,KAAK,SAAS,MAAM,YAAa,uBAAOD,EAAK,MAAA,OAAA,OAEvDC,EAiCM,MAjCNd,EAiCM,CAhCJc,EAUM,MAVNb,EAUM,CATJa,EAMM,MANNC,EAMM,GALJD,EAAmG,QAAA,CAA5F,KAAK,OAAO,MAAM,eAAe,MAAA,CAAkB,MAAA,KAAA,EAAC,YAAY,SAXrF,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAWuGC,EAAM,OAAAD,kBAANC,EAAM,MAAA,MAC/FH,EAGS,SAAA,CAHD,MAAM,2BAZ5B,sBAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAYgEC,EAAc,eAAAD,GAAE,MAAA,CAAkB,MAAA,KAAA,IAClFL,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAA4B,SAApB,CAAA,MAAM,EAAE,EAAC,KAAE,EAAA,IACnBI,EAAA,EAAA,EAAAR,EAAsGS,EAdtH,KAAAC,EAcuCH,EAAQ,SAAhBI,QAAfX,EAAsG,SAAA,CAApE,IAAKW,EAAK,QAAU,MAAOA,EAAK,WAAYA,EAAK,OAAO,EAd1G,EAAAnB,CAAA,oBAYgEe,EAAc,cAAA,MAMlEH,EAA+F,SAAA,CAAvF,MAAM,yBAA0B,QAAKH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAEH,EAAK,MAAA,aAAeI,EAAW,WAAA,IAAG,OAAK,IAExFH,EAoBM,MApBNX,EAoBM,CAnBJW,EAkBQ,QAlBRV,EAkBQ,aAjBNU,EAOQ,QAAA,CAPD,MAAM,eAAa,CACxBA,EAKK,KAAA,KAAA,CAJHA,EAA0B,KAAtB,CAAA,MAAM,MAAM,EAAC,MAAI,EACrBA,EAAwB,KAApB,CAAA,MAAM,MAAM,EAAC,IAAE,EACnBA,EAAyB,KAArB,CAAA,MAAM,MAAM,EAAC,KAAG,EACpBA,EAAyB,KAArB,CAAA,MAAM,QAAO,KAAG,UAGxBA,EAQQ,QAAA,KAAA,EAPNI,EAAA,EAAA,EAAAR,EAMKS,EArCrB,KAAAC,EA+BmCE,EAAW,YAAnB1B,QAAXc,EAMK,KAAA,CAN4B,IAAKd,EAAK,OAAS,QAAKoB,GAAEM,EAAkB,mBAAC1B,CAAI,EAC/E,MAhCnB2B,EAAA,CAAA,gBAgC6CD,EAAU,WAAC1B,CAAI,EAAA,EAAK,MAAA,CAAwB,OAAA,SAAA,IACvEkB,EAAuC,KAAvCR,EAAoBkB,EAAA5B,EAAK,MAAM,EAAA,CAAA,EAC/BkB,EAAmC,KAAnCP,EAAoBiB,EAAA5B,EAAK,EAAE,EAAA,CAAA,EAC3BkB,EAAwC,KAAxCN,EAAoBgB,EAAA5B,EAAK,OAAO,EAAA,CAAA,EAChCkB,EAAuC,KAAvCL,EAAoBe,EAAA5B,EAAK,MAAM,EAAA,CAAA,CApCjD,EAAA,GAAAS,CAAA"}