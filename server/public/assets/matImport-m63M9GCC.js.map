{"version":3,"file":"matImport-m63M9GCC.js","sources":["../../../client/src/views/inventory/matImport.vue"],"sourcesContent":["\n<template>\n\n  <div class=\"col-md-10 p-4\">\n    <h4 class=\"mb-4\">입고처리</h4>\n    <!-- 출하지시 입력 폼 -->\n    <div class=\"row mb-3 g-3\"> \n      <tr class=\"mb-4\">\n        <th style=\"width: 20%; min-width: 120px; border:none;\">수령자</th>\n        <td colspan=\"3\" style=\"border:none;\">\n          <select v-model=\"rcvr\" class=\"form-select\">\n            <option value=1>수령자1</option>\n            <option value=2>수령자2</option>\n            <option value=3>수령자3</option>\n          </select>\n        </td>\n      </tr>\n      <tr class=\"mb-4\">\n        <th style=\"width: 20%; min-width: 120px; border:none;\">처리자</th>\n        <td colspan=\"3\" style=\"border:none;\">\n          <select v-model=\"prcsr\" class=\"form-select\">\n            <option value=1>처리자1</option>\n            <option value=2>처리자2</option>\n            <option value=3>처리자3</option>\n          </select>\n        </td>\n      </tr>\n\n\n     \n      <tr class=\"mb-4\">\n        <th style=\"width: 20%; min-width: 120px; border:none;\">창고번호</th>\n        <td colspan=\"3\" style=\"border:none;\">\n          <input class=\"form-control\" type=\"text\" placeholder=\"예담창고\" aria-label=\"Disabled input example\" disabled>\n        </td>\n      </tr>\n\n      <tr class=\"mb-4\">\n        <th style=\"width: 20%; min-width: 120px; border:none;\">수령방법</th>\n        <td colspan=\"3\" style=\"border:none;\">\n          <select class=\"form-select\" v-model=\"rcvrMth\">\n            <option value=1>수령방법1</option>\n            <option value=2>수령방법2</option>\n            <option value=3>수령방법3</option>\n          </select>\n        </td>\n      </tr>\n\n\n      <!-- <div class=\"col-md-3\">\n          <label class=\"form-label\">숫자임! 수령방법</label>\n          <input v-model=\"rcvrMth\" type=\"number\" class=\"form-control\">\n        </div> -->\n    </div>\n    <!-- <div class=\"col-md-4 d-flex align-items-end\">\n          <button class=\"btn btn-outline-secondary w-100\" @click=\"showVdrModal = true\">거래처변경</button>\n        </div> -->\n    <!-- <vdr-select-modal\n      v-if=\"showVdrModal\"\n      :vdr-list=\"vdr\"\n      :selected=\"selectVdr\"\n      @select-vdr=\"handleVdrSelect\"\n      @close=\"showVdrModal = false\"\n    /> -->\n    <!-- 제품 목록 테이블 -->\n    <table class=\"table table-bordered text-center mt-4\">\n      <thead class=\"table-light\">\n        <tr>\n          <th><input type=\"checkbox\" /></th>\n          <th>발주번호</th>\n          <th>자재ID</th>\n          <th>자재명</th>\n          <th>수량</th>\n          <th>유통기한</th>\n          <th>거래처ID</th>\n          <th>거래처명</th>\n        </tr>\n      </thead>\n      <tbody>\n        <!-- <tr v-for=\"(item,index) in ords\">\n            <td><input type=\"checkbox\" \n                 :value=\"item\"\n                 v-model=\"checkOrd\"\n                 @change=\"handleCheckChange\" /></td>\n            <td>{{ item.ord_no}}</td>\n            <td>{{item.vdr_no  }}</td>\n            <td>{{ item.prd_no }}</td>\n            <td>{{ item.prd_qty }}</td>\n          </tr> -->\n\n        <tr v-for=\"item in purToLotStatus\" :key=\"item.pur_ord_no\">\n          <td><input type=\"checkbox\" :value=\"item\" v-model=\"checkPur\" @change=\"handleCheckChange\" /></td>\n          <td>{{ item.pur_ord_no }}</td>\n          <td>{{ item.mat_no }}</td>\n          <td>{{ item['자재명'] }}</td>\n          <td>{{ item.qty }}</td>\n          <td> {{ item['유통기한'] }}</td>\n          <td>{{ item.vdr_no }}</td>\n          <td>{{ item['거래처명'] }}</td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- 자재입고 버튼 -->\n    <!-- <div class=\"d-flex justify-content-end mt-3\">\n        <button class=\"btn btn-primary\" @click=\"saveImport\">자재입고</button>\n      </div> -->\n    <!--자재여러개입고-->\n    <div class=\"d-flex justify-content-end mt-3\">\n      <button class=\"btn btn-primary\" @click=\"manyImports\">자재입고</button>\n    </div>\n\n  </div>\n\n\n\n</template>\n<script>\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\nexport default {\n  data() {\n    return {\n      mode: 'basic', //체크하기   \n      purToLotStatus: [], //입고검사하고 lot대기하는 애들 \n      checkPur: [], //발주 -> lot 대기하는 애들중에 체크되는 애들 \n      //프론트 -> 서버로 넘겨야함      \n      purOrdNo: 0, //발주번호 \n      matNo: '',//자재번호\n      wareNo: 0, //창고번호     \n      expDt: '', //유통기한\n      prcsr: '', //처리자 - 로그인 한 사람  \n      rcvr: 0, //수령자 \n      rcvrMth: '', //수령방법 \n\n    };\n  },\n  async created() {\n    const result = await axios.get('/api/ordToLot')\n    this.purToLotStatus = result.data;\n  },\n  methods: {\n    //자재하나만 입고 \n    async saveImport() {\n      const payLoad = {\n        mat_no: this.checkPur[0]?.mat_no,//자재번호\n        //현재재고....  cur_stk,prc_qty,qty 모두 공통 \n        qty: this.checkPur[0]?.qty,\n        //입고일자,처리일시,일자,  \n        warehouse_no: this.wareNo, //창고번호 \n        cnsm_lmt_dt: this.expDt, //유통기한\n        unt_prc: this.checkPur[0]?.unt_prc,//단가\n        pur_ord_no: this.purOrdNo, //발주번호,비고(입고시발주번호) \n        prcsr: this.prcsr, //처리자 \n        vdr_no: this.checkPur[0]?.vdr_no, //거래처번호\n        rcvr: this.rcvr, //수령자\n        rcv_mthd: this.rcvrMth //수령방법  \n      }\n      try {\n        await axios.post('/api/addMatImport', payLoad);\n        alert('자재입고완료');\n      } catch (err) {\n        alert('실패 ㅠㅠ ');\n\n      }\n    },\n    handleCheckChange() {\n      if (this.checkPur.length === 1) {\n        const item = this.checkPur[0];\n        this.mode = 'checked';\n        this.purOrdNo = item.pur_ord_no;\n        this.expDt = item['유통기한'];\n      } else {\n        this.mode = 'basic'\n        // alert('하나의 발주건만 선택해주세요');\n        // return;  \n      }\n\n    },\n    //여러개입고하기 \n    async manyImports() {\n\n      console.log('전체발주건', this.purToLotStatus);\n      console.log('체크된 발주건', this.checkPur);\n\n      const selectedOrds = this.purToLotStatus.filter(order => {\n        return this.checkPur.map(p => p.pur_ord_no).includes(order.pur_ord_no);\n      });\n\n      const payloads = selectedOrds.map(item => ({\n        mat_no: item.mat_no,//자재번호\n        //현재재고....  cur_stk,prc_qty,qty 모두 공통 \n        qty: item.qty,\n        //입고일자,처리일시,일자,  \n        warehouse_no: this.wareNo, //창고번호 \n        cnsm_lmt_dt: this.expDt, //유통기한\n        unt_prc: item.unt_prc,//단가\n        pur_ord_no: item.pur_ord_no, //발주번호,비고(입고시발주번호) \n        prcsr: this.prcsr, //처리자 \n        vdr_no: item.vdr_no, //거래처번호\n        rcvr: this.rcvr, //수령자\n        rcv_mthd: this.rcvrMth //수령방법\n      }))\n      try {\n        await axios.post('/api/addMatImports', payloads);\n        alert('자재입고완료');\n\n      }\n      catch (err) {\n        alert('자재입고실패');\n      }\n    }\n\n  },\n\n}\n\n</script>"],"names":["_sfc_main","result","axios","payLoad","_a","_b","_c","_d","item","payloads","order","p","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_7","_hoisted_9","_hoisted_10","_hoisted_11","_openBlock","_createElementBlock","_cache","_createElementVNode","_hoisted_4","$event","$data","_hoisted_6","_hoisted_8","_Fragment","_renderList","$options","args","_toDisplayString"],"mappings":"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"}