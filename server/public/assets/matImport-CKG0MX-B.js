import{_ as m,c as d,a as t,w as p,v as _,k as h,F as v,r as f,e as i,u as b,o as u,f as y,t as l}from"./index-CxFk6QSJ.js";import"./sweetalert2.esm.all-DV3w3JmD.js";const k={data(){return{purToLotStatus:[],checkPur:[],purOrdNo:0,matNo:"",wareNo:0,expDt:"",prcsr:"",rcvr:0,rcvrMth:"1",empStore:b()}},async created(){const e=await i.get("/api/ordToLot");this.purToLotStatus=e.data},computed:{employeeName(){return this.empStore.loginInfo.nm||""}},methods:{async manyImports(){const o=this.purToLotStatus.filter(r=>this.checkPur.map(c=>c.pur_ord_no).includes(r.pur_ord_no)).map(r=>({mat_no:r.mat_no,qty:r.qty,warehouse_no:this.wareNo,cnsm_lmt_dt:r.유통기한,unt_prc:r.unt_prc,pur_ord_no:r.pur_ord_no,prcsr:this.empStore.loginInfo.emp_no,vdr_no:r.vdr_no,rcvr:this.empStore.loginInfo.emp_no,rcv_mthd:this.rcvrMth}));try{await i.post("/api/addMatImports",o),alert("자재입고완료"),this.purToLotStatus=this.purToLotStatus.filter(r=>!this.checkPur.includes(r)),this.checkPur=[]}catch{alert("자재입고실패")}},isSelected(e){return this.checkPur.some(o=>o.pur_ord_no===e.pur_ord_no)},toggleRow(e){const o=this.checkPur.findIndex(r=>r.pur_ord_no===e.pur_ord_no);if(o>-1?this.checkPur.splice(o,1):this.checkPur.push(e),this.checkPur.length===1){const r=this.checkPur[0];this.purOrdNo=r.pur_ord_no,this.expDt=r.유통기한}}}},S={class:"col-md-10 p-4"},g={class:"card p-3 mb-4"},x={class:"d-flex justify-content-end mb-3"},I={class:"row g-3"},w={class:"col-md-4"},P={class:"col-md-4"},N={class:"table table-bordered text-center mt-4"},L=["onClick"];function T(e,o,r,c,a,n){return u(),d("div",S,[o[8]||(o[8]=t("div",{class:"d-flex justify-content-between align-items-center mb-3"},[t("h4",{class:"mb-0"},"입고처리")],-1)),t("div",g,[t("div",x,[t("button",{class:"btn btn-primary btn-sm",onClick:o[0]||(o[0]=(...s)=>n.manyImports&&n.manyImports(...s))},"자재입고")]),t("div",I,[t("div",w,[o[3]||(o[3]=t("label",{class:"form-label"},"담당자",-1)),p(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>n.employeeName=s),class:"form-control",type:"text",placeholder:"예담창고",disabled:""},null,512),[[_,n.employeeName]])]),o[6]||(o[6]=t("div",{class:"col-md-4"},[t("label",{class:"form-label"},"창고번호"),t("input",{class:"form-control",type:"text",placeholder:"예담창고",disabled:""})],-1)),t("div",P,[o[5]||(o[5]=t("label",{class:"form-label"},"수령방법",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":o[2]||(o[2]=s=>a.rcvrMth=s)},o[4]||(o[4]=[t("option",{value:"1"},"수령방법1",-1),t("option",{value:"2"},"수령방법2",-1),t("option",{value:"3"},"수령방법3",-1)]),512),[[h,a.rcvrMth]])])])]),t("table",N,[o[7]||(o[7]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"발주번호"),t("th",null,"자재ID"),t("th",null,"자재명"),t("th",null,"수량"),t("th",null,"유통기한"),t("th",null,"거래처ID"),t("th",null,"거래처명")])],-1)),t("tbody",null,[(u(!0),d(v,null,f(a.purToLotStatus,s=>(u(),d("tr",{key:s.pur_ord_no,class:y({"table-primary":n.isSelected(s)}),onClick:M=>n.toggleRow(s),style:{cursor:"pointer"}},[t("td",null,l(s.pur_ord_no),1),t("td",null,l(s.mat_no),1),t("td",null,l(s.자재명),1),t("td",null,l(s.qty),1),t("td",null,l(s.유통기한),1),t("td",null,l(s.vdr_no),1),t("td",null,l(s.거래처명),1)],10,L))),128))])])])}const O=m(k,[["render",T],["__scopeId","data-v-32310425"]]);export{O as default};
//# sourceMappingURL=matImport-CKG0MX-B.js.map
