<<<<<<< HEAD
<<<<<<<< HEAD:server/public/assets/LineManagementDtl-BfP3txAe.js
import{_ as c,e as y,c as o,a as t,t as s,F as h,r as f,g as b,o as i,w as q,v as p,V as k}from"./index-CxFk6QSJ.js";import{u as N}from"./useDates-UMs5Kxim.js";const v={name:"LineManagementDtl",props:{details:Array,lineNo:String,lineInfo:Object},emits:["close","reload"],data(){return{processDetailList:[]}},watch:{details:{immediate:!0,handler(e){this.processDetailList=Array.isArray(e)?e.map(l=>{const d=typeof l.dft_qty=="number"?l.dft_qty:0,u=Number(l.ord_qty||0);return{...l,dft_qty:d,pdn_qty:Math.max(u-d,0)}}):[]}}},methods:{updatePdnQty(e){const l=Number(e.dft_qty||0),d=Number(e.ord_qty||0);e.pdn_qty=Math.max(d-l,0)},async startLine(e){if(e.dft_qty===null||e.dft_qty===void 0||e.dft_qty===""){alert("⚠️ 불량량을 입력해주세요.");return}const l={p_ln_opr_no:e.ln_opr_no,p_ln_opr_dtl_no:e.ln_opr_dtl_no,p_seq:e.seq,p_dft_qty:e.dft_qty,p_pdn_qty:e.pdn_qty};try{await y.post("/api/lineOperation",l),this.$emit("reload",{line_no:this.lineNo,pdn_ord_dtl_no:e.pdn_ord_dtl_no}),alert("공정 완료!")}catch(d){console.error("❌ 지시 실패:",d),alert("지시 중 오류가 발생했습니다.")}},repair(e){alert(`공정 ${e.seq} 완료 처리함`)},dateFormat(e,l){return N.dateFormat(e,l)},handleConfirm(){this.$emit("close"),this.$emit("reload",{line_no:this.lineNo,forceUpdate:!0})},formatNumber(e){return e==null||isNaN(e)?"-":new Intl.NumberFormat().format(e)},handleInput(e){const l=this.instructionStore.instructionRows[e];l.instruction_qty>l.qty?l.instruction_qty=l.qty:(l.instruction_qty<0||isNaN(l.instruction_qty))&&(l.instruction_qty=0)}}},g={class:"modal-dialog modal-xl"},I={class:"modal-content"},C={class:"modal-header"},x={class:"modal-title fw-bold mb-0"},F={class:"modal-body"},L={class:"container mt-4"},D={class:"mb-4"},M={class:"table table-bordered text-center align-middle"},U=["onUpdate:modelValue","onInput","max","onKeyup"],A={key:1},B={key:0},K={key:1},S={key:2},V={key:3},O={key:4},P=["onClick","disabled"],Q={key:5},j=["onClick"],z={key:6},E={class:"table-light"};function R(e,l,d,u,m,a){return i(),o("div",{class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)","z-index":"1051"},onClick:l[2]||(l[2]=b(n=>e.$emit("close"),["self"]))},[t("div",g,[t("div",I,[t("div",C,[t("h5",x,s(d.lineNo)+" 라인 상세 정보",1),t("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=n=>e.$emit("close"))})]),t("div",F,[t("div",L,[t("h2",D,s(d.lineNo)+" 라인 관리 상세",1),t("table",M,[l[4]||(l[4]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"순서"),t("th",null,"공정명"),t("th",null,"설비명"),t("th",null,"시작시간"),t("th",null,"종료시간"),t("th",null,"투입량"),t("th",null,"불량량"),t("th",null,"생산량"),t("th",null,"상태")])],-1)),t("tbody",null,[(i(!0),o(h,null,f(m.processDetailList,(n,r)=>(i(),o("tr",{key:n.seq},[t("td",null,s(n.seq),1),t("td",null,s(n.proc_code_nm),1),t("td",null,s(n.proc_nm),1),t("td",null,s(a.dateFormat(n.st_tm,"hh시 mm분")),1),t("td",null,s(a.dateFormat(n.end_tm,"hh시 mm분")),1),t("td",null,s(a.formatNumber(n.ord_qty)),1),t("td",null,[n.eqp_sts==="h5"?q((i(),o("input",{key:0,type:"number",class:"form-control form-control-sm text-end","onUpdate:modelValue":_=>n.dft_qty=_,onInput:_=>a.updatePdnQty(n),max:n.ord_qty,min:0,onKeyup:k(_=>a.startLine(n,r),["enter"])},null,40,U)),[[p,n.dft_qty,void 0,{number:!0}]]):(i(),o("span",A,s(a.formatNumber(n.dft_qty)),1))]),t("td",null,s(a.formatNumber(n.pdn_qty)),1),t("td",null,[n.eqp_sts==="h1"?(i(),o("span",B,"정상")):n.eqp_sts==="h2"?(i(),o("span",K,"수리중")):n.eqp_sts==="h3"?(i(),o("span",S,"점검중")):n.eqp_sts==="h4"?(i(),o("span",V,l[3]||(l[3]=[t("button",{class:"btn btn-sm btn-secondary",disabled:""},"작업대기",-1)]))):n.eqp_sts==="h5"?(i(),o("span",O,[t("button",{class:"btn btn-sm btn-primary",onClick:_=>a.startLine(n,r),disabled:n.dft_qty===null||n.dft_qty===void 0||n.dft_qty===""}," 공정진행 ",8,P)])):n.eqp_sts==="h6"?(i(),o("span",Q,[t("button",{class:"btn btn-sm btn-danger",onClick:_=>a.repair(n,r)},"작업완료",8,j)])):(i(),o("span",z,"미정"))])]))),128))]),t("tfoot",E,[t("tr",null,[t("td",null,s(d.lineNo),1),t("td",null,s(d.lineInfo.ln_nm),1),t("td",null,s(d.lineInfo.prd_nm),1),t("td",null,s(a.dateFormat(d.lineInfo.st_tm,"hh시 mm분 ss초")),1),t("td",null,s(a.dateFormat(d.lineInfo.end_tm,"hh시 mm분 ss초")),1),t("td",null,s(d.lineInfo.ord_qty),1),t("td",null,s(d.lineInfo.dft_qty),1),t("td",null,s(d.lineInfo.pdn_qty),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=(...n)=>a.handleConfirm&&a.handleConfirm(...n))},"확인")])])])])])])])])])}const H=c(v,[["render",R],["__scopeId","data-v-4dea4ab7"]]);export{H as default};
//# sourceMappingURL=LineManagementDtl-BfP3txAe.js.map
========
import{_ as c,e as y,c as o,a as t,t as s,F as h,r as f,g as b,o as i,w as q,v as p,V as k}from"./index-DRp0-N0C.js";import{u as N}from"./useDates-UMs5Kxim.js";const v={name:"LineManagementDtl",props:{details:Array,lineNo:String,lineInfo:Object},emits:["close","reload"],data(){return{processDetailList:[]}},watch:{details:{immediate:!0,handler(e){this.processDetailList=Array.isArray(e)?e.map(l=>{const d=typeof l.dft_qty=="number"?l.dft_qty:0,u=Number(l.ord_qty||0);return{...l,dft_qty:d,pdn_qty:Math.max(u-d,0)}}):[]}}},methods:{updatePdnQty(e){const l=Number(e.dft_qty||0),d=Number(e.ord_qty||0);e.pdn_qty=Math.max(d-l,0)},async startLine(e){if(e.dft_qty===null||e.dft_qty===void 0||e.dft_qty===""){alert("⚠️ 불량량을 입력해주세요.");return}const l={p_ln_opr_no:e.ln_opr_no,p_ln_opr_dtl_no:e.ln_opr_dtl_no,p_seq:e.seq,p_dft_qty:e.dft_qty,p_pdn_qty:e.pdn_qty};try{await y.post("/api/lineOperation",l),this.$emit("reload",{line_no:this.lineNo,pdn_ord_dtl_no:e.pdn_ord_dtl_no}),alert("공정 완료!")}catch(d){console.error("❌ 지시 실패:",d),alert("지시 중 오류가 발생했습니다.")}},repair(e){alert(`공정 ${e.seq} 완료 처리함`)},dateFormat(e,l){return N.dateFormat(e,l)},handleConfirm(){this.$emit("close"),this.$emit("reload",{line_no:this.lineNo,forceUpdate:!0})},formatNumber(e){return e==null||isNaN(e)?"-":new Intl.NumberFormat().format(e)},handleInput(e){const l=this.instructionStore.instructionRows[e];l.instruction_qty>l.qty?l.instruction_qty=l.qty:(l.instruction_qty<0||isNaN(l.instruction_qty))&&(l.instruction_qty=0)}}},g={class:"modal-dialog modal-xl"},I={class:"modal-content"},C={class:"modal-header"},x={class:"modal-title fw-bold mb-0"},F={class:"modal-body"},L={class:"container mt-4"},D={class:"mb-4"},M={class:"table table-bordered text-center align-middle"},U=["onUpdate:modelValue","onInput","max","onKeyup"],A={key:1},B={key:0},K={key:1},S={key:2},V={key:3},O={key:4},P=["onClick","disabled"],Q={key:5},j=["onClick"],z={key:6},E={class:"table-light"};function R(e,l,d,u,m,a){return i(),o("div",{class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)","z-index":"1051"},onClick:l[2]||(l[2]=b(n=>e.$emit("close"),["self"]))},[t("div",g,[t("div",I,[t("div",C,[t("h5",x,s(d.lineNo)+" 라인 상세 정보",1),t("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=n=>e.$emit("close"))})]),t("div",F,[t("div",L,[t("h2",D,s(d.lineNo)+" 라인 관리 상세",1),t("table",M,[l[4]||(l[4]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"순서"),t("th",null,"공정명"),t("th",null,"설비명"),t("th",null,"시작시간"),t("th",null,"종료시간"),t("th",null,"투입량"),t("th",null,"불량량"),t("th",null,"생산량"),t("th",null,"상태")])],-1)),t("tbody",null,[(i(!0),o(h,null,f(m.processDetailList,(n,r)=>(i(),o("tr",{key:n.seq},[t("td",null,s(n.seq),1),t("td",null,s(n.proc_code_nm),1),t("td",null,s(n.proc_nm),1),t("td",null,s(a.dateFormat(n.st_tm,"hh시 mm분")),1),t("td",null,s(a.dateFormat(n.end_tm,"hh시 mm분")),1),t("td",null,s(a.formatNumber(n.ord_qty)),1),t("td",null,[n.eqp_sts==="h5"?q((i(),o("input",{key:0,type:"number",class:"form-control form-control-sm text-end","onUpdate:modelValue":_=>n.dft_qty=_,onInput:_=>a.updatePdnQty(n),max:n.ord_qty,min:0,onKeyup:k(_=>a.startLine(n,r),["enter"])},null,40,U)),[[p,n.dft_qty,void 0,{number:!0}]]):(i(),o("span",A,s(a.formatNumber(n.dft_qty)),1))]),t("td",null,s(a.formatNumber(n.pdn_qty)),1),t("td",null,[n.eqp_sts==="h1"?(i(),o("span",B,"정상")):n.eqp_sts==="h2"?(i(),o("span",K,"수리중")):n.eqp_sts==="h3"?(i(),o("span",S,"점검중")):n.eqp_sts==="h4"?(i(),o("span",V,l[3]||(l[3]=[t("button",{class:"btn btn-sm btn-secondary",disabled:""},"작업대기",-1)]))):n.eqp_sts==="h5"?(i(),o("span",O,[t("button",{class:"btn btn-sm btn-primary",onClick:_=>a.startLine(n,r),disabled:n.dft_qty===null||n.dft_qty===void 0||n.dft_qty===""}," 공정진행 ",8,P)])):n.eqp_sts==="h6"?(i(),o("span",Q,[t("button",{class:"btn btn-sm btn-danger",onClick:_=>a.repair(n,r)},"작업완료",8,j)])):(i(),o("span",z,"미정"))])]))),128))]),t("tfoot",E,[t("tr",null,[t("td",null,s(d.lineNo),1),t("td",null,s(d.lineInfo.ln_nm),1),t("td",null,s(d.lineInfo.prd_nm),1),t("td",null,s(a.dateFormat(d.lineInfo.st_tm,"hh시 mm분 ss초")),1),t("td",null,s(a.dateFormat(d.lineInfo.end_tm,"hh시 mm분 ss초")),1),t("td",null,s(d.lineInfo.ord_qty),1),t("td",null,s(d.lineInfo.dft_qty),1),t("td",null,s(d.lineInfo.pdn_qty),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=(...n)=>a.handleConfirm&&a.handleConfirm(...n))},"확인")])])])])])])])])])}const H=c(v,[["render",R],["__scopeId","data-v-4dea4ab7"]]);export{H as default};
//# sourceMappingURL=LineManagementDtl-B1eGutq-.js.map
>>>>>>>> ea6bb99274547af08d1a7bb06d0e67c21cc213ef:server/public/assets/LineManagementDtl-B1eGutq-.js
=======
import{_ as c,e as y,c as o,a as t,t as s,F as h,r as f,g as b,o as i,w as q,v as p,V as k}from"./index-DRp0-N0C.js";import{u as N}from"./useDates-UMs5Kxim.js";const v={name:"LineManagementDtl",props:{details:Array,lineNo:String,lineInfo:Object},emits:["close","reload"],data(){return{processDetailList:[]}},watch:{details:{immediate:!0,handler(e){this.processDetailList=Array.isArray(e)?e.map(l=>{const d=typeof l.dft_qty=="number"?l.dft_qty:0,u=Number(l.ord_qty||0);return{...l,dft_qty:d,pdn_qty:Math.max(u-d,0)}}):[]}}},methods:{updatePdnQty(e){const l=Number(e.dft_qty||0),d=Number(e.ord_qty||0);e.pdn_qty=Math.max(d-l,0)},async startLine(e){if(e.dft_qty===null||e.dft_qty===void 0||e.dft_qty===""){alert("⚠️ 불량량을 입력해주세요.");return}const l={p_ln_opr_no:e.ln_opr_no,p_ln_opr_dtl_no:e.ln_opr_dtl_no,p_seq:e.seq,p_dft_qty:e.dft_qty,p_pdn_qty:e.pdn_qty};try{await y.post("/api/lineOperation",l),this.$emit("reload",{line_no:this.lineNo,pdn_ord_dtl_no:e.pdn_ord_dtl_no}),alert("공정 완료!")}catch(d){console.error("❌ 지시 실패:",d),alert("지시 중 오류가 발생했습니다.")}},repair(e){alert(`공정 ${e.seq} 완료 처리함`)},dateFormat(e,l){return N.dateFormat(e,l)},handleConfirm(){this.$emit("close"),this.$emit("reload",{line_no:this.lineNo,forceUpdate:!0})},formatNumber(e){return e==null||isNaN(e)?"-":new Intl.NumberFormat().format(e)},handleInput(e){const l=this.instructionStore.instructionRows[e];l.instruction_qty>l.qty?l.instruction_qty=l.qty:(l.instruction_qty<0||isNaN(l.instruction_qty))&&(l.instruction_qty=0)}}},g={class:"modal-dialog modal-xl"},I={class:"modal-content"},C={class:"modal-header"},x={class:"modal-title fw-bold mb-0"},F={class:"modal-body"},L={class:"container mt-4"},D={class:"mb-4"},M={class:"table table-bordered text-center align-middle"},U=["onUpdate:modelValue","onInput","max","onKeyup"],A={key:1},B={key:0},K={key:1},S={key:2},V={key:3},O={key:4},P=["onClick","disabled"],Q={key:5},j=["onClick"],z={key:6},E={class:"table-light"};function R(e,l,d,u,m,a){return i(),o("div",{class:"modal fade show d-block",style:{background:"rgba(0,0,0,0.5)","z-index":"1051"},onClick:l[2]||(l[2]=b(n=>e.$emit("close"),["self"]))},[t("div",g,[t("div",I,[t("div",C,[t("h5",x,s(d.lineNo)+" 라인 상세 정보",1),t("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=n=>e.$emit("close"))})]),t("div",F,[t("div",L,[t("h2",D,s(d.lineNo)+" 라인 관리 상세",1),t("table",M,[l[4]||(l[4]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"순서"),t("th",null,"공정명"),t("th",null,"설비명"),t("th",null,"시작시간"),t("th",null,"종료시간"),t("th",null,"투입량"),t("th",null,"불량량"),t("th",null,"생산량"),t("th",null,"상태")])],-1)),t("tbody",null,[(i(!0),o(h,null,f(m.processDetailList,(n,r)=>(i(),o("tr",{key:n.seq},[t("td",null,s(n.seq),1),t("td",null,s(n.proc_code_nm),1),t("td",null,s(n.proc_nm),1),t("td",null,s(a.dateFormat(n.st_tm,"hh시 mm분")),1),t("td",null,s(a.dateFormat(n.end_tm,"hh시 mm분")),1),t("td",null,s(a.formatNumber(n.ord_qty)),1),t("td",null,[n.eqp_sts==="h5"?q((i(),o("input",{key:0,type:"number",class:"form-control form-control-sm text-end","onUpdate:modelValue":_=>n.dft_qty=_,onInput:_=>a.updatePdnQty(n),max:n.ord_qty,min:0,onKeyup:k(_=>a.startLine(n,r),["enter"])},null,40,U)),[[p,n.dft_qty,void 0,{number:!0}]]):(i(),o("span",A,s(a.formatNumber(n.dft_qty)),1))]),t("td",null,s(a.formatNumber(n.pdn_qty)),1),t("td",null,[n.eqp_sts==="h1"?(i(),o("span",B,"정상")):n.eqp_sts==="h2"?(i(),o("span",K,"수리중")):n.eqp_sts==="h3"?(i(),o("span",S,"점검중")):n.eqp_sts==="h4"?(i(),o("span",V,l[3]||(l[3]=[t("button",{class:"btn btn-sm btn-secondary",disabled:""},"작업대기",-1)]))):n.eqp_sts==="h5"?(i(),o("span",O,[t("button",{class:"btn btn-sm btn-primary",onClick:_=>a.startLine(n,r),disabled:n.dft_qty===null||n.dft_qty===void 0||n.dft_qty===""}," 공정진행 ",8,P)])):n.eqp_sts==="h6"?(i(),o("span",Q,[t("button",{class:"btn btn-sm btn-danger",onClick:_=>a.repair(n,r)},"작업완료",8,j)])):(i(),o("span",z,"미정"))])]))),128))]),t("tfoot",E,[t("tr",null,[t("td",null,s(d.lineNo),1),t("td",null,s(d.lineInfo.ln_nm),1),t("td",null,s(d.lineInfo.prd_nm),1),t("td",null,s(a.dateFormat(d.lineInfo.st_tm,"hh시 mm분 ss초")),1),t("td",null,s(a.dateFormat(d.lineInfo.end_tm,"hh시 mm분 ss초")),1),t("td",null,s(d.lineInfo.ord_qty),1),t("td",null,s(d.lineInfo.dft_qty),1),t("td",null,s(d.lineInfo.pdn_qty),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=(...n)=>a.handleConfirm&&a.handleConfirm(...n))},"확인")])])])])])])])])])}const H=c(v,[["render",R],["__scopeId","data-v-4dea4ab7"]]);export{H as default};
//# sourceMappingURL=LineManagementDtl-B1eGutq-.js.map
>>>>>>> 6a9aee91f1b003d56d62a2dc3d9a1abb2695e08b
