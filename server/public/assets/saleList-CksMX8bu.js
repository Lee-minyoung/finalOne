import{_ as x,c as r,a as t,w as a,i as D,j as f,v as i,l as w,F as g,r as _,e as u,o,t as p}from"./index-CxFk6QSJ.js";import{v as S}from"./vdrSelectModal-bPKNTNvE.js";import{p as M}from"./prdSelectModal-YbYj2m-j.js";const k={components:{vdrSelectModal:S,prdSelectModal:M},data(){return{showVdrModal:!1,showPrdModal:!1,selectVdr:null,selectPrd:null,vdrCd:"",prdNo:"",prdQty:1,dueDt:"",ordList:[],vdrList:[],prdList:[],ordListByDate:[],startDate:"",endDate:"",dateShow:!1}},async created(){await this.getOrdList(),this.vdrList=(await u.get("/api/vdr")).data||[],this.prdList=(await u.get("/api/prd")).data||[]},methods:{async getOrdList(){try{const d=await u.get("/api/ord");this.ordList=d.data}catch(d){console.error("주문 불러오기 실패",d)}},async addOrd(){if(!this.vdrCd||!this.prdNo||!this.dueDt||this.prdQty<=0){alert("필수 정보를 모두 입력해주세요.");return}try{const d=await u.post("/api/ord",{vdr_no:this.vdrCd,due_dt:this.dueDt,prd_no:this.prdNo,prd_qty:this.prdQty});alert("주문등록 완료"),this.getOrdList()}catch(d){console.error("주문등록 실패",d),alert("등록 실패")}},handleVdrSelect(d){this.selectVdr=d,this.vdrCd=d.vdr_no,this.showVdrModal=!1},handlePrdSelect(d){this.selectPrd=d,this.prdNo=d.prd_no,this.showPrdModal=!1},async fetchOrdByDate(){console.log("날짜 확인:",this.startDate,this.endDate),this.dateArray=["품명","현재고"],this.dateShow=!0;try{const d=await u.get("/api/ord/by-date",{params:{startDate:this.startDate,endDate:this.endDate}});this.ordListByDate=d.data;const l=new Date(this.startDate),m=new Date(this.endDate);for(;l<=m;){const h=l.toISOString().slice(0,10);this.dateArray.push(h),l.setDate(l.getDate()+1)}console.log("기간별 주문리스트",this.ordListByDate)}catch(d){console.log("기간별 주문리스트 불러오기 실패",d)}}}},P={class:"container"},C={class:"modal fade",id:"exampleModal",tabindex:"-1"},O={class:"modal-dialog modal-xl"},B={class:"modal-content"},N={class:"modal-body"},Q={class:"border rounded p-3 mb-4"},U={class:"row g-3"},T={class:"col-md-4"},j={class:"col-md-4"},q=["value"],A={class:"col-md-4"},F=["value"],I={class:"d-flex gap-2"},E={class:"table table-bordered text-center align-middle"},z=["value"],G={class:"modal-footer"},H={key:0,class:"table table-bordered text-center mt-4"},J={key:1,class:"table table-bordered text-center mt-4"};function K(d,l,m,h,e,n){var b,y,v;const V=w("vdr-select-modal"),L=w("prd-select-modal");return o(),r("div",P,[l[20]||(l[20]=t("div",{class:"d-flex justify-content-between align-items-center mb-4"},[t("h2",{class:"mb-0"},"주문조회"),t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},"주문 등록")],-1)),t("div",C,[t("div",O,[t("div",B,[l[17]||(l[17]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"주문등록"),t("button",{class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",N,[t("div",Q,[t("div",U,[t("div",T,[l[11]||(l[11]=t("label",null,"납기예정일",-1)),a(t("input",{type:"date",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=s=>e.dueDt=s)},null,512),[[i,e.dueDt]])]),t("div",j,[l[12]||(l[12]=t("label",null,"거래처",-1)),t("input",{type:"text",class:"form-control",value:((b=e.selectVdr)==null?void 0:b.cpy_nm)||"",readonly:""},null,8,q)]),t("div",A,[l[13]||(l[13]=t("label",null,"거래처코드",-1)),t("input",{type:"text",class:"form-control",value:((y=e.selectVdr)==null?void 0:y.vdr_no)||"",readonly:""},null,8,F)]),t("div",I,[t("button",{class:"btn btn-outline-primary",onClick:l[1]||(l[1]=s=>e.showVdrModal=!0)},"거래처 선택"),t("button",{class:"btn btn-outline-primary",onClick:l[2]||(l[2]=s=>e.showPrdModal=!0)},"상품 선택")]),e.showVdrModal?(o(),D(V,{key:0,"vdr-list":e.vdrList,selected:e.selectVdr,onSelectVdr:n.handleVdrSelect,onClose:l[3]||(l[3]=s=>e.showVdrModal=!1)},null,8,["vdr-list","selected","onSelectVdr"])):f("",!0),e.showPrdModal?(o(),D(L,{key:1,"prd-list":e.prdList,selected:e.selectPrd,onSelectPrd:n.handlePrdSelect,onClose:l[4]||(l[4]=s=>e.showPrdModal=!1)},null,8,["prd-list","selected","onSelectPrd"])):f("",!0)])]),t("table",E,[l[15]||(l[15]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"제품 ID"),t("th",null,"제품명"),t("th",null,"수량")])],-1)),t("tbody",null,[t("tr",null,[l[14]||(l[14]=t("td",null,"1",-1)),t("td",null,[a(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=s=>e.prdNo=s),readonly:""},null,512),[[i,e.prdNo]])]),t("td",null,[t("input",{type:"text",class:"form-control",value:((v=e.selectPrd)==null?void 0:v.prd_nm)||"",readonly:""},null,8,z)]),t("td",null,[a(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[6]||(l[6]=s=>e.prdQty=s),min:"1"},null,512),[[i,e.prdQty,void 0,{number:!0}]])])])])])]),t("div",G,[l[16]||(l[16]=t("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"닫기",-1)),t("button",{class:"btn btn-primary",onClick:l[7]||(l[7]=(...s)=>n.addOrd&&n.addOrd(...s))},"주문등록")])])])]),a(t("input",{type:"date","onUpdate:modelValue":l[8]||(l[8]=s=>e.startDate=s)},null,512),[[i,e.startDate]]),a(t("input",{type:"date","onUpdate:modelValue":l[9]||(l[9]=s=>e.endDate=s)},null,512),[[i,e.endDate]]),t("button",{class:"btn btn-primary",onClick:l[10]||(l[10]=(...s)=>n.fetchOrdByDate&&n.fetchOrdByDate(...s))},"조회"),e.dateShow?(o(),r("table",J,[l[19]||(l[19]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"날짜"),t("th",null,"주문번호"),t("th",null,"제품번호"),t("th",null,"제품명"),t("th",null,"거래처명"),t("th",null,"요청수량"),t("th",null,"LOT재고량")])],-1)),t("tbody",null,[(o(!0),r(g,null,_(e.ordListByDate,(s,c)=>(o(),r("tr",{key:c}))),128))])])):(o(),r("table",H,[l[18]||(l[18]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"주문번호"),t("th",null,"제품명"),t("th",null,"거래처코드"),t("th",null,"요청수량"),t("th",null,"LOT재고량")])],-1)),t("tbody",null,[(o(!0),r(g,null,_(e.ordList,(s,c)=>(o(),r("tr",{key:c},[t("td",null,p(s.ord_no),1),t("td",null,p(s.prd_nm),1),t("td",null,p(s.vdr_no),1),t("td",null,p(s.prd_qty),1),t("td",null,p(s.현재고량),1)]))),128))])]))])}const Y=x(k,[["render",K]]);export{Y as default};
//# sourceMappingURL=saleList-CksMX8bu.js.map
